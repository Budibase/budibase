import "./chunk-OROXOI2D.js";

// ../../../../node_modules/posthog-js/dist/es.js
function e(e6, t2) {
  var n2 = Object.keys(e6);
  if (Object.getOwnPropertySymbols) {
    var r2 = Object.getOwnPropertySymbols(e6);
    t2 && (r2 = r2.filter(function(t3) {
      return Object.getOwnPropertyDescriptor(e6, t3).enumerable;
    })), n2.push.apply(n2, r2);
  }
  return n2;
}
function t(t2) {
  for (var n2 = 1; n2 < arguments.length; n2++) {
    var r2 = null != arguments[n2] ? arguments[n2] : {};
    n2 % 2 ? e(Object(r2), true).forEach(function(e6) {
      s(t2, e6, r2[e6]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t2, Object.getOwnPropertyDescriptors(r2)) : e(Object(r2)).forEach(function(e6) {
      Object.defineProperty(t2, e6, Object.getOwnPropertyDescriptor(r2, e6));
    });
  }
  return t2;
}
function n(e6) {
  return n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e7) {
    return typeof e7;
  } : function(e7) {
    return e7 && "function" == typeof Symbol && e7.constructor === Symbol && e7 !== Symbol.prototype ? "symbol" : typeof e7;
  }, n(e6);
}
function r(e6, t2) {
  if (!(e6 instanceof t2))
    throw new TypeError("Cannot call a class as a function");
}
function i(e6, t2) {
  for (var n2 = 0; n2 < t2.length; n2++) {
    var r2 = t2[n2];
    r2.enumerable = r2.enumerable || false, r2.configurable = true, "value" in r2 && (r2.writable = true), Object.defineProperty(e6, r2.key, r2);
  }
}
function o(e6, t2, n2) {
  return t2 && i(e6.prototype, t2), n2 && i(e6, n2), Object.defineProperty(e6, "prototype", { writable: false }), e6;
}
function s(e6, t2, n2) {
  return t2 in e6 ? Object.defineProperty(e6, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e6[t2] = n2, e6;
}
function a(e6, t2) {
  if ("function" != typeof t2 && null !== t2)
    throw new TypeError("Super expression must either be null or a function");
  e6.prototype = Object.create(t2 && t2.prototype, { constructor: { value: e6, writable: true, configurable: true } }), Object.defineProperty(e6, "prototype", { writable: false }), t2 && c(e6, t2);
}
function u(e6) {
  return u = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e7) {
    return e7.__proto__ || Object.getPrototypeOf(e7);
  }, u(e6);
}
function c(e6, t2) {
  return c = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e7, t3) {
    return e7.__proto__ = t3, e7;
  }, c(e6, t2);
}
function l(e6, t2) {
  if (null == e6)
    return {};
  var n2, r2, i2 = function(e7, t3) {
    if (null == e7)
      return {};
    var n3, r3, i3 = {}, o3 = Object.keys(e7);
    for (r3 = 0; r3 < o3.length; r3++)
      n3 = o3[r3], t3.indexOf(n3) >= 0 || (i3[n3] = e7[n3]);
    return i3;
  }(e6, t2);
  if (Object.getOwnPropertySymbols) {
    var o2 = Object.getOwnPropertySymbols(e6);
    for (r2 = 0; r2 < o2.length; r2++)
      n2 = o2[r2], t2.indexOf(n2) >= 0 || Object.prototype.propertyIsEnumerable.call(e6, n2) && (i2[n2] = e6[n2]);
  }
  return i2;
}
function d(e6, t2) {
  if (t2 && ("object" == typeof t2 || "function" == typeof t2))
    return t2;
  if (void 0 !== t2)
    throw new TypeError("Derived constructors may only return object or undefined");
  return function(e7) {
    if (void 0 === e7)
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return e7;
  }(e6);
}
function f(e6) {
  var t2 = function() {
    if ("undefined" == typeof Reflect || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if ("function" == typeof Proxy)
      return true;
    try {
      return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      })), true;
    } catch (e7) {
      return false;
    }
  }();
  return function() {
    var n2, r2 = u(e6);
    if (t2) {
      var i2 = u(this).constructor;
      n2 = Reflect.construct(r2, arguments, i2);
    } else
      n2 = r2.apply(this, arguments);
    return d(this, n2);
  };
}
function h(e6, t2) {
  return function(e7) {
    if (Array.isArray(e7))
      return e7;
  }(e6) || function(e7, t3) {
    var n2 = null == e7 ? null : "undefined" != typeof Symbol && e7[Symbol.iterator] || e7["@@iterator"];
    if (null == n2)
      return;
    var r2, i2, o2 = [], s2 = true, a2 = false;
    try {
      for (n2 = n2.call(e7); !(s2 = (r2 = n2.next()).done) && (o2.push(r2.value), !t3 || o2.length !== t3); s2 = true)
        ;
    } catch (e8) {
      a2 = true, i2 = e8;
    } finally {
      try {
        s2 || null == n2.return || n2.return();
      } finally {
        if (a2)
          throw i2;
      }
    }
    return o2;
  }(e6, t2) || g(e6, t2) || function() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function p(e6) {
  return function(e7) {
    if (Array.isArray(e7))
      return _(e7);
  }(e6) || function(e7) {
    if ("undefined" != typeof Symbol && null != e7[Symbol.iterator] || null != e7["@@iterator"])
      return Array.from(e7);
  }(e6) || g(e6) || function() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }();
}
function g(e6, t2) {
  if (e6) {
    if ("string" == typeof e6)
      return _(e6, t2);
    var n2 = Object.prototype.toString.call(e6).slice(8, -1);
    return "Object" === n2 && e6.constructor && (n2 = e6.constructor.name), "Map" === n2 || "Set" === n2 ? Array.from(e6) : "Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2) ? _(e6, t2) : void 0;
  }
}
function _(e6, t2) {
  (null == t2 || t2 > e6.length) && (t2 = e6.length);
  for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
    r2[n2] = e6[n2];
  return r2;
}
function v(e6, t2) {
  var n2 = "undefined" != typeof Symbol && e6[Symbol.iterator] || e6["@@iterator"];
  if (!n2) {
    if (Array.isArray(e6) || (n2 = g(e6)) || t2 && e6 && "number" == typeof e6.length) {
      n2 && (e6 = n2);
      var r2 = 0, i2 = function() {
      };
      return { s: i2, n: function() {
        return r2 >= e6.length ? { done: true } : { done: false, value: e6[r2++] };
      }, e: function(e7) {
        throw e7;
      }, f: i2 };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var o2, s2 = true, a2 = false;
  return { s: function() {
    n2 = n2.call(e6);
  }, n: function() {
    var e7 = n2.next();
    return s2 = e7.done, e7;
  }, e: function(e7) {
    a2 = true, o2 = e7;
  }, f: function() {
    try {
      s2 || null == n2.return || n2.return();
    } finally {
      if (a2)
        throw o2;
    }
  } };
}
var m = { DEBUG: false, LIB_VERSION: "1.83.0" };
var y = Array.prototype;
var b = Object.prototype;
var w = b.toString;
var k = b.hasOwnProperty;
var S = "undefined" != typeof window ? window : {};
var E = S.navigator || { userAgent: "" };
var x = S.document || {};
var P = E.userAgent;
var F = ["localhost", "127.0.0.1"];
var I = y.forEach;
var O = y.indexOf;
var $ = Array.isArray;
var R = {};
var T = { log: function() {
  if (m.DEBUG && !q(window.console) && window.console) {
    for (var e6 = ("__rrweb_original__" in window.console.log) ? window.console.log.__rrweb_original__ : window.console.log, t2 = arguments.length, n2 = new Array(t2), r2 = 0; r2 < t2; r2++)
      n2[r2] = arguments[r2];
    try {
      e6.apply(window.console, n2);
    } catch (t3) {
      A(n2, function(t4) {
        e6(t4);
      });
    }
  }
}, error: function() {
  if (m.DEBUG && !q(window.console) && window.console) {
    for (var e6 = arguments.length, t2 = new Array(e6), n2 = 0; n2 < e6; n2++)
      t2[n2] = arguments[n2];
    var r2 = ["PostHog error:"].concat(t2), i2 = "__rrweb_original__" in window.console.error ? window.console.error.__rrweb_original__ : window.console.error;
    try {
      i2.apply(window.console, r2);
    } catch (e7) {
      A(r2, function(e8) {
        i2(e8);
      });
    }
  }
}, critical: function() {
  if (!q(window.console) && window.console) {
    for (var e6 = arguments.length, t2 = new Array(e6), n2 = 0; n2 < e6; n2++)
      t2[n2] = arguments[n2];
    var r2 = ["PostHog error:"].concat(t2), i2 = "__rrweb_original__" in window.console.error ? window.console.error.__rrweb_original__ : window.console.error;
    try {
      i2.apply(window.console, r2);
    } catch (e7) {
      A(r2, function(e8) {
        i2(e8);
      });
    }
  }
}, unintializedWarning: function(e6) {
  m.DEBUG && !q(window.console) && window.console && T.error("[PostHog] You must initialize PostHog before calling ".concat(e6));
} };
var M = function(e6) {
  return e6.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
};
function A(e6, t2, n2) {
  if (Array.isArray(e6)) {
    if (I && e6.forEach === I)
      e6.forEach(t2, n2);
    else if ("length" in e6 && e6.length === +e6.length) {
      for (var r2 = 0, i2 = e6.length; r2 < i2; r2++)
        if (r2 in e6 && t2.call(n2, e6[r2], r2) === R)
          return;
    }
  }
}
function C(e6, t2, n2) {
  if (null != e6) {
    if (Array.isArray(e6))
      return A(e6, t2, n2);
    for (var r2 in e6)
      if (k.call(e6, r2) && t2.call(n2, e6[r2], r2) === R)
        return;
  }
}
var D = function(e6) {
  for (var t2 = arguments.length, n2 = new Array(t2 > 1 ? t2 - 1 : 0), r2 = 1; r2 < t2; r2++)
    n2[r2 - 1] = arguments[r2];
  return A(n2, function(t3) {
    for (var n3 in t3)
      void 0 !== t3[n3] && (e6[n3] = t3[n3]);
  }), e6;
};
var j = $ || function(e6) {
  return "[object Array]" === w.call(e6);
};
var N = function(e6) {
  try {
    return /^\s*\bfunction\b/.test(e6);
  } catch (e7) {
    return false;
  }
};
function H(e6, t2) {
  return -1 !== e6.indexOf(t2);
}
var L = function(e6) {
  return e6 === Object(e6) && !j(e6);
};
var B = function(e6) {
  if (L(e6)) {
    for (var t2 in e6)
      if (k.call(e6, t2))
        return false;
    return true;
  }
  return false;
};
var q = function(e6) {
  return void 0 === e6;
};
var U = function(e6) {
  return "[object String]" == w.call(e6);
};
var V = function(e6) {
  return "[object Number]" == w.call(e6);
};
var G = function(e6, t2) {
  return !!function(e7) {
    try {
      new RegExp(e7);
    } catch (e8) {
      return false;
    }
    return true;
  }(t2) && new RegExp(t2).test(e6);
};
var z = function() {
  return Date.now = Date.now || function() {
    return +new Date();
  }, Date.now();
};
var W = function(e6) {
  return function() {
    try {
      for (var t2 = arguments.length, n2 = new Array(t2), r2 = 0; r2 < t2; r2++)
        n2[r2] = arguments[r2];
      return e6.apply(this, n2);
    } catch (e7) {
      T.critical("Implementation error. Please turn on debug and contact support@posthog.com."), T.critical(e7);
    }
  };
};
var Y = function(e6) {
  var t2 = {};
  return C(e6, function(e7, n2) {
    U(e7) && e7.length > 0 && (t2[n2] = e7);
  }), t2;
};
var Q = ["$performance_raw"];
function J(e6, t2) {
  return n2 = e6, r2 = function(e7, n3) {
    return n3 && Q.indexOf(n3) > -1 ? e7 : "string" == typeof e7 && null !== t2 ? e7.slice(0, t2) : e7;
  }, i2 = /* @__PURE__ */ new Set(), function e7(t3, n3) {
    return t3 !== Object(t3) ? r2 ? r2(t3, n3) : t3 : i2.has(t3) ? void 0 : (i2.add(t3), j(t3) ? (o2 = [], A(t3, function(t4) {
      o2.push(e7(t4));
    })) : (o2 = {}, C(t3, function(t4, n4) {
      i2.has(t4) || (o2[n4] = e7(t4, n4));
    })), o2);
    var o2;
  }(n2);
  var n2, r2, i2;
}
function X(e6) {
  var t2, n2, r2, i2, o2, s2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", a2 = 0, u2 = 0, c2 = "", l2 = [];
  if (!e6)
    return e6;
  e6 = K(e6);
  do {
    t2 = (o2 = e6.charCodeAt(a2++) << 16 | e6.charCodeAt(a2++) << 8 | e6.charCodeAt(a2++)) >> 18 & 63, n2 = o2 >> 12 & 63, r2 = o2 >> 6 & 63, i2 = 63 & o2, l2[u2++] = s2.charAt(t2) + s2.charAt(n2) + s2.charAt(r2) + s2.charAt(i2);
  } while (a2 < e6.length);
  switch (c2 = l2.join(""), e6.length % 3) {
    case 1:
      c2 = c2.slice(0, -2) + "==";
      break;
    case 2:
      c2 = c2.slice(0, -1) + "=";
  }
  return c2;
}
var K = function(e6) {
  var t2, n2, r2, i2, o2 = "";
  for (t2 = n2 = 0, r2 = (e6 = (e6 + "").replace(/\r\n/g, "\n").replace(/\r/g, "\n")).length, i2 = 0; i2 < r2; i2++) {
    var s2 = e6.charCodeAt(i2), a2 = null;
    s2 < 128 ? n2++ : a2 = s2 > 127 && s2 < 2048 ? String.fromCharCode(s2 >> 6 | 192, 63 & s2 | 128) : String.fromCharCode(s2 >> 12 | 224, s2 >> 6 & 63 | 128, 63 & s2 | 128), null !== a2 && (n2 > t2 && (o2 += e6.substring(t2, n2)), o2 += a2, t2 = n2 = i2 + 1);
  }
  return n2 > t2 && (o2 += e6.substring(t2, e6.length)), o2;
};
var Z = ["ahrefsbot", "applebot", "baiduspider", "bingbot", "bingpreview", "bot.htm", "bot.php", "crawler", "duckduckbot", "facebookexternal", "facebookcatalog", "gptbot", "hubspot", "linkedinbot", "mj12bot", "petalbot", "pinterest", "prerender", "rogerbot", "screaming frog", "semrushbot", "sitebulb", "twitterbot", "yahoo! slurp", "yandexbot", "adsbot-google", "apis-google", "duplexweb-google", "feedfetcher-google", "google favicon", "google web preview", "google-read-aloud", "googlebot", "googleweblight", "mediapartners-google", "storebot-google"];
var ee = function(e6, t2) {
  return Z.concat(t2).some(function(t3) {
    return e6.includes ? e6.includes(t3) : -1 !== e6.indexOf(t3);
  });
};
var te = function(e6, t2) {
  var n2 = t2.replace(/[[]/, "\\[").replace(/[\]]/, "\\]"), r2 = new RegExp("[\\?&]" + n2 + "=([^&#]*)").exec(e6);
  if (null === r2 || r2 && "string" != typeof r2[1] && r2[1].length)
    return "";
  var i2 = r2[1];
  try {
    i2 = decodeURIComponent(i2);
  } catch (e7) {
    T.error("Skipping decoding for malformed query param: " + i2);
  }
  return i2.replace(/\+/g, " ");
};
var ne = function(e6, t2) {
  var n2 = e6.match(new RegExp(t2 + "=([^&]*)"));
  return n2 ? n2[1] : null;
};
var re = function() {
  function e6(t2) {
    return t2 && (t2.preventDefault = e6.preventDefault, t2.stopPropagation = e6.stopPropagation), t2;
  }
  return e6.preventDefault = function() {
    this.returnValue = false;
  }, e6.stopPropagation = function() {
    this.cancelBubble = true;
  }, function(t2, n2, r2, i2, o2) {
    if (t2)
      if (t2.addEventListener && !i2)
        t2.addEventListener(n2, r2, !!o2);
      else {
        var s2 = "on" + n2, a2 = t2[s2];
        t2[s2] = function(t3, n3, r3) {
          return function(i3) {
            if (i3 = i3 || e6(window.event)) {
              var o3, s3 = true;
              N(r3) && (o3 = r3(i3));
              var a3 = n3.call(t3, i3);
              return false !== o3 && false !== a3 || (s3 = false), s3;
            }
          };
        }(t2, r2, a2);
      }
    else
      T.error("No valid element provided to register_event");
  };
}();
function ie(e6, t2) {
  var n2 = function() {
    var n3 = x.createElement("script");
    n3.type = "text/javascript", n3.src = e6, n3.onload = function(e7) {
      return t2(void 0, e7);
    }, n3.onerror = function(e7) {
      return t2(e7);
    };
    var r2, i2 = x.querySelectorAll("body > script");
    i2.length > 0 ? null === (r2 = i2[0].parentNode) || void 0 === r2 || r2.insertBefore(n3, i2[0]) : x.body.appendChild(n3);
  };
  x.body ? n2() : x.addEventListener("DOMContentLoaded", n2);
}
var oe = { campaignParams: function(e6) {
  var t2 = ["utm_source", "utm_medium", "utm_campaign", "utm_content", "utm_term", "gclid", "fbclid", "msclkid"].concat(e6 || []), n2 = {};
  return C(t2, function(e7) {
    var t3 = te(x.URL, e7);
    t3.length && (n2[e7] = t3);
  }), n2;
}, searchEngine: function() {
  var e6 = x.referrer;
  return e6 ? 0 === e6.search("https?://(.*)google.([^/?]*)") ? "google" : 0 === e6.search("https?://(.*)bing.com") ? "bing" : 0 === e6.search("https?://(.*)yahoo.com") ? "yahoo" : 0 === e6.search("https?://(.*)duckduckgo.com") ? "duckduckgo" : null : null;
}, searchInfo: function() {
  var e6 = oe.searchEngine(), t2 = "yahoo" != e6 ? "q" : "p", n2 = {};
  if (null !== e6) {
    n2.$search_engine = e6;
    var r2 = te(x.referrer, t2);
    r2.length && (n2.ph_keyword = r2);
  }
  return n2;
}, browser: function(e6, t2, n2) {
  return t2 = t2 || "", n2 || H(e6, " OPR/") ? H(e6, "Mini") ? "Opera Mini" : "Opera" : /(BlackBerry|PlayBook|BB10)/i.test(e6) ? "BlackBerry" : H(e6, "IEMobile") || H(e6, "WPDesktop") ? "Internet Explorer Mobile" : H(e6, "SamsungBrowser/") ? "Samsung Internet" : H(e6, "Edge") || H(e6, "Edg/") ? "Microsoft Edge" : H(e6, "FBIOS") ? "Facebook Mobile" : H(e6, "Chrome") ? "Chrome" : H(e6, "CriOS") ? "Chrome iOS" : H(e6, "UCWEB") || H(e6, "UCBrowser") ? "UC Browser" : H(e6, "FxiOS") ? "Firefox iOS" : H(t2, "Apple") ? H(e6, "Mobile") ? "Mobile Safari" : "Safari" : H(e6, "Android") ? "Android Mobile" : H(e6, "Konqueror") ? "Konqueror" : H(e6, "Firefox") ? "Firefox" : H(e6, "MSIE") || H(e6, "Trident/") ? "Internet Explorer" : H(e6, "Gecko") ? "Mozilla" : "";
}, browserVersion: function(e6, t2, n2) {
  var r2 = { "Internet Explorer Mobile": /rv:(\d+(\.\d+)?)/, "Microsoft Edge": /Edge?\/(\d+(\.\d+)?)/, Chrome: /Chrome\/(\d+(\.\d+)?)/, "Chrome iOS": /CriOS\/(\d+(\.\d+)?)/, "UC Browser": /(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/, Safari: /Version\/(\d+(\.\d+)?)/, "Mobile Safari": /Version\/(\d+(\.\d+)?)/, Opera: /(Opera|OPR)\/(\d+(\.\d+)?)/, Firefox: /Firefox\/(\d+(\.\d+)?)/, "Firefox iOS": /FxiOS\/(\d+(\.\d+)?)/, Konqueror: /Konqueror:(\d+(\.\d+)?)/, BlackBerry: /BlackBerry (\d+(\.\d+)?)/, "Android Mobile": /android\s(\d+(\.\d+)?)/, "Samsung Internet": /SamsungBrowser\/(\d+(\.\d+)?)/, "Internet Explorer": /(rv:|MSIE )(\d+(\.\d+)?)/, Mozilla: /rv:(\d+(\.\d+)?)/ }[oe.browser(e6, t2, n2)];
  if (void 0 === r2)
    return null;
  var i2 = e6.match(r2);
  return i2 ? parseFloat(i2[i2.length - 2]) : null;
}, browserLanguage: function() {
  return E.language || E.userLanguage;
}, os: function(e6) {
  if (/Windows/i.test(e6)) {
    if (/Phone/.test(e6) || /WPDesktop/.test(e6))
      return { os_name: "Windows Phone", os_version: "" };
    var t2 = /Windows NT ([0-9.]+)/i.exec(e6);
    return t2 && t2[1] ? { os_name: "Windows", os_version: t2[1] } : { os_name: "Windows", os_version: "" };
  }
  if (/(iPhone|iPad|iPod)/.test(e6)) {
    var n2 = /OS (\d+)_(\d+)_?(\d+)?/i.exec(e6);
    return n2 && n2[1] ? { os_name: "iOS", os_version: [n2[1], n2[2], n2[3] || "0"].join(".") } : { os_name: "iOS", os_version: "" };
  }
  if (/Android/.test(e6)) {
    var r2 = /Android (\d+)\.(\d+)\.?(\d+)?/i.exec(e6);
    return r2 && r2[1] ? { os_name: "Android", os_version: [r2[1], r2[2], r2[3] || "0"].join(".") } : { os_name: "Android", os_version: "" };
  }
  if (/(BlackBerry|PlayBook|BB10)/i.test(e6))
    return { os_name: "BlackBerry", os_version: "" };
  if (/Mac/i.test(e6)) {
    var i2 = /Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i.exec(e6);
    return i2 && i2[1] ? { os_name: "Mac OS X", os_version: [i2[1], i2[2], i2[3] || "0"].join(".") } : { os_name: "Mac OS X", os_version: "" };
  }
  return /Linux/.test(e6) ? { os_name: "Linux", os_version: "" } : /CrOS/.test(e6) ? { os_name: "Chrome OS", os_version: "" } : { os_name: "", os_version: "" };
}, device: function(e6) {
  return /Windows Phone/i.test(e6) || /WPDesktop/.test(e6) ? "Windows Phone" : /iPad/.test(e6) ? "iPad" : /iPod/.test(e6) ? "iPod Touch" : /iPhone/.test(e6) ? "iPhone" : /(BlackBerry|PlayBook|BB10)/i.test(e6) ? "BlackBerry" : /Android/.test(e6) && !/Mobile/.test(e6) ? "Android Tablet" : /Android/.test(e6) ? "Android" : "";
}, deviceType: function(e6) {
  var t2 = this.device(e6);
  return "iPad" === t2 || "Android Tablet" === t2 ? "Tablet" : t2 ? "Mobile" : "Desktop";
}, referrer: function() {
  return x.referrer || "$direct";
}, referringDomain: function() {
  if (!x.referrer)
    return "$direct";
  var e6 = x.createElement("a");
  return e6.href = x.referrer, e6.host;
}, properties: function() {
  var e6 = oe.os(P), t2 = e6.os_name, n2 = e6.os_version;
  return D(Y({ $os: t2, $os_version: n2, $browser: oe.browser(P, E.vendor, S.opera), $device: oe.device(P), $device_type: oe.deviceType(P) }), { $current_url: null == S ? void 0 : S.location.href, $host: null == S ? void 0 : S.location.host, $pathname: null == S ? void 0 : S.location.pathname, $browser_version: oe.browserVersion(P, E.vendor, S.opera), $browser_language: oe.browserLanguage(), $screen_height: null == S ? void 0 : S.screen.height, $screen_width: null == S ? void 0 : S.screen.width, $viewport_height: null == S ? void 0 : S.innerHeight, $viewport_width: null == S ? void 0 : S.innerWidth, $lib: "web", $lib_version: m.LIB_VERSION, $insert_id: Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10), $time: z() / 1e3 });
}, people_properties: function() {
  var e6 = oe.os(P), t2 = e6.os_name, n2 = e6.os_version;
  return D(Y({ $os: t2, $os_version: n2, $browser: oe.browser(P, E.vendor, S.opera) }), { $browser_version: oe.browserVersion(P, E.vendor, S.opera) });
} };
function se(e6) {
  switch (n(e6.className)) {
    case "string":
      return e6.className;
    case "object":
      return ("baseVal" in e6.className ? e6.className.baseVal : null) || e6.getAttribute("class") || "";
    default:
      return "";
  }
}
function ae(e6) {
  var t2 = "";
  return he(e6) && !pe(e6) && e6.childNodes && e6.childNodes.length && C(e6.childNodes, function(e7) {
    le(e7) && e7.textContent && (t2 += M(e7.textContent).split(/(\s+)/).filter(ge).join("").replace(/[\r\n]/g, " ").replace(/[ ]+/g, " ").substring(0, 255));
  }), M(t2);
}
function ue(e6) {
  return !!e6 && 1 === e6.nodeType;
}
function ce(e6, t2) {
  return !!e6 && !!e6.tagName && e6.tagName.toLowerCase() === t2.toLowerCase();
}
function le(e6) {
  return !!e6 && 3 === e6.nodeType;
}
function de(e6) {
  return !!e6 && 11 === e6.nodeType;
}
var fe = ["a", "button", "form", "input", "select", "textarea", "label"];
function he(e6) {
  for (var t2 = e6; t2.parentNode && !ce(t2, "body"); t2 = t2.parentNode) {
    var n2 = se(t2).split(" ");
    if (H(n2, "ph-sensitive") || H(n2, "ph-no-capture"))
      return false;
  }
  if (H(se(e6).split(" "), "ph-include"))
    return true;
  var r2 = e6.type || "";
  if ("string" == typeof r2)
    switch (r2.toLowerCase()) {
      case "hidden":
      case "password":
        return false;
    }
  var i2 = e6.name || e6.id || "";
  if ("string" == typeof i2) {
    if (/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i2.replace(/[^a-zA-Z0-9]/g, "")))
      return false;
  }
  return true;
}
function pe(e6) {
  return !!(ce(e6, "input") && !["button", "checkbox", "submit", "reset"].includes(e6.type) || ce(e6, "select") || ce(e6, "textarea") || "true" === e6.getAttribute("contenteditable"));
}
function ge(e6) {
  if (null === e6 || q(e6))
    return false;
  if ("string" == typeof e6) {
    e6 = M(e6);
    if (/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((e6 || "").replace(/[- ]/g, "")))
      return false;
    if (/(^\d{3}-?\d{2}-?\d{4}$)/.test(e6))
      return false;
  }
  return true;
}
function _e(e6) {
  var t2 = ae(e6);
  return ge(t2 = "".concat(t2, " ").concat(ve(e6)).trim()) ? t2 : "";
}
function ve(e6) {
  var t2 = "";
  return e6 && e6.childNodes && e6.childNodes.length && C(e6.childNodes, function(e7) {
    var n2;
    if (e7 && "span" === (null === (n2 = e7.tagName) || void 0 === n2 ? void 0 : n2.toLowerCase()))
      try {
        var r2 = ae(e7);
        t2 = "".concat(t2, " ").concat(r2).trim(), e7.childNodes && e7.childNodes.length && (t2 = "".concat(t2, " ").concat(ve(e7)).trim());
      } catch (e8) {
        console.error(e8);
      }
  }), t2;
}
var me = function() {
  function e6(t2) {
    r(this, e6), this.clicks = [], this.enabled = t2;
  }
  return o(e6, [{ key: "isRageClick", value: function(e7, t2, n2) {
    if (!this.enabled)
      return false;
    var r2 = this.clicks[this.clicks.length - 1];
    if (r2 && Math.abs(e7 - r2.x) + Math.abs(t2 - r2.y) < 30 && n2 - r2.timestamp < 1e3) {
      if (this.clicks.push({ x: e7, y: t2, timestamp: n2 }), 3 === this.clicks.length)
        return true;
    } else
      this.clicks = [{ x: e7, y: t2, timestamp: n2 }];
    return false;
  } }]), e6;
}();
var ye = "$people_distinct_id";
var be = "__alias";
var we = "__timers";
var ke = "$autocapture_disabled_server_side";
var Se = "$session_recording_enabled_server_side";
var Ee = "$console_log_recording_enabled_server_side";
var xe = "$session_recording_recorder_version_server_side";
var Pe = "$sesid";
var Fe = "$enabled_feature_flags";
var Ie = "$early_access_features";
var Oe = "$stored_person_properties";
var $e = "$stored_group_properties";
var Re = "$surveys";
var Te = "$flag_call_reported";
var Me = "$user_state";
var Ae = "$posthog_quota_limited";
var Ce = [ye, be, "__cmpns", we, Se, Pe, Fe, Me, Ae, Ie, $e, Oe, Re, Te];
function De(e6, t2) {
  return t2.length > e6 ? t2.slice(0, e6) + "..." : t2;
}
var je = { _initializedTokens: [], _isDisabledServerSide: null, _isAutocaptureEnabled: false, _setIsAutocaptureEnabled: function(e6) {
  var t2, n2 = null === this._isDisabledServerSide ? !(null === (t2 = e6.persistence) || void 0 === t2 || !t2.props[ke]) : this._isDisabledServerSide, r2 = !!e6.config.autocapture;
  this._isAutocaptureEnabled = r2 && !n2;
}, _previousElementSibling: function(e6) {
  if (e6.previousElementSibling)
    return e6.previousElementSibling;
  var t2 = e6;
  do {
    t2 = t2.previousSibling;
  } while (t2 && !ue(t2));
  return t2;
}, _getAugmentPropertiesFromElement: function(e6) {
  if (!he(e6))
    return {};
  var t2 = {};
  return C(e6.attributes, function(e7) {
    if (0 === e7.name.indexOf("data-ph-capture-attribute")) {
      var n2 = e7.name.replace("data-ph-capture-attribute-", ""), r2 = e7.value;
      n2 && r2 && ge(r2) && (t2[n2] = r2);
    }
  }), t2;
}, _getPropertiesFromElement: function(e6, t2, n2) {
  var r2, i2 = e6.tagName.toLowerCase(), o2 = { tag_name: i2 };
  fe.indexOf(i2) > -1 && !n2 && ("a" === i2.toLowerCase() || "button" === i2.toLowerCase() ? o2.$el_text = De(1024, _e(e6)) : o2.$el_text = De(1024, ae(e6)));
  var s2 = se(e6);
  s2.length > 0 && (o2.classes = s2.split(" ").filter(function(e7) {
    return "" !== e7;
  }));
  var a2 = null === (r2 = this.config) || void 0 === r2 ? void 0 : r2.element_attribute_ignorelist;
  C(e6.attributes, function(n3) {
    var r3;
    pe(e6) && -1 === ["name", "id", "class"].indexOf(n3.name) || (null != a2 && a2.includes(n3.name) || !t2 && ge(n3.value) && ("string" != typeof (r3 = n3.name) || "_ngcontent" !== r3.substring(0, 10) && "_nghost" !== r3.substring(0, 7)) && (o2["attr__" + n3.name] = De(1024, n3.value)));
  });
  for (var u2 = 1, c2 = 1, l2 = e6; l2 = this._previousElementSibling(l2); )
    u2++, l2.tagName === e6.tagName && c2++;
  return o2.nth_child = u2, o2.nth_of_type = c2, o2;
}, _getDefaultProperties: function(e6) {
  return { $event_type: e6, $ce_version: 1 };
}, _extractCustomPropertyValue: function(e6) {
  var t2 = [];
  return C(document.querySelectorAll(e6.css_selector), function(e7) {
    var n2;
    ["input", "select"].indexOf(e7.tagName.toLowerCase()) > -1 ? n2 = e7.value : e7.textContent && (n2 = e7.textContent), ge(n2) && t2.push(n2);
  }), t2.join(", ");
}, _getCustomProperties: function(e6) {
  var t2 = this, n2 = {};
  return C(this._customProperties, function(r2) {
    C(r2.event_selectors, function(i2) {
      C(document.querySelectorAll(i2), function(i3) {
        H(e6, i3) && he(i3) && (n2[r2.name] = t2._extractCustomPropertyValue(r2));
      });
    });
  }), n2;
}, _getEventTarget: function(e6) {
  return void 0 === e6.target ? e6.srcElement || null : null !== (t2 = e6.target) && void 0 !== t2 && t2.shadowRoot ? e6.composedPath()[0] || null : e6.target || null;
  var t2;
}, _captureEvent: function(e6, t2) {
  var n2, r2 = this, i2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "$autocapture", o2 = this._getEventTarget(e6);
  (le(o2) && (o2 = o2.parentNode || null), "$autocapture" === i2 && "click" === e6.type && e6 instanceof MouseEvent) && (null !== (n2 = this.rageclicks) && void 0 !== n2 && n2.isRageClick(e6.clientX, e6.clientY, new Date().getTime()) && this._captureEvent(e6, t2, "$rageclick"));
  if (o2 && function(e7, t3) {
    var n3 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0;
    if (!e7 || ce(e7, "html") || !ue(e7))
      return false;
    if (null != n3 && n3.url_allowlist) {
      var r3 = window.location.href, i3 = n3.url_allowlist;
      if (i3 && !i3.some(function(e8) {
        return r3.match(e8);
      }))
        return false;
    }
    if (null != n3 && n3.dom_event_allowlist) {
      var o3 = n3.dom_event_allowlist;
      if (o3 && !o3.some(function(e8) {
        return t3.type === e8;
      }))
        return false;
    }
    if (null != n3 && n3.element_allowlist) {
      var s3 = n3.element_allowlist;
      if (s3 && !s3.some(function(t4) {
        return e7.tagName.toLowerCase() === t4;
      }))
        return false;
    }
    if (null != n3 && n3.css_selector_allowlist) {
      var a3 = n3.css_selector_allowlist;
      if (a3 && !a3.some(function(t4) {
        return e7.matches(t4);
      }))
        return false;
    }
    for (var u3 = false, c3 = [e7], l3 = true, d3 = e7; d3.parentNode && !ce(d3, "body"); )
      if (de(d3.parentNode))
        c3.push(d3.parentNode.host), d3 = d3.parentNode.host;
      else {
        if (!(l3 = d3.parentNode || false))
          break;
        if (fe.indexOf(l3.tagName.toLowerCase()) > -1)
          u3 = true;
        else {
          var f3 = window.getComputedStyle(l3);
          f3 && "pointer" === f3.getPropertyValue("cursor") && (u3 = true);
        }
        c3.push(l3), d3 = l3;
      }
    var h3 = window.getComputedStyle(e7);
    if (h3 && "pointer" === h3.getPropertyValue("cursor") && "click" === t3.type)
      return true;
    var p3 = e7.tagName.toLowerCase();
    switch (p3) {
      case "html":
        return false;
      case "form":
        return "submit" === t3.type;
      case "input":
      case "select":
      case "textarea":
        return "change" === t3.type || "click" === t3.type;
      default:
        return u3 ? "click" === t3.type : "click" === t3.type && (fe.indexOf(p3) > -1 || "true" === e7.getAttribute("contenteditable"));
    }
  }(o2, e6, this.config)) {
    for (var s2, a2, u2 = [o2], c2 = o2; c2.parentNode && !ce(c2, "body"); )
      de(c2.parentNode) ? (u2.push(c2.parentNode.host), c2 = c2.parentNode.host) : (u2.push(c2.parentNode), c2 = c2.parentNode);
    var l2, d2 = [], f2 = {}, h2 = false;
    if (C(u2, function(e7) {
      var n3 = he(e7);
      "a" === e7.tagName.toLowerCase() && (l2 = e7.getAttribute("href"), l2 = n3 && ge(l2) && l2), H(se(e7).split(" "), "ph-no-capture") && (h2 = true), d2.push(r2._getPropertiesFromElement(e7, t2.config.mask_all_element_attributes, t2.config.mask_all_text));
      var i3 = r2._getAugmentPropertiesFromElement(e7);
      D(f2, i3);
    }), t2.config.mask_all_text || ("a" === o2.tagName.toLowerCase() || "button" === o2.tagName.toLowerCase() ? d2[0].$el_text = _e(o2) : d2[0].$el_text = ae(o2)), l2 && (d2[0].attr__href = l2), h2)
      return false;
    var p2 = D(this._getDefaultProperties(e6.type), { $elements: d2 }, null !== (s2 = d2[0]) && void 0 !== s2 && s2.$el_text ? { $el_text: null === (a2 = d2[0]) || void 0 === a2 ? void 0 : a2.$el_text } : {}, this._getCustomProperties(u2), f2);
    return t2.capture(i2, p2), true;
  }
}, _navigate: function(e6) {
  window.location.href = e6;
}, _addDomEventHandlers: function(e6) {
  var t2 = this, n2 = function(n3) {
    n3 = n3 || window.event, t2._captureEvent(n3, e6);
  };
  re(document, "submit", n2, false, true), re(document, "change", n2, false, true), re(document, "click", n2, false, true);
}, _customProperties: [], rageclicks: null, config: void 0, init: function(e6) {
  var t2;
  "boolean" != typeof e6.__autocapture && (this.config = e6.__autocapture), null !== (t2 = this.config) && void 0 !== t2 && t2.url_allowlist && (this.config.url_allowlist = this.config.url_allowlist.map(function(e7) {
    return new RegExp(e7);
  })), this.rageclicks = new me(e6.config.rageclick);
}, afterDecideResponse: function(e6, t2) {
  var n2 = t2.config.token;
  this._initializedTokens.indexOf(n2) > -1 ? T.log('autocapture already initialized for token "' + n2 + '"') : (t2.persistence && t2.persistence.register(s({}, ke, !!e6.autocapture_opt_out)), this._isDisabledServerSide = !!e6.autocapture_opt_out, this._setIsAutocaptureEnabled(t2), this._initializedTokens.push(n2), e6 && e6.config && e6.config.enable_collect_everything && this._isAutocaptureEnabled ? (e6.custom_properties && (this._customProperties = e6.custom_properties), this._addDomEventHandlers(t2)) : t2.__autocapture = false);
}, enabledForProject: function(e6, t2, n2) {
  if (!e6)
    return true;
  t2 = q(t2) ? 10 : t2, n2 = q(n2) ? 10 : n2;
  for (var r2 = 0, i2 = 0; i2 < e6.length; i2++)
    r2 += e6.charCodeAt(i2);
  return r2 % t2 < n2;
}, isBrowserSupported: function() {
  return N(document.querySelectorAll);
} };
!function(e6) {
  for (var t2 in e6)
    "function" == typeof e6[t2] && (e6[t2] = e6[t2].bind(e6));
}(je), function(e6) {
  for (var t2 in e6)
    "function" == typeof e6[t2] && (e6[t2] = W(e6[t2]));
}(je);
var Ne = "$active_feature_flags";
var He = "$override_feature_flags";
var Le = "$feature_flag_payloads";
var Be = function(e6) {
  var t2, n2 = {}, r2 = v(function(e7) {
    for (var t3 = Object.keys(e7), n3 = t3.length, r3 = new Array(n3); n3--; )
      r3[n3] = [t3[n3], e7[t3[n3]]];
    return r3;
  }(e6 || {}));
  try {
    for (r2.s(); !(t2 = r2.n()).done; ) {
      var i2 = h(t2.value, 2), o2 = i2[0], s2 = i2[1];
      s2 && (n2[o2] = s2);
    }
  } catch (e7) {
    r2.e(e7);
  } finally {
    r2.f();
  }
  return n2;
};
var qe = function() {
  function e6(t2) {
    r(this, e6), this.instance = t2, this._override_warning = false, this.featureFlagEventHandlers = [], this.reloadFeatureFlagsQueued = false, this.reloadFeatureFlagsInAction = false;
  }
  return o(e6, [{ key: "getFlags", value: function() {
    return Object.keys(this.getFlagVariants());
  } }, { key: "getFlagVariants", value: function() {
    var e7 = this.instance.get_property(Fe), t2 = this.instance.get_property(He);
    if (!t2)
      return e7 || {};
    for (var n2 = D({}, e7), r2 = Object.keys(t2), i2 = 0; i2 < r2.length; i2++)
      false === t2[r2[i2]] ? delete n2[r2[i2]] : n2[r2[i2]] = t2[r2[i2]];
    return this._override_warning || (console.warn("[PostHog] Overriding feature flags!", { enabledFlags: e7, overriddenFlags: t2, finalFlags: n2 }), this._override_warning = true), n2;
  } }, { key: "getFlagPayloads", value: function() {
    return this.instance.get_property(Le) || {};
  } }, { key: "reloadFeatureFlags", value: function() {
    this.reloadFeatureFlagsQueued || (this.reloadFeatureFlagsQueued = true, this._startReloadTimer());
  } }, { key: "setAnonymousDistinctId", value: function(e7) {
    this.$anon_distinct_id = e7;
  } }, { key: "setReloadingPaused", value: function(e7) {
    this.reloadFeatureFlagsInAction = e7;
  } }, { key: "resetRequestQueue", value: function() {
    this.reloadFeatureFlagsQueued = false;
  } }, { key: "_startReloadTimer", value: function() {
    var e7 = this;
    this.reloadFeatureFlagsQueued && !this.reloadFeatureFlagsInAction && setTimeout(function() {
      !e7.reloadFeatureFlagsInAction && e7.reloadFeatureFlagsQueued && (e7.reloadFeatureFlagsQueued = false, e7._reloadFeatureFlagsRequest());
    }, 5);
  } }, { key: "_reloadFeatureFlagsRequest", value: function() {
    var e7 = this;
    this.setReloadingPaused(true);
    var t2 = this.instance.config.token, n2 = this.instance.get_property(Oe), r2 = this.instance.get_property($e), i2 = X(JSON.stringify({ token: t2, distinct_id: this.instance.get_distinct_id(), groups: this.instance.getGroups(), $anon_distinct_id: this.$anon_distinct_id, person_properties: n2, group_properties: r2, disable_flags: this.instance.config.advanced_disable_feature_flags || void 0 }));
    this.instance._send_request(this.instance.config.api_host + "/decide/?v=3", { data: i2 }, { method: "POST" }, this.instance._prepare_callback(function(t3) {
      e7.$anon_distinct_id = void 0, e7.receivedFeatureFlags(t3), e7.setReloadingPaused(false), e7._startReloadTimer();
    }));
  } }, { key: "getFeatureFlag", value: function(e7) {
    var t2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
    if (this.instance.decideEndpointWasHit || this.getFlags() && this.getFlags().length > 0) {
      var n2, r2 = this.getFlagVariants()[e7], i2 = "".concat(r2), o2 = this.instance.get_property(Te) || {};
      if (t2.send_event || !("send_event" in t2)) {
        if (!(e7 in o2) || !o2[e7].includes(i2))
          Array.isArray(o2[e7]) ? o2[e7].push(i2) : o2[e7] = [i2], null === (n2 = this.instance.persistence) || void 0 === n2 || n2.register(s({}, Te, o2)), this.instance.capture("$feature_flag_called", { $feature_flag: e7, $feature_flag_response: r2 });
      }
      return r2;
    }
    console.warn('getFeatureFlag for key "' + e7 + `" failed. Feature flags didn't load in time.`);
  } }, { key: "getFeatureFlagPayload", value: function(e7) {
    return this.getFlagPayloads()[e7];
  } }, { key: "isFeatureEnabled", value: function(e7) {
    var t2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
    if (this.instance.decideEndpointWasHit || this.getFlags() && this.getFlags().length > 0)
      return !!this.getFeatureFlag(e7, t2);
    console.warn('isFeatureEnabled for key "' + e7 + `" failed. Feature flags didn't load in time.`);
  } }, { key: "addFeatureFlagsHandler", value: function(e7) {
    this.featureFlagEventHandlers.push(e7);
  } }, { key: "removeFeatureFlagsHandler", value: function(e7) {
    this.featureFlagEventHandlers = this.featureFlagEventHandlers.filter(function(t2) {
      return t2 !== e7;
    });
  } }, { key: "receivedFeatureFlags", value: function(e7) {
    if (this.instance.persistence) {
      this.instance.decideEndpointWasHit = true;
      var n2 = this.getFlagVariants(), r2 = this.getFlagPayloads();
      !function(e8, n3) {
        var r3 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, i2 = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}, o2 = e8.featureFlags, a2 = e8.featureFlagPayloads;
        if (o2)
          if (Array.isArray(o2)) {
            var u2, c2 = {};
            if (o2)
              for (var l2 = 0; l2 < o2.length; l2++)
                c2[o2[l2]] = true;
            n3 && n3.register((s(u2 = {}, Ne, o2), s(u2, Fe, c2), u2));
          } else {
            var d2, f2 = o2, h2 = a2;
            e8.errorsWhileComputingFlags && (f2 = t(t({}, r3), f2), h2 = t(t({}, i2), h2)), n3 && n3.register((s(d2 = {}, Ne, Object.keys(Be(f2))), s(d2, Fe, f2 || {}), s(d2, Le, h2 || {}), d2));
          }
      }(e7, this.instance.persistence, n2, r2), this._fireFeatureFlagsCallbacks();
    }
  } }, { key: "override", value: function(e7) {
    if (!this.instance.__loaded || !this.instance.persistence)
      return T.unintializedWarning("posthog.feature_flags.override");
    if (this._override_warning = false, false === e7)
      this.instance.persistence.unregister(He);
    else if (Array.isArray(e7)) {
      for (var t2 = {}, n2 = 0; n2 < e7.length; n2++)
        t2[e7[n2]] = true;
      this.instance.persistence.register(s({}, He, t2));
    } else
      this.instance.persistence.register(s({}, He, e7));
  } }, { key: "onFeatureFlags", value: function(e7) {
    var t2 = this;
    if (this.addFeatureFlagsHandler(e7), this.instance.decideEndpointWasHit) {
      var n2 = this._prepareFeatureFlagsForCallbacks(), r2 = n2.flags, i2 = n2.flagVariants;
      e7(r2, i2);
    }
    return function() {
      return t2.removeFeatureFlagsHandler(e7);
    };
  } }, { key: "updateEarlyAccessFeatureEnrollment", value: function(e7, n2) {
    var r2, i2, o2 = s({}, "$feature_enrollment/".concat(e7), n2);
    this.instance.capture("$feature_enrollment_update", { $feature_flag: e7, $feature_enrollment: n2, $set: o2 }), this.setPersonPropertiesForFlags(o2, false);
    var a2 = t(t({}, this.getFlagVariants()), {}, s({}, e7, n2));
    null === (r2 = this.instance.persistence) || void 0 === r2 || r2.register((s(i2 = {}, Ne, Object.keys(Be(a2))), s(i2, Fe, a2), i2)), this._fireFeatureFlagsCallbacks();
  } }, { key: "getEarlyAccessFeatures", value: function(e7) {
    var t2 = this, n2 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], r2 = this.instance.get_property(Ie);
    if (r2 && !n2)
      return e7(r2);
    this.instance._send_request("".concat(this.instance.config.api_host, "/api/early_access_features/?token=").concat(this.instance.config.token), {}, { method: "GET" }, function(n3) {
      var r3, i2 = n3.earlyAccessFeatures;
      return null === (r3 = t2.instance.persistence) || void 0 === r3 || r3.register(s({}, Ie, i2)), e7(i2);
    });
  } }, { key: "_prepareFeatureFlagsForCallbacks", value: function() {
    var e7 = this.getFlags(), t2 = this.getFlagVariants();
    return { flags: e7.filter(function(e8) {
      return t2[e8];
    }), flagVariants: Object.keys(t2).filter(function(e8) {
      return t2[e8];
    }).reduce(function(e8, n2) {
      return e8[n2] = t2[n2], e8;
    }, {}) };
  } }, { key: "_fireFeatureFlagsCallbacks", value: function() {
    var e7 = this._prepareFeatureFlagsForCallbacks(), t2 = e7.flags, n2 = e7.flagVariants;
    this.featureFlagEventHandlers.forEach(function(e8) {
      return e8(t2, n2);
    });
  } }, { key: "setPersonPropertiesForFlags", value: function(e7) {
    var n2 = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], r2 = this.instance.get_property(Oe) || {};
    this.instance.register(s({}, Oe, t(t({}, r2), e7))), n2 && this.instance.reloadFeatureFlags();
  } }, { key: "resetPersonPropertiesForFlags", value: function() {
    this.instance.unregister(Oe);
  } }, { key: "setGroupPropertiesForFlags", value: function(e7) {
    var n2 = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], r2 = this.instance.get_property($e) || {};
    0 !== Object.keys(r2).length && Object.keys(r2).forEach(function(n3) {
      r2[n3] = t(t({}, r2[n3]), e7[n3]), delete e7[n3];
    }), this.instance.register(s({}, $e, t(t({}, r2), e7))), n2 && this.instance.reloadFeatureFlags();
  } }, { key: "resetGroupPropertiesForFlags", value: function(e7) {
    if (e7) {
      var n2 = this.instance.get_property($e) || {};
      this.instance.register(s({}, $e, t(t({}, n2), {}, s({}, e7, {}))));
    } else
      this.instance.unregister($e);
  } }]), e6;
}();
var Ue = /[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i;
var Ve = { is_supported: function() {
  return true;
}, error: function(e6) {
  T.error("cookieStore error: " + e6);
}, get: function(e6) {
  try {
    for (var t2 = e6 + "=", n2 = document.cookie.split(";").filter(function(e7) {
      return e7.length;
    }), r2 = 0; r2 < n2.length; r2++) {
      for (var i2 = n2[r2]; " " == i2.charAt(0); )
        i2 = i2.substring(1, i2.length);
      if (0 === i2.indexOf(t2))
        return decodeURIComponent(i2.substring(t2.length, i2.length));
    }
  } catch (e7) {
  }
  return null;
}, parse: function(e6) {
  var t2;
  try {
    t2 = JSON.parse(Ve.get(e6)) || {};
  } catch (e7) {
  }
  return t2;
}, set: function(e6, t2, n2, r2, i2) {
  try {
    var o2 = "", s2 = "", a2 = "";
    if (r2) {
      var u2 = document.location.hostname.match(Ue), c2 = u2 ? u2[0] : "";
      o2 = c2 ? "; domain=." + c2 : "";
    }
    if (n2) {
      var l2 = new Date();
      l2.setTime(l2.getTime() + 24 * n2 * 60 * 60 * 1e3), s2 = "; expires=" + l2.toUTCString();
    }
    i2 && (a2 = "; secure");
    var d2 = e6 + "=" + encodeURIComponent(JSON.stringify(t2)) + s2 + "; SameSite=Lax; path=/" + o2 + a2;
    return document.cookie = d2, d2;
  } catch (e7) {
    return;
  }
}, remove: function(e6, t2) {
  try {
    Ve.set(e6, "", -1, t2);
  } catch (e7) {
    return;
  }
} };
var Ge = null;
var ze = { is_supported: function() {
  if (null !== Ge)
    return Ge;
  var e6 = true;
  if ("undefined" != typeof window)
    try {
      var t2 = "__mplssupport__";
      ze.set(t2, "xyz"), '"xyz"' !== ze.get(t2) && (e6 = false), ze.remove(t2);
    } catch (t3) {
      e6 = false;
    }
  else
    e6 = false;
  return e6 || T.error("localStorage unsupported; falling back to cookie store"), Ge = e6, e6;
}, error: function(e6) {
  T.error("localStorage error: " + e6);
}, get: function(e6) {
  try {
    return window.localStorage.getItem(e6);
  } catch (e7) {
    ze.error(e7);
  }
  return null;
}, parse: function(e6) {
  try {
    return JSON.parse(ze.get(e6)) || {};
  } catch (e7) {
  }
  return null;
}, set: function(e6, t2) {
  try {
    window.localStorage.setItem(e6, JSON.stringify(t2));
  } catch (e7) {
    ze.error(e7);
  }
}, remove: function(e6) {
  try {
    window.localStorage.removeItem(e6);
  } catch (e7) {
    ze.error(e7);
  }
} };
var We = ["distinct_id", Pe];
var Ye = t(t({}, ze), {}, { parse: function(e6) {
  try {
    var t2 = {};
    try {
      t2 = Ve.parse(e6) || {};
    } catch (e7) {
    }
    var n2 = D(t2, JSON.parse(ze.get(e6) || "{}"));
    return ze.set(e6, n2), n2;
  } catch (e7) {
  }
  return null;
}, set: function(e6, t2, n2, r2, i2) {
  try {
    ze.set(e6, t2);
    var o2 = {};
    We.forEach(function(e7) {
      t2[e7] && (o2[e7] = t2[e7]);
    }), Object.keys(o2).length && Ve.set(e6, o2, n2, r2, i2);
  } catch (e7) {
    ze.error(e7);
  }
}, remove: function(e6, t2) {
  try {
    window.localStorage.removeItem(e6), Ve.remove(e6, t2);
  } catch (e7) {
    ze.error(e7);
  }
} });
var Qe = {};
var Je = { is_supported: function() {
  return true;
}, error: function(e6) {
  T.error("memoryStorage error: " + e6);
}, get: function(e6) {
  return Qe[e6] || null;
}, parse: function(e6) {
  return Qe[e6] || null;
}, set: function(e6, t2) {
  Qe[e6] = t2;
}, remove: function(e6) {
  delete Qe[e6];
} };
var Xe = null;
var Ke = { is_supported: function() {
  if (null !== Xe)
    return Xe;
  if (Xe = true, "undefined" != typeof window)
    try {
      var e6 = "__support__";
      Ke.set(e6, "xyz"), '"xyz"' !== Ke.get(e6) && (Xe = false), Ke.remove(e6);
    } catch (e7) {
      Xe = false;
    }
  else
    Xe = false;
  return Xe;
}, error: function(e6) {
  m.DEBUG && T.error("sessionStorage error: ", e6);
}, get: function(e6) {
  try {
    return window.sessionStorage.getItem(e6);
  } catch (e7) {
    Ke.error(e7);
  }
  return null;
}, parse: function(e6) {
  try {
    return JSON.parse(Ke.get(e6)) || null;
  } catch (e7) {
  }
  return null;
}, set: function(e6, t2) {
  try {
    window.sessionStorage.setItem(e6, JSON.stringify(t2));
  } catch (e7) {
    Ke.error(e7);
  }
}, remove: function(e6) {
  try {
    window.sessionStorage.removeItem(e6);
  } catch (e7) {
    Ke.error(e7);
  }
} };
var Ze = ["cookie", "localstorage", "localstorage+cookie", "sessionstorage", "memory"];
var et = function() {
  function e6(t2) {
    r(this, e6);
    var n2 = "";
    t2.token && (n2 = t2.token.replace(/\+/g, "PL").replace(/\//g, "SL").replace(/=/g, "EQ")), this.props = {}, this.campaign_params_saved = false, this.custom_campaign_params = t2.custom_campaign_params || [], t2.persistence_name ? this.name = "ph_" + t2.persistence_name : this.name = "ph_" + n2 + "_posthog", -1 === Ze.indexOf(t2.persistence.toLowerCase()) && (T.critical("Unknown persistence type " + t2.persistence + "; falling back to cookie"), t2.persistence = "cookie");
    var i2 = t2.persistence.toLowerCase();
    "localstorage" === i2 && ze.is_supported() ? this.storage = ze : "localstorage+cookie" === i2 && Ye.is_supported() ? this.storage = Ye : "sessionstorage" === i2 && Ke.is_supported() ? this.storage = Ke : this.storage = "memory" === i2 ? Je : Ve, this.user_state = "anonymous", this.load(), this.update_config(t2), this.save();
  }
  return o(e6, [{ key: "properties", value: function() {
    var e7 = {};
    return C(this.props, function(t2, r2) {
      if (r2 === Fe && "object" === n(t2))
        for (var i2 = Object.keys(t2), o2 = 0; o2 < i2.length; o2++)
          e7["$feature/".concat(i2[o2])] = t2[i2[o2]];
      else
        a2 = r2, u2 = false, (null === (s2 = Ce) ? u2 : O && s2.indexOf === O ? -1 != s2.indexOf(a2) : (C(s2, function(e8) {
          if (u2 || (u2 = e8 === a2))
            return R;
        }), u2)) || (e7[r2] = t2);
      var s2, a2, u2;
    }), e7;
  } }, { key: "load", value: function() {
    if (!this.disabled) {
      var e7 = this.storage.parse(this.name);
      e7 && (this.props = D({}, e7));
    }
  } }, { key: "save", value: function() {
    this.disabled || this.storage.set(this.name, this.props, this.expire_days, this.cross_subdomain, this.secure);
  } }, { key: "remove", value: function() {
    this.storage.remove(this.name, false), this.storage.remove(this.name, true);
  } }, { key: "clear", value: function() {
    this.remove(), this.props = {};
  } }, { key: "register_once", value: function(e7, t2, n2) {
    var r2 = this;
    if (L(e7)) {
      void 0 === t2 && (t2 = "None"), this.expire_days = void 0 === n2 ? this.default_expiry : n2;
      var i2 = false;
      if (C(e7, function(e8, n3) {
        r2.props.hasOwnProperty(n3) && r2.props[n3] !== t2 || (r2.props[n3] = e8, i2 = true);
      }), i2)
        return this.save(), true;
    }
    return false;
  } }, { key: "register", value: function(e7, t2) {
    var n2 = this;
    if (L(e7)) {
      this.expire_days = void 0 === t2 ? this.default_expiry : t2;
      var r2 = false;
      if (C(e7, function(t3, i2) {
        e7.hasOwnProperty(i2) && n2.props[i2] !== t3 && (n2.props[i2] = t3, r2 = true);
      }), r2)
        return this.save(), true;
    }
    return false;
  } }, { key: "unregister", value: function(e7) {
    e7 in this.props && (delete this.props[e7], this.save());
  } }, { key: "update_campaign_params", value: function() {
    this.campaign_params_saved || (this.register(oe.campaignParams(this.custom_campaign_params)), this.campaign_params_saved = true);
  } }, { key: "update_search_keyword", value: function() {
    this.register(oe.searchInfo());
  } }, { key: "update_referrer_info", value: function() {
    this.register({ $referrer: this.props.$referrer || oe.referrer(), $referring_domain: this.props.$referring_domain || oe.referringDomain() });
  } }, { key: "get_referrer_info", value: function() {
    return Y({ $referrer: this.props.$referrer, $referring_domain: this.props.$referring_domain });
  } }, { key: "safe_merge", value: function(e7) {
    return C(this.props, function(t2, n2) {
      n2 in e7 || (e7[n2] = t2);
    }), e7;
  } }, { key: "update_config", value: function(e7) {
    this.default_expiry = this.expire_days = e7.cookie_expiration, this.set_disabled(e7.disable_persistence), this.set_cross_subdomain(e7.cross_subdomain_cookie), this.set_secure(e7.secure_cookie);
  } }, { key: "set_disabled", value: function(e7) {
    this.disabled = e7, this.disabled ? this.remove() : this.save();
  } }, { key: "set_cross_subdomain", value: function(e7) {
    e7 !== this.cross_subdomain && (this.cross_subdomain = e7, this.remove(), this.save());
  } }, { key: "get_cross_subdomain", value: function() {
    return !!this.cross_subdomain;
  } }, { key: "set_secure", value: function(e7) {
    e7 !== this.secure && (this.secure = e7, this.remove(), this.save());
  } }, { key: "set_event_timer", value: function(e7, t2) {
    var n2 = this.props[we] || {};
    n2[e7] = t2, this.props[we] = n2, this.save();
  } }, { key: "remove_event_timer", value: function(e7) {
    var t2 = (this.props[we] || {})[e7];
    return q(t2) || (delete this.props[we][e7], this.save()), t2;
  } }, { key: "get_user_state", value: function() {
    return this.props[Me] || "anonymous";
  } }, { key: "set_user_state", value: function(e7) {
    this.props[Me] = e7, this.save();
  } }, { key: "get_quota_limits", value: function() {
    return this.props[Ae] || {};
  } }, { key: "set_quota_limits", value: function(e7) {
    this.props[Ae] = e7, this.save();
  } }]), e6;
}();
var tt = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNOCAwSDE2TDAgMTZWOEw4IDBaIiBmaWxsPSIjMkQyRDJEIi8+CjxwYXRoIGQ9Ik0xNiA4VjE2SDhMMTYgOFoiIGZpbGw9IiMyRDJEMkQiLz4KPC9zdmc+Cg==";
var nt = 2;
var rt = 4;
var it = 3;
var ot = 6;
var st = 0;
var at = 5e6;
var ut = "rrweb/console@1";
var ct;
var lt = o(function e2(t2) {
  var n2, i2, o2 = this, a2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
  r(this, e2), s(this, "bucketSize", 100), s(this, "refillRate", 10), s(this, "mutationBuckets", {}), s(this, "loggedTracker", {}), s(this, "refillBuckets", function() {
    Object.keys(o2.mutationBuckets).forEach(function(e6) {
      o2.mutationBuckets[e6] = o2.mutationBuckets[e6] + o2.refillRate, o2.mutationBuckets[e6] >= o2.bucketSize && delete o2.mutationBuckets[e6];
    });
  }), s(this, "getNodeOrRelevantParent", function(e6) {
    var t3 = o2.rrweb.mirror.getNode(e6);
    if ("svg" !== (null == t3 ? void 0 : t3.nodeName) && t3 instanceof Element) {
      var n3 = t3.closest("svg");
      if (n3)
        return [o2.rrweb.mirror.getId(n3), n3];
    }
    return [e6, t3];
  }), s(this, "numberOfChanges", function(e6) {
    var t3, n3, r2, i3, o3, s2, a3, u2;
    return (null !== (t3 = null === (n3 = e6.removes) || void 0 === n3 ? void 0 : n3.length) && void 0 !== t3 ? t3 : 0) + (null !== (r2 = null === (i3 = e6.attributes) || void 0 === i3 ? void 0 : i3.length) && void 0 !== r2 ? r2 : 0) + (null !== (o3 = null === (s2 = e6.texts) || void 0 === s2 ? void 0 : s2.length) && void 0 !== o3 ? o3 : 0) + (null !== (a3 = null === (u2 = e6.adds) || void 0 === u2 ? void 0 : u2.length) && void 0 !== a3 ? a3 : 0);
  }), s(this, "throttleMutations", function(e6) {
    if (e6.type !== it || e6.data.source !== st)
      return e6;
    var t3 = e6.data, n3 = o2.numberOfChanges(t3);
    t3.attributes && (t3.attributes = t3.attributes.filter(function(e7) {
      var t4, n4, r3, i3 = h(o2.getNodeOrRelevantParent(e7.id), 2), s2 = i3[0], a3 = i3[1];
      if (0 === o2.mutationBuckets[s2])
        return false;
      (o2.mutationBuckets[s2] = null !== (t4 = o2.mutationBuckets[s2]) && void 0 !== t4 ? t4 : o2.bucketSize, o2.mutationBuckets[s2] = Math.max(o2.mutationBuckets[s2] - 1, 0), 0 === o2.mutationBuckets[s2]) && (o2.loggedTracker[s2] || (o2.loggedTracker[s2] = true, null === (n4 = (r3 = o2.options).onBlockedNode) || void 0 === n4 || n4.call(r3, s2, a3)));
      return e7;
    }));
    var r2 = o2.numberOfChanges(t3);
    return 0 !== r2 || n3 === r2 ? e6 : void 0;
  }), this.rrweb = t2, this.options = a2, this.refillRate = null !== (n2 = this.options.refillRate) && void 0 !== n2 ? n2 : this.refillRate, this.bucketSize = null !== (i2 = this.options.bucketSize) && void 0 !== i2 ? i2 : this.bucketSize, setInterval(function() {
    o2.refillBuckets();
  }, 1e3);
});
var dt = function(e6) {
  return e6[e6.DomContentLoaded = 0] = "DomContentLoaded", e6[e6.Load = 1] = "Load", e6[e6.FullSnapshot = 2] = "FullSnapshot", e6[e6.IncrementalSnapshot = 3] = "IncrementalSnapshot", e6[e6.Meta = 4] = "Meta", e6[e6.Custom = 5] = "Custom", e6[e6.Plugin = 6] = "Plugin", e6;
}(dt || {});
var ft = "/s/";
!function(e6) {
  e6[e6.Mutation = 0] = "Mutation", e6[e6.MouseMove = 1] = "MouseMove", e6[e6.MouseInteraction = 2] = "MouseInteraction", e6[e6.Scroll = 3] = "Scroll", e6[e6.ViewportResize = 4] = "ViewportResize", e6[e6.Input = 5] = "Input", e6[e6.TouchMove = 6] = "TouchMove", e6[e6.MediaInteraction = 7] = "MediaInteraction", e6[e6.StyleSheetRule = 8] = "StyleSheetRule", e6[e6.CanvasMutation = 9] = "CanvasMutation", e6[e6.Font = 10] = "Font", e6[e6.Log = 11] = "Log", e6[e6.Drag = 12] = "Drag", e6[e6.StyleDeclaration = 13] = "StyleDeclaration", e6[e6.Selection = 14] = "Selection", e6[e6.AdoptedStyleSheet = 15] = "AdoptedStyleSheet";
}(ct || (ct = {}));
var ht = [ct.MouseMove, ct.MouseInteraction, ct.Scroll, ct.ViewportResize, ct.Input, ct.TouchMove, ct.MediaInteraction, ct.Drag];
var pt = function() {
  function e6(t2) {
    var n2 = this;
    r(this, e6), s(this, "lastActivityTimestamp", Date.now()), s(this, "isIdle", false), this.instance = t2, this.captureStarted = false, this.snapshots = [], this.emit = false, this.endpoint = ft, this.stopRrweb = void 0, this.windowId = null, this.sessionId = null, this.receivedDecide = false, window.addEventListener("beforeunload", function() {
      n2._flushBuffer();
    });
  }
  return o(e6, [{ key: "getSessionManager", value: function() {
    if (this.instance.sessionManager)
      return this.instance.sessionManager;
    T.error("Session recording started without valid sessionManager");
  } }, { key: "startRecordingIfEnabled", value: function() {
    this.isRecordingEnabled() ? this.startCaptureAndTrySendingQueuedSnapshots() : this.stopRecording();
  } }, { key: "started", value: function() {
    return this.captureStarted;
  } }, { key: "stopRecording", value: function() {
    this.captureStarted && this.stopRrweb && (this.stopRrweb(), this.stopRrweb = void 0, this.captureStarted = false);
  } }, { key: "isRecordingEnabled", value: function() {
    var e7 = !!this.instance.get_property(Se), t2 = !this.instance.config.disable_session_recording;
    return e7 && t2;
  } }, { key: "isConsoleLogCaptureEnabled", value: function() {
    var e7 = !!this.instance.get_property(Ee), t2 = this.instance.config.enable_recording_console_log;
    return null != t2 ? t2 : e7;
  } }, { key: "getRecordingVersion", value: function() {
    var e7, t2 = this.instance.get_property(xe);
    return (null === (e7 = this.instance.config.session_recording) || void 0 === e7 ? void 0 : e7.recorderVersion) || t2 || "v1";
  } }, { key: "afterDecideResponse", value: function(e7) {
    var t2, n2, r2, i2, o2, a2;
    (this.receivedDecide = true, this.instance.persistence) && this.instance.persistence.register((s(o2 = {}, Se, !!e7.sessionRecording), s(o2, Ee, null === (r2 = e7.sessionRecording) || void 0 === r2 ? void 0 : r2.consoleLogRecordingEnabled), s(o2, xe, null === (i2 = e7.sessionRecording) || void 0 === i2 ? void 0 : i2.recorderVersion), o2));
    null !== (t2 = e7.sessionRecording) && void 0 !== t2 && t2.endpoint && (this.endpoint = null === (a2 = e7.sessionRecording) || void 0 === a2 ? void 0 : a2.endpoint);
    null !== (n2 = e7.sessionRecording) && void 0 !== n2 && n2.recorderVersion && (this.recorderVersion = e7.sessionRecording.recorderVersion), this.startRecordingIfEnabled();
  } }, { key: "log", value: function(e7) {
    var t2, n2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "log";
    null === (t2 = this.instance.sessionRecording) || void 0 === t2 || t2.onRRwebEmit({ type: 6, data: { plugin: "rrweb/console@1", payload: { level: n2, trace: [], payload: [JSON.stringify(e7)] } }, timestamp: z() });
  } }, { key: "startCaptureAndTrySendingQueuedSnapshots", value: function() {
    var e7 = this;
    this.receivedDecide && (this.emit = true, this.snapshots.forEach(function(t2) {
      return e7._captureSnapshotBuffered(t2);
    })), this._startCapture();
  } }, { key: "_startCapture", value: function() {
    var e7 = this, t2 = this.getSessionManager();
    if (t2 && void 0 !== Object.assign && !this.captureStarted && !this.instance.config.disable_session_recording) {
      this.captureStarted = true, t2.checkAndGetSessionAndWindowId();
      var n2 = "v2" === this.getRecordingVersion() ? "recorder-v2.js" : "recorder.js";
      this.instance.__loaded_recorder_version !== this.getRecordingVersion() ? ie(this.instance.config.api_host + "/static/".concat(n2, "?v=").concat(m.LIB_VERSION), function(t3) {
        if (t3)
          return T.error("Could not load ".concat(n2), t3);
        e7._onScriptLoaded();
      }) : this._onScriptLoaded();
    }
  } }, { key: "_isInteractiveEvent", value: function(e7) {
    var t2;
    return e7.type === it && -1 !== ht.indexOf(null === (t2 = e7.data) || void 0 === t2 ? void 0 : t2.source);
  } }, { key: "_updateWindowAndSessionIds", value: function(e7) {
    var t2 = this.getSessionManager();
    if (t2) {
      var n2 = this._isInteractiveEvent(e7);
      if (n2 || this.isIdle || e7.timestamp - this.lastActivityTimestamp > 3e5 && (this.isIdle = true), n2 && (this.lastActivityTimestamp = e7.timestamp, this.isIdle && (this.isIdle = false, this._tryTakeFullSnapshot())), !this.isIdle) {
        var r2 = t2.checkAndGetSessionAndWindowId(!n2, e7.timestamp), i2 = r2.windowId, o2 = r2.sessionId;
        -1 !== [nt, rt].indexOf(e7.type) || this.windowId === i2 && this.sessionId === o2 || this._tryTakeFullSnapshot(), this.windowId = i2, this.sessionId = o2;
      }
    }
  } }, { key: "_tryTakeFullSnapshot", value: function() {
    if (!this.captureStarted)
      return false;
    try {
      var e7;
      return null === (e7 = this.rrwebRecord) || void 0 === e7 || e7.takeFullSnapshot(), true;
    } catch (e8) {
      return T.error("Error taking full snapshot.", e8), false;
    }
  } }, { key: "_onScriptLoaded", value: function() {
    var e7, n2 = this, r2 = { blockClass: "ph-no-capture", blockSelector: void 0, ignoreClass: "ph-ignore-input", maskTextClass: "ph-mask", maskTextSelector: void 0, maskTextFn: void 0, maskAllInputs: true, maskInputOptions: {}, maskInputFn: void 0, slimDOMOptions: {}, collectFonts: false, inlineStylesheet: true, recordCrossOriginIframes: false };
    this.rrwebRecord = window.rrweb ? window.rrweb.record : window.rrwebRecord;
    for (var i2 = this.instance.config.session_recording, o2 = 0, s2 = Object.entries(i2 || {}); o2 < s2.length; o2++) {
      var a2 = h(s2[o2], 2), u2 = a2[0], c2 = a2[1];
      u2 in r2 && (r2[u2] = c2);
    }
    this.rrwebRecord ? (this.mutationRateLimiter = null !== (e7 = this.mutationRateLimiter) && void 0 !== e7 ? e7 : new lt(this.rrwebRecord, { onBlockedNode: function(e8, t2) {
      var r3 = "Too many mutations on node '".concat(e8, "'. Rate limiting. This could be due to SVG animations or something similar");
      T.log(r3, { node: t2 }), n2.log("[PostHog Recorder] " + r3, "warn");
    } }), this.stopRrweb = this.rrwebRecord(t({ emit: function(e8) {
      n2.onRRwebEmit(e8);
    }, plugins: window.rrwebConsoleRecord && this.isConsoleLogCaptureEnabled() ? [window.rrwebConsoleRecord.getRecordConsolePlugin()] : [] }, r2)), this.instance._addCaptureHook(function(e8) {
      try {
        if ("$pageview" === e8) {
          var t2, r3 = n2._maskUrl(window.location.href);
          if (!r3)
            return;
          null === (t2 = n2.rrwebRecord) || void 0 === t2 || t2.addCustomEvent("$pageview", { href: r3 });
        }
      } catch (e9) {
        T.error("Could not add $pageview to rrweb session", e9);
      }
    }), this.lastActivityTimestamp = Date.now(), this.isIdle = false) : T.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.");
  } }, { key: "onRRwebEmit", value: function(e7) {
    if (e7 && "object" === n(e7)) {
      if (e7.type === dt.Meta) {
        var t2 = this._maskUrl(e7.data.href);
        if (!t2)
          return;
        e7.data.href = t2;
      }
      var r2 = this.mutationRateLimiter ? this.mutationRateLimiter.throttleMutations(e7) : e7;
      if (r2) {
        var i2 = function(e8) {
          var t3 = JSON.stringify(e8);
          if (t3.length > at) {
            var n2, r3 = v(t3.matchAll(/data:([\w/\-.]+);(\w+),([^)"]*)/gim));
            try {
              for (r3.s(); !(n2 = r3.n()).done; ) {
                var i3 = n2.value;
                t3 = "image/" === i3[1].toLocaleLowerCase().slice(0, 6) ? t3.replace(i3[0], tt) : t3.replace(i3[0], "");
              }
            } catch (e9) {
              r3.e(e9);
            } finally {
              r3.f();
            }
          }
          return { event: JSON.parse(t3), size: t3.length };
        }(function(e8) {
          var t3 = e8;
          if (t3 && "object" === n(t3) && t3.type === ot && "object" === n(t3.data) && t3.data.plugin === ut) {
            t3.data.payload.payload.length > 10 && (t3.data.payload.payload = t3.data.payload.payload.slice(0, 10), t3.data.payload.payload.push("...[truncated]"));
            for (var r3 = [], i3 = 0; i3 < t3.data.payload.payload.length; i3++)
              t3.data.payload.payload[i3] && t3.data.payload.payload[i3].length > 2e3 ? r3.push(t3.data.payload.payload[i3].slice(0, 2e3) + "...[truncated]") : r3.push(t3.data.payload.payload[i3]);
            return t3.data.payload.payload = r3, e8;
          }
          return e8;
        }(r2)), o2 = i2.event, s2 = i2.size;
        if (this._updateWindowAndSessionIds(o2), !this.isIdle) {
          var a2 = { $snapshot_bytes: s2, $snapshot_data: o2, $session_id: this.sessionId, $window_id: this.windowId };
          this.emit ? this._captureSnapshotBuffered(a2) : this.snapshots.push(a2);
        }
      }
    }
  } }, { key: "_maskUrl", value: function(e7) {
    var t2 = this.instance.config.session_recording;
    if (t2.maskNetworkRequestFn) {
      var n2, r2 = { url: e7 };
      return null === (n2 = r2 = t2.maskNetworkRequestFn(r2)) || void 0 === n2 ? void 0 : n2.url;
    }
    return e7;
  } }, { key: "_flushBuffer", value: function() {
    return this.flushBufferTimer && (clearTimeout(this.flushBufferTimer), this.flushBufferTimer = void 0), this.buffer && 0 !== this.buffer.data.length && this._captureSnapshot({ $snapshot_bytes: this.buffer.size, $snapshot_data: this.buffer.data, $session_id: this.buffer.sessionId, $window_id: this.buffer.windowId }), this.buffer = void 0, { size: 0, data: [], sessionId: this.sessionId, windowId: this.windowId };
  } }, { key: "_captureSnapshotBuffered", value: function(e7) {
    var t2, n2 = this, r2 = 2 + ((null === (t2 = this.buffer) || void 0 === t2 ? void 0 : t2.data.length) || 0);
    (!this.buffer || this.buffer.size + e7.$snapshot_bytes + r2 > 943718.4 || this.buffer.sessionId !== this.sessionId) && (this.buffer = this._flushBuffer()), this.buffer.size += e7.$snapshot_bytes, this.buffer.data.push(e7.$snapshot_data), this.flushBufferTimer || (this.flushBufferTimer = setTimeout(function() {
      n2._flushBuffer();
    }, 2e3));
  } }, { key: "_captureSnapshot", value: function(e7) {
    this.instance.capture("$snapshot", e7, { transport: "XHR", method: "POST", endpoint: this.endpoint, _noTruncate: true, _batchKey: "recordings", _metrics: { rrweb_full_snapshot: e7.$snapshot_data.type === nt } });
  } }]), e6;
}();
var gt = { entryType: 0, timeOrigin: 1, name: 2, startTime: 3, redirectStart: 4, redirectEnd: 5, workerStart: 6, fetchStart: 7, domainLookupStart: 8, domainLookupEnd: 9, connectStart: 10, secureConnectionStart: 11, connectEnd: 12, requestStart: 13, responseStart: 14, responseEnd: 15, decodedBodySize: 16, encodedBodySize: 17, initiatorType: 18, nextHopProtocol: 19, renderBlockingStatus: 20, responseStatus: 21, transferSize: 22, element: 23, renderTime: 24, loadTime: 25, size: 26, id: 27, url: 28, domComplete: 29, domContentLoadedEvent: 30, domInteractive: 31, loadEventEnd: 32, loadEventStart: 33, redirectCount: 34, navigationType: 35, unloadEventEnd: 36, unloadEventStart: 37, duration: 39, timestamp: 40 };
var _t = ["first-input", "navigation", "paint", "resource"];
var vt = ["/s/", "/e/"];
var mt = function() {
  function e6(t2) {
    r(this, e6), s(this, "_forceAllowLocalhost", false), this.instance = t2;
  }
  return o(e6, [{ key: "startObservingIfEnabled", value: function() {
    this.isEnabled() ? this.startObserving() : this.stopObserving();
  } }, { key: "startObserving", value: function() {
    var e7, t2, n2 = this;
    if (!this.observer)
      if (void 0 !== (null === (e7 = window) || void 0 === e7 || null === (t2 = e7.PerformanceObserver) || void 0 === t2 ? void 0 : t2.supportedEntryTypes))
        if (!F.includes(location.hostname) || this._forceAllowLocalhost)
          try {
            this.observer = new PerformanceObserver(function(e8) {
              e8.getEntries().forEach(function(e9) {
                n2._capturePerformanceEvent(e9);
              });
            });
            var r2 = PerformanceObserver.supportedEntryTypes.filter(function(e8) {
              return _t.includes(e8);
            });
            r2.forEach(function(e8) {
              var t3;
              null === (t3 = n2.observer) || void 0 === t3 || t3.observe({ type: e8, buffered: true });
            });
          } catch (e8) {
            console.error("PostHog failed to start performance observer", e8), this.stopObserving();
          }
        else
          T.log("PostHog Peformance observer not started because we are on localhost.");
      else
        T.log("PostHog Performance observer not started because PerformanceObserver is not supported by this browser.");
  } }, { key: "stopObserving", value: function() {
    this.observer && (this.observer.disconnect(), this.observer = void 0);
  } }, { key: "isObserving", value: function() {
    return !!this.observer;
  } }, { key: "isEnabled", value: function() {
    var e7, t2;
    return null !== (e7 = null !== (t2 = this.instance.config.capture_performance) && void 0 !== t2 ? t2 : this.remoteEnabled) && void 0 !== e7 && e7;
  } }, { key: "afterDecideResponse", value: function(e7) {
    this.remoteEnabled = e7.capturePerformance || false, this.isEnabled() && this.startObserving();
  } }, { key: "_capturePerformanceEvent", value: function(e7) {
    if (0 === e7.name.indexOf(this.instance.config.api_host)) {
      var t2 = e7.name.replace(this.instance.config.api_host, "");
      if (vt.find(function(e8) {
        return 0 === t2.indexOf(e8);
      }))
        return;
    }
    var n2 = { url: e7.name }, r2 = this.instance.config.session_recording;
    if (r2.maskNetworkRequestFn && (n2 = r2.maskNetworkRequestFn(n2)), n2) {
      var i2 = e7.toJSON();
      i2.name = n2.url;
      var o2 = {}, a2 = Math.floor(Date.now() - performance.now());
      for (var u2 in o2[gt.timeOrigin] = a2, o2[gt.timestamp] = Math.floor(a2 + e7.startTime), gt)
        void 0 !== i2[u2] && (o2[gt[u2]] = i2[u2]);
      if (this.capturePerformanceEvent(o2), yt(e7)) {
        var c2, l2 = v(e7.serverTiming || []);
        try {
          for (l2.s(); !(c2 = l2.n()).done; ) {
            var d2, f2 = c2.value;
            this.capturePerformanceEvent((s(d2 = {}, gt.timeOrigin, a2), s(d2, gt.timestamp, Math.floor(a2 + e7.startTime)), s(d2, gt.name, f2.name), s(d2, gt.duration, f2.duration), s(d2, gt.entryType, "serverTiming"), d2));
          }
        } catch (e8) {
          l2.e(e8);
        } finally {
          l2.f();
        }
      }
    }
  } }, { key: "capturePerformanceEvent", value: function(e7) {
    var t2, n2 = e7[gt.timestamp];
    null === (t2 = this.instance.sessionRecording) || void 0 === t2 || t2.onRRwebEmit({ type: 6, data: { plugin: "posthog/network@1", payload: e7 }, timestamp: n2 });
  } }]), e6;
}();
var yt = function(e6) {
  return "navigation" === e6.entryType || "resource" === e6.entryType;
};
var bt = function() {
  function e6(t2) {
    r(this, e6), this.instance = t2, this.instance.decideEndpointWasHit = this.instance._hasBootstrappedFeatureFlags();
  }
  return o(e6, [{ key: "call", value: function() {
    var e7 = this, t2 = X(JSON.stringify({ token: this.instance.config.token, distinct_id: this.instance.get_distinct_id(), groups: this.instance.getGroups(), person_properties: this.instance.get_property(Oe), group_properties: this.instance.get_property($e), disable_flags: this.instance.config.advanced_disable_feature_flags || this.instance.config.advanced_disable_feature_flags_on_first_load || void 0 }));
    this.instance._send_request("".concat(this.instance.config.api_host, "/decide/?v=3"), { data: t2, verbose: true }, { method: "POST" }, function(t3) {
      return e7.parseDecideResponse(t3);
    });
  } }, { key: "parseDecideResponse", value: function(e7) {
    var t2, n2, r2, i2, o2 = this;
    if (this.instance.featureFlags.setReloadingPaused(false), this.instance.featureFlags._startReloadTimer(), 0 !== (null == e7 ? void 0 : e7.status)) {
      if (!document || !document.body)
        return console.log("document not ready yet, trying again in 500 milliseconds..."), void setTimeout(function() {
          o2.parseDecideResponse(e7);
        }, 500);
      if (this.instance.toolbar.afterDecideResponse(e7), null === (t2 = this.instance.sessionRecording) || void 0 === t2 || t2.afterDecideResponse(e7), je.afterDecideResponse(e7, this.instance), null === (n2 = this.instance.webPerformance) || void 0 === n2 || n2.afterDecideResponse(e7), null === (r2 = this.instance.exceptionAutocapture) || void 0 === r2 || r2.afterDecideResponse(e7), this.instance.config.advanced_disable_feature_flags_on_first_load || this.instance.featureFlags.receivedFeatureFlags(e7), this.instance.compression = {}, e7.supportedCompression && !this.instance.config.disable_compression) {
        var s2, a2 = {}, u2 = v(e7.supportedCompression);
        try {
          for (u2.s(); !(s2 = u2.n()).done; ) {
            a2[s2.value] = true;
          }
        } catch (e8) {
          u2.e(e8);
        } finally {
          u2.f();
        }
        this.instance.compression = a2;
      }
      var c2 = null === (i2 = window) || void 0 === i2 ? void 0 : i2.extendPostHogWithSurveys;
      if (e7.surveys && !c2 && ie(this.instance.config.api_host + "/static/surveys.js", function(e8) {
        if (e8)
          return console.error("Could not load surveys script", e8);
        window.extendPostHogWithSurveys(o2.instance);
      }), e7.siteApps)
        if (this.instance.config.opt_in_site_apps) {
          var l2, d2 = this.instance.config.api_host, f2 = v(e7.siteApps);
          try {
            var h2 = function() {
              var e8 = l2.value, t3 = e8.id, n3 = e8.url, r3 = [d2, "/" === d2[d2.length - 1] && "/" === n3[0] ? n3.substring(1) : n3].join("");
              window["__$$ph_site_app_".concat(t3)] = o2.instance, ie(r3, function(e9) {
                e9 && console.error("Error while initializing PostHog app with config id ".concat(t3), e9);
              });
            };
            for (f2.s(); !(l2 = f2.n()).done; )
              h2();
          } catch (e8) {
            f2.e(e8);
          } finally {
            f2.f();
          }
        } else
          e7.siteApps.length > 0 && console.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');
    } else
      console.error("Failed to fetch feature flags from PostHog.");
  } }]), e6;
}();
var wt = ["https://app.posthog.com", "https://eu.posthog.com"];
var kt = ["source"];
var St = function() {
  function e6(t2) {
    r(this, e6), this.instance = t2;
  }
  return o(e6, [{ key: "afterDecideResponse", value: function(e7) {
    var n2 = e7.toolbarParams || e7.editorParams || (e7.toolbarVersion ? { toolbarVersion: e7.toolbarVersion } : {});
    e7.isAuthenticated && n2.toolbarVersion && 0 === n2.toolbarVersion.indexOf("toolbar") && this.loadToolbar(t({}, n2));
  } }, { key: "maybeLoadToolbar", value: function() {
    var e7 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window.location, t2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0, n2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : window.history;
    try {
      if (!t2) {
        try {
          window.localStorage.setItem("test", "test"), window.localStorage.removeItem("test");
        } catch (e8) {
          return false;
        }
        t2 = window.localStorage;
      }
      var r2, i2 = ne(e7.hash, "__posthog") || ne(e7.hash, "state"), o2 = i2 ? JSON.parse(decodeURIComponent(i2)) : null;
      return o2 && "ph_authorize" === o2.action ? ((r2 = o2).source = "url", r2 && Object.keys(r2).length > 0 && (o2.desiredHash ? e7.hash = o2.desiredHash : n2 ? n2.replaceState("", document.title, e7.pathname + e7.search) : e7.hash = "")) : ((r2 = JSON.parse(t2.getItem("_postHogToolbarParams") || "{}")).source = "localstorage", delete r2.userIntent), !(!r2.token || this.instance.config.token !== r2.token) && (this.loadToolbar(r2), true);
    } catch (e8) {
      return false;
    }
  } }, { key: "loadToolbar", value: function(e7) {
    var n2 = this;
    if (window._postHogToolbarLoaded)
      return false;
    window._postHogToolbarLoaded = true;
    var r2 = this.instance.config.api_host, i2 = 3e5, o2 = Math.floor(Date.now() / i2) * i2, s2 = "".concat(r2).concat(r2.endsWith("/") ? "" : "/", "static/toolbar.js?t=").concat(o2), a2 = !wt.includes(this.instance.config.api_host) && this.instance.config.advanced_disable_toolbar_metrics, u2 = t(t({ token: this.instance.config.token }, e7), {}, { apiURL: r2 }, a2 ? { instrument: false } : {});
    u2.source;
    var c2 = l(u2, kt);
    return window.localStorage.setItem("_postHogToolbarParams", JSON.stringify(c2)), ie(s2, function(e8) {
      e8 ? T.error("Failed to load toolbar", e8) : (window.ph_load_toolbar || window.ph_load_editor)(u2, n2.instance);
    }), re(window, "turbolinks:load", function() {
      window._postHogToolbarLoaded = false, n2.loadToolbar(u2);
    }), true;
  } }, { key: "_loadEditor", value: function(e7) {
    return this.loadToolbar(e7);
  } }, { key: "maybeLoadEditor", value: function() {
    var e7 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window.location, t2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0, n2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : window.history;
    return this.maybeLoadToolbar(e7, t2, n2);
  } }]), e6;
}();
var Et = "__ph_opt_in_out_";
function xt(e6, t2) {
  Mt(true, e6, t2);
}
function Pt(e6, t2) {
  Mt(false, e6, t2);
}
function Ft(e6, t2) {
  return "1" === Tt(e6, t2);
}
function It(e6, t2) {
  return !!function(e7) {
    if (e7 && e7.respectDnt) {
      var t3 = e7 && e7.window || S, n2 = t3.navigator || {}, r2 = false;
      return C([n2.doNotTrack, n2.msDoNotTrack, t3.doNotTrack], function(e8) {
        H([true, 1, "1", "yes"], e8) && (r2 = true);
      }), r2;
    }
    return false;
  }(t2) || "0" === Tt(e6, t2);
}
function Ot(e6, t2) {
  $t(t2 = t2 || {}).remove(Rt(e6, t2), !!t2.crossSubdomainCookie);
}
function $t(e6) {
  return "localStorage" === (e6 = e6 || {}).persistenceType ? ze : "localStorage+cookie" === e6.persistenceType ? Ye : Ve;
}
function Rt(e6, t2) {
  return ((t2 = t2 || {}).persistencePrefix || Et) + e6;
}
function Tt(e6, t2) {
  return $t(t2).get(Rt(e6, t2));
}
function Mt(e6, t2, n2) {
  U(t2) && t2.length ? ($t(n2 = n2 || {}).set(Rt(t2, n2), e6 ? 1 : 0, V(n2.cookieExpiration) ? n2.cookieExpiration : null, n2.crossSubdomainCookie, n2.secureCookie), n2.capture && e6 && n2.capture(n2.captureEventName || "$opt_in", n2.captureProperties || {}, { send_instantly: true })) : console.error("gdpr." + (e6 ? "optIn" : "optOut") + " called with an invalid token");
}
var At = function() {
  function e6() {
    var t2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 3e3;
    r(this, e6), this.isPolling = true, this._event_queue = [], this._empty_queue_count = 0, this._poller = void 0, this._pollInterval = t2;
  }
  return o(e6, [{ key: "setPollInterval", value: function(e7) {
    this._pollInterval = e7, this.isPolling && this.poll();
  } }, { key: "poll", value: function() {
  } }, { key: "unload", value: function() {
  } }, { key: "getTime", value: function() {
    return new Date().getTime();
  } }]), e6;
}();
var Ct = function(e6) {
  a(i2, At);
  var n2 = f(i2);
  function i2(e7) {
    var t2, o2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 3e3;
    return r(this, i2), (t2 = n2.call(this, o2)).handlePollRequest = e7, t2;
  }
  return o(i2, [{ key: "enqueue", value: function(e7, t2, n3) {
    this._event_queue.push({ url: e7, data: t2, options: n3 }), this.isPolling || (this.isPolling = true, this.poll());
  } }, { key: "poll", value: function() {
    var e7 = this;
    clearTimeout(this._poller), this._poller = setTimeout(function() {
      if (e7._event_queue.length > 0) {
        var t2 = e7.formatQueue(), n3 = function(n4) {
          var r3 = t2[n4], i3 = r3.url, o2 = r3.data, s2 = r3.options;
          C(o2, function(t3, n5) {
            o2[n5].offset = Math.abs(o2[n5].timestamp - e7.getTime()), delete o2[n5].timestamp;
          }), e7.handlePollRequest(i3, o2, s2);
        };
        for (var r2 in t2)
          n3(r2);
        e7._event_queue.length = 0, e7._empty_queue_count = 0;
      } else
        e7._empty_queue_count++;
      e7._empty_queue_count > 4 && (e7.isPolling = false, e7._empty_queue_count = 0), e7.isPolling && e7.poll();
    }, this._pollInterval);
  } }, { key: "unload", value: function() {
    var e7 = this;
    clearTimeout(this._poller);
    var n3 = this._event_queue.length > 0 ? this.formatQueue() : {};
    this._event_queue.length = 0;
    var r2 = Object.values(n3);
    [].concat(p(r2.filter(function(e8) {
      return 0 === e8.url.indexOf("/e");
    })), p(r2.filter(function(e8) {
      return 0 !== e8.url.indexOf("/e");
    }))).map(function(n4) {
      var r3 = n4.url, i3 = n4.data, o2 = n4.options;
      e7.handlePollRequest(r3, i3, t(t({}, o2), {}, { transport: "sendBeacon" }));
    });
  } }, { key: "formatQueue", value: function() {
    var e7 = {};
    return C(this._event_queue, function(t2) {
      var n3 = t2.url, r2 = t2.data, i3 = t2.options, o2 = (i3 ? i3._batchKey : null) || n3;
      void 0 === e7[o2] && (e7[o2] = { data: [], url: n3, options: i3 }), i3 && e7[o2].options && e7[o2].options._metrics && !e7[o2].options._metrics.rrweb_full_snapshot && (e7[o2].options._metrics.rrweb_full_snapshot = i3._metrics.rrweb_full_snapshot), e7[o2].data.push(r2);
    }), e7;
  } }]), i2;
}();
var Dt = Uint8Array;
var jt = Uint16Array;
var Nt = Uint32Array;
var Ht = new Dt([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0]);
var Lt = new Dt([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0]);
var Bt = new Dt([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);
var qt = function(e6, t2) {
  for (var n2 = new jt(31), r2 = 0; r2 < 31; ++r2)
    n2[r2] = t2 += 1 << e6[r2 - 1];
  var i2 = new Nt(n2[30]);
  for (r2 = 1; r2 < 30; ++r2)
    for (var o2 = n2[r2]; o2 < n2[r2 + 1]; ++o2)
      i2[o2] = o2 - n2[r2] << 5 | r2;
  return [n2, i2];
};
var Ut = qt(Ht, 2);
var Vt = Ut[0];
var Gt = Ut[1];
Vt[28] = 258, Gt[258] = 28;
for (zt = qt(Lt, 0)[1], Wt = new jt(32768), Yt = 0; Yt < 32768; ++Yt) {
  Qt = (43690 & Yt) >>> 1 | (21845 & Yt) << 1;
  Qt = (61680 & (Qt = (52428 & Qt) >>> 2 | (13107 & Qt) << 2)) >>> 4 | (3855 & Qt) << 4, Wt[Yt] = ((65280 & Qt) >>> 8 | (255 & Qt) << 8) >>> 1;
}
var Qt;
var zt;
var Wt;
var Yt;
var Jt = function(e6, t2, n2) {
  for (var r2 = e6.length, i2 = 0, o2 = new jt(t2); i2 < r2; ++i2)
    ++o2[e6[i2] - 1];
  var s2, a2 = new jt(t2);
  for (i2 = 0; i2 < t2; ++i2)
    a2[i2] = a2[i2 - 1] + o2[i2 - 1] << 1;
  if (n2) {
    s2 = new jt(1 << t2);
    var u2 = 15 - t2;
    for (i2 = 0; i2 < r2; ++i2)
      if (e6[i2])
        for (var c2 = i2 << 4 | e6[i2], l2 = t2 - e6[i2], d2 = a2[e6[i2] - 1]++ << l2, f2 = d2 | (1 << l2) - 1; d2 <= f2; ++d2)
          s2[Wt[d2] >>> u2] = c2;
  } else
    for (s2 = new jt(r2), i2 = 0; i2 < r2; ++i2)
      s2[i2] = Wt[a2[e6[i2] - 1]++] >>> 15 - e6[i2];
  return s2;
};
var Xt = new Dt(288);
for (Yt = 0; Yt < 144; ++Yt)
  Xt[Yt] = 8;
for (Yt = 144; Yt < 256; ++Yt)
  Xt[Yt] = 9;
for (Yt = 256; Yt < 280; ++Yt)
  Xt[Yt] = 7;
for (Yt = 280; Yt < 288; ++Yt)
  Xt[Yt] = 8;
var Kt = new Dt(32);
for (Yt = 0; Yt < 32; ++Yt)
  Kt[Yt] = 5;
var Zt;
var en = Jt(Xt, 9, 0);
var tn = Jt(Kt, 5, 0);
var nn = function(e6) {
  return (e6 / 8 >> 0) + (7 & e6 && 1);
};
var rn = function(e6, t2, n2) {
  (null == t2 || t2 < 0) && (t2 = 0), (null == n2 || n2 > e6.length) && (n2 = e6.length);
  var r2 = new (e6 instanceof jt ? jt : e6 instanceof Nt ? Nt : Dt)(n2 - t2);
  return r2.set(e6.subarray(t2, n2)), r2;
};
var on = function(e6, t2, n2) {
  n2 <<= 7 & t2;
  var r2 = t2 / 8 >> 0;
  e6[r2] |= n2, e6[r2 + 1] |= n2 >>> 8;
};
var sn = function(e6, t2, n2) {
  n2 <<= 7 & t2;
  var r2 = t2 / 8 >> 0;
  e6[r2] |= n2, e6[r2 + 1] |= n2 >>> 8, e6[r2 + 2] |= n2 >>> 16;
};
var an = function(e6, t2) {
  for (var n2 = [], r2 = 0; r2 < e6.length; ++r2)
    e6[r2] && n2.push({ s: r2, f: e6[r2] });
  var i2 = n2.length, o2 = n2.slice();
  if (!i2)
    return [new Dt(0), 0];
  if (1 == i2) {
    var s2 = new Dt(n2[0].s + 1);
    return s2[n2[0].s] = 1, [s2, 1];
  }
  n2.sort(function(e7, t3) {
    return e7.f - t3.f;
  }), n2.push({ s: -1, f: 25001 });
  var a2 = n2[0], u2 = n2[1], c2 = 0, l2 = 1, d2 = 2;
  for (n2[0] = { s: -1, f: a2.f + u2.f, l: a2, r: u2 }; l2 != i2 - 1; )
    a2 = n2[n2[c2].f < n2[d2].f ? c2++ : d2++], u2 = n2[c2 != l2 && n2[c2].f < n2[d2].f ? c2++ : d2++], n2[l2++] = { s: -1, f: a2.f + u2.f, l: a2, r: u2 };
  var f2 = o2[0].s;
  for (r2 = 1; r2 < i2; ++r2)
    o2[r2].s > f2 && (f2 = o2[r2].s);
  var h2 = new jt(f2 + 1), p2 = un(n2[l2 - 1], h2, 0);
  if (p2 > t2) {
    r2 = 0;
    var g2 = 0, _2 = p2 - t2, v2 = 1 << _2;
    for (o2.sort(function(e7, t3) {
      return h2[t3.s] - h2[e7.s] || e7.f - t3.f;
    }); r2 < i2; ++r2) {
      var m2 = o2[r2].s;
      if (!(h2[m2] > t2))
        break;
      g2 += v2 - (1 << p2 - h2[m2]), h2[m2] = t2;
    }
    for (g2 >>>= _2; g2 > 0; ) {
      var y2 = o2[r2].s;
      h2[y2] < t2 ? g2 -= 1 << t2 - h2[y2]++ - 1 : ++r2;
    }
    for (; r2 >= 0 && g2; --r2) {
      var b2 = o2[r2].s;
      h2[b2] == t2 && (--h2[b2], ++g2);
    }
    p2 = t2;
  }
  return [new Dt(h2), p2];
};
var un = function e3(t2, n2, r2) {
  return -1 == t2.s ? Math.max(e3(t2.l, n2, r2 + 1), e3(t2.r, n2, r2 + 1)) : n2[t2.s] = r2;
};
var cn = function(e6) {
  for (var t2 = e6.length; t2 && !e6[--t2]; )
    ;
  for (var n2 = new jt(++t2), r2 = 0, i2 = e6[0], o2 = 1, s2 = function(e7) {
    n2[r2++] = e7;
  }, a2 = 1; a2 <= t2; ++a2)
    if (e6[a2] == i2 && a2 != t2)
      ++o2;
    else {
      if (!i2 && o2 > 2) {
        for (; o2 > 138; o2 -= 138)
          s2(32754);
        o2 > 2 && (s2(o2 > 10 ? o2 - 11 << 5 | 28690 : o2 - 3 << 5 | 12305), o2 = 0);
      } else if (o2 > 3) {
        for (s2(i2), --o2; o2 > 6; o2 -= 6)
          s2(8304);
        o2 > 2 && (s2(o2 - 3 << 5 | 8208), o2 = 0);
      }
      for (; o2--; )
        s2(i2);
      o2 = 1, i2 = e6[a2];
    }
  return [n2.subarray(0, r2), t2];
};
var ln = function(e6, t2) {
  for (var n2 = 0, r2 = 0; r2 < t2.length; ++r2)
    n2 += e6[r2] * t2[r2];
  return n2;
};
var dn = function(e6, t2, n2) {
  var r2 = n2.length, i2 = nn(t2 + 2);
  e6[i2] = 255 & r2, e6[i2 + 1] = r2 >>> 8, e6[i2 + 2] = 255 ^ e6[i2], e6[i2 + 3] = 255 ^ e6[i2 + 1];
  for (var o2 = 0; o2 < r2; ++o2)
    e6[i2 + o2 + 4] = n2[o2];
  return 8 * (i2 + 4 + r2);
};
var fn = function(e6, t2, n2, r2, i2, o2, s2, a2, u2, c2, l2) {
  on(t2, l2++, n2), ++i2[256];
  for (var d2 = an(i2, 15), f2 = d2[0], h2 = d2[1], p2 = an(o2, 15), g2 = p2[0], _2 = p2[1], v2 = cn(f2), m2 = v2[0], y2 = v2[1], b2 = cn(g2), w2 = b2[0], k2 = b2[1], S2 = new jt(19), E2 = 0; E2 < m2.length; ++E2)
    S2[31 & m2[E2]]++;
  for (E2 = 0; E2 < w2.length; ++E2)
    S2[31 & w2[E2]]++;
  for (var x2 = an(S2, 7), P2 = x2[0], F2 = x2[1], I2 = 19; I2 > 4 && !P2[Bt[I2 - 1]]; --I2)
    ;
  var O2, $2, R2, T2, M2 = c2 + 5 << 3, A2 = ln(i2, Xt) + ln(o2, Kt) + s2, C2 = ln(i2, f2) + ln(o2, g2) + s2 + 14 + 3 * I2 + ln(S2, P2) + (2 * S2[16] + 3 * S2[17] + 7 * S2[18]);
  if (M2 <= A2 && M2 <= C2)
    return dn(t2, l2, e6.subarray(u2, u2 + c2));
  if (on(t2, l2, 1 + (C2 < A2)), l2 += 2, C2 < A2) {
    O2 = Jt(f2, h2, 0), $2 = f2, R2 = Jt(g2, _2, 0), T2 = g2;
    var D2 = Jt(P2, F2, 0);
    on(t2, l2, y2 - 257), on(t2, l2 + 5, k2 - 1), on(t2, l2 + 10, I2 - 4), l2 += 14;
    for (E2 = 0; E2 < I2; ++E2)
      on(t2, l2 + 3 * E2, P2[Bt[E2]]);
    l2 += 3 * I2;
    for (var j2 = [m2, w2], N2 = 0; N2 < 2; ++N2) {
      var H2 = j2[N2];
      for (E2 = 0; E2 < H2.length; ++E2) {
        var L2 = 31 & H2[E2];
        on(t2, l2, D2[L2]), l2 += P2[L2], L2 > 15 && (on(t2, l2, H2[E2] >>> 5 & 127), l2 += H2[E2] >>> 12);
      }
    }
  } else
    O2 = en, $2 = Xt, R2 = tn, T2 = Kt;
  for (E2 = 0; E2 < a2; ++E2)
    if (r2[E2] > 255) {
      L2 = r2[E2] >>> 18 & 31;
      sn(t2, l2, O2[L2 + 257]), l2 += $2[L2 + 257], L2 > 7 && (on(t2, l2, r2[E2] >>> 23 & 31), l2 += Ht[L2]);
      var B2 = 31 & r2[E2];
      sn(t2, l2, R2[B2]), l2 += T2[B2], B2 > 3 && (sn(t2, l2, r2[E2] >>> 5 & 8191), l2 += Lt[B2]);
    } else
      sn(t2, l2, O2[r2[E2]]), l2 += $2[r2[E2]];
  return sn(t2, l2, O2[256]), l2 + $2[256];
};
var hn = new Nt([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);
var pn = new Dt(0);
var gn = function() {
  for (var e6 = new Nt(256), t2 = 0; t2 < 256; ++t2) {
    for (var n2 = t2, r2 = 9; --r2; )
      n2 = (1 & n2 && 3988292384) ^ n2 >>> 1;
    e6[t2] = n2;
  }
  return e6;
}();
var _n = function() {
  var e6 = 4294967295;
  return { p: function(t2) {
    for (var n2 = e6, r2 = 0; r2 < t2.length; ++r2)
      n2 = gn[255 & n2 ^ t2[r2]] ^ n2 >>> 8;
    e6 = n2;
  }, d: function() {
    return 4294967295 ^ e6;
  } };
};
var vn = function(e6, t2, n2, r2, i2) {
  return function(e7, t3, n3, r3, i3, o2) {
    var s2 = e7.length, a2 = new Dt(r3 + s2 + 5 * (1 + Math.floor(s2 / 7e3)) + i3), u2 = a2.subarray(r3, a2.length - i3), c2 = 0;
    if (!t3 || s2 < 8)
      for (var l2 = 0; l2 <= s2; l2 += 65535) {
        var d2 = l2 + 65535;
        d2 < s2 ? c2 = dn(u2, c2, e7.subarray(l2, d2)) : (u2[l2] = o2, c2 = dn(u2, c2, e7.subarray(l2, s2)));
      }
    else {
      for (var f2 = hn[t3 - 1], h2 = f2 >>> 13, p2 = 8191 & f2, g2 = (1 << n3) - 1, _2 = new jt(32768), v2 = new jt(g2 + 1), m2 = Math.ceil(n3 / 3), y2 = 2 * m2, b2 = function(t4) {
        return (e7[t4] ^ e7[t4 + 1] << m2 ^ e7[t4 + 2] << y2) & g2;
      }, w2 = new Nt(25e3), k2 = new jt(288), S2 = new jt(32), E2 = 0, x2 = 0, P2 = (l2 = 0, 0), F2 = 0, I2 = 0; l2 < s2; ++l2) {
        var O2 = b2(l2), $2 = 32767 & l2, R2 = v2[O2];
        if (_2[$2] = R2, v2[O2] = $2, F2 <= l2) {
          var T2 = s2 - l2;
          if ((E2 > 7e3 || P2 > 24576) && T2 > 423) {
            c2 = fn(e7, u2, 0, w2, k2, S2, x2, P2, I2, l2 - I2, c2), P2 = E2 = x2 = 0, I2 = l2;
            for (var M2 = 0; M2 < 286; ++M2)
              k2[M2] = 0;
            for (M2 = 0; M2 < 30; ++M2)
              S2[M2] = 0;
          }
          var A2 = 2, C2 = 0, D2 = p2, j2 = $2 - R2 & 32767;
          if (T2 > 2 && O2 == b2(l2 - j2))
            for (var N2 = Math.min(h2, T2) - 1, H2 = Math.min(32767, l2), L2 = Math.min(258, T2); j2 <= H2 && --D2 && $2 != R2; ) {
              if (e7[l2 + A2] == e7[l2 + A2 - j2]) {
                for (var B2 = 0; B2 < L2 && e7[l2 + B2] == e7[l2 + B2 - j2]; ++B2)
                  ;
                if (B2 > A2) {
                  if (A2 = B2, C2 = j2, B2 > N2)
                    break;
                  var q2 = Math.min(j2, B2 - 2), U2 = 0;
                  for (M2 = 0; M2 < q2; ++M2) {
                    var V2 = l2 - j2 + M2 + 32768 & 32767, G2 = V2 - _2[V2] + 32768 & 32767;
                    G2 > U2 && (U2 = G2, R2 = V2);
                  }
                }
              }
              j2 += ($2 = R2) - (R2 = _2[$2]) + 32768 & 32767;
            }
          if (C2) {
            w2[P2++] = 268435456 | Gt[A2] << 18 | zt[C2];
            var z2 = 31 & Gt[A2], W2 = 31 & zt[C2];
            x2 += Ht[z2] + Lt[W2], ++k2[257 + z2], ++S2[W2], F2 = l2 + A2, ++E2;
          } else
            w2[P2++] = e7[l2], ++k2[e7[l2]];
        }
      }
      c2 = fn(e7, u2, o2, w2, k2, S2, x2, P2, I2, l2 - I2, c2), o2 || (c2 = dn(u2, c2, pn));
    }
    return rn(a2, 0, r3 + nn(c2) + i3);
  }(e6, null == t2.level ? 6 : t2.level, null == t2.mem ? Math.ceil(1.5 * Math.max(8, Math.min(13, Math.log(e6.length)))) : 12 + t2.mem, n2, r2, !i2);
};
var mn = function(e6, t2, n2) {
  for (; n2; ++t2)
    e6[t2] = n2, n2 >>>= 8;
};
var yn = function(e6, t2) {
  var n2 = t2.filename;
  if (e6[0] = 31, e6[1] = 139, e6[2] = 8, e6[8] = t2.level < 2 ? 4 : 9 == t2.level ? 2 : 0, e6[9] = 3, 0 != t2.mtime && mn(e6, 4, Math.floor(new Date(t2.mtime || Date.now()) / 1e3)), n2) {
    e6[3] = 8;
    for (var r2 = 0; r2 <= n2.length; ++r2)
      e6[r2 + 10] = n2.charCodeAt(r2);
  }
};
var bn = function(e6) {
  return 10 + (e6.filename && e6.filename.length + 1 || 0);
};
function wn(e6, t2) {
  void 0 === t2 && (t2 = {});
  var n2 = _n(), r2 = e6.length;
  n2.p(e6);
  var i2 = vn(e6, t2, bn(t2), 8), o2 = i2.length;
  return yn(i2, t2), mn(i2, o2 - 8, n2.d()), mn(i2, o2 - 4, r2), i2;
}
function kn(e6, t2) {
  var n2 = e6.length;
  if (!t2 && "undefined" != typeof TextEncoder)
    return new TextEncoder().encode(e6);
  for (var r2 = new Dt(e6.length + (e6.length >>> 1)), i2 = 0, o2 = function(e7) {
    r2[i2++] = e7;
  }, s2 = 0; s2 < n2; ++s2) {
    if (i2 + 5 > r2.length) {
      var a2 = new Dt(i2 + 8 + (n2 - s2 << 1));
      a2.set(r2), r2 = a2;
    }
    var u2 = e6.charCodeAt(s2);
    u2 < 128 || t2 ? o2(u2) : u2 < 2048 ? (o2(192 | u2 >>> 6), o2(128 | 63 & u2)) : u2 > 55295 && u2 < 57344 ? (o2(240 | (u2 = 65536 + (1047552 & u2) | 1023 & e6.charCodeAt(++s2)) >>> 18), o2(128 | u2 >>> 12 & 63), o2(128 | u2 >>> 6 & 63), o2(128 | 63 & u2)) : (o2(224 | u2 >>> 12), o2(128 | u2 >>> 6 & 63), o2(128 | 63 & u2));
  }
  return rn(r2, 0, i2);
}
!function(e6) {
  e6.GZipJS = "gzip-js", e6.Base64 = "base64";
}(Zt || (Zt = {}));
var Sn = function(e6, t2, n2) {
  var r2 = t2 || {};
  r2.ip = n2.ip ? 1 : 0, r2._ = new Date().getTime().toString(), r2.ver = m.LIB_VERSION;
  var i2 = e6.split("?");
  if (i2.length > 1) {
    var o2, s2 = v(i2[1].split("&"));
    try {
      for (s2.s(); !(o2 = s2.n()).done; ) {
        var a2 = o2.value.split("=")[0];
        r2[a2] && delete r2[a2];
      }
    } catch (e7) {
      s2.e(e7);
    } finally {
      s2.f();
    }
  }
  var u2 = e6.indexOf("?") > -1 ? "&" : "?";
  return e6 + u2 + function(e7) {
    var t3, n3, r3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "&", i3 = [];
    return C(e7, function(e8, r4) {
      t3 = encodeURIComponent(e8.toString()), n3 = encodeURIComponent(r4), i3[i3.length] = n3 + "=" + t3;
    }), i3.join(r3);
  }(r2);
};
var En = function e4(t2, n2) {
  if (n2.blob && t2.buffer)
    return new Blob([t2.buffer], { type: "text/plain" });
  if (n2.sendBeacon || n2.blob) {
    var r2 = e4(t2, { method: "POST" });
    return new Blob([r2], { type: "application/x-www-form-urlencoded" });
  }
  if ("POST" !== n2.method)
    return null;
  var i2, o2;
  return i2 = Array.isArray(t2) || (o2 = t2, "[object Uint8Array]" === Object.prototype.toString.call(o2)) ? "data=" + encodeURIComponent(t2) : "data=" + encodeURIComponent(t2.data), "compression" in t2 && t2.compression && (i2 += "&compression=" + t2.compression), i2;
};
var xn = function(e6) {
  var t2 = e6.url, n2 = e6.data, r2 = e6.headers, i2 = e6.options, o2 = e6.callback, s2 = e6.retriesPerformedSoFar, a2 = e6.retryQueue, u2 = e6.onXHRError, c2 = e6.timeout, l2 = void 0 === c2 ? 6e4 : c2, d2 = e6.onResponse, f2 = new XMLHttpRequest();
  f2.open(i2.method || "GET", t2, true);
  var h2 = En(n2, i2);
  C(r2, function(e7, t3) {
    f2.setRequestHeader(t3, e7);
  }), "POST" !== i2.method || i2.blob || f2.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), f2.timeout = l2, f2.withCredentials = true, f2.onreadystatechange = function() {
    if (4 === f2.readyState)
      if (null == d2 || d2(f2), 200 === f2.status) {
        if (o2) {
          var e7;
          try {
            e7 = JSON.parse(f2.responseText);
          } catch (e8) {
            return void T.error(e8);
          }
          o2(e7);
        }
      } else
        "function" == typeof u2 && u2(f2), (f2.status < 400 || f2.status > 500) && a2.enqueue({ url: t2, data: n2, options: i2, headers: r2, retriesPerformedSoFar: (s2 || 0) + 1, callback: o2 }), null == o2 || o2({ status: 0 });
  }, f2.send(h2);
};
var Pn = 18e5;
var Fn = function(e6) {
  a(i2, At);
  var n2 = f(i2);
  function i2(e7, t2) {
    var o2;
    return r(this, i2), (o2 = n2.call(this)).isPolling = false, o2.queue = [], o2.areWeOnline = true, o2.onXHRError = e7, o2.rateLimiter = t2, "undefined" != typeof window && "onLine" in window.navigator && (o2.areWeOnline = window.navigator.onLine, window.addEventListener("online", function() {
      o2._handleWeAreNowOnline();
    }), window.addEventListener("offline", function() {
      o2.areWeOnline = false;
    })), o2;
  }
  return o(i2, [{ key: "enqueue", value: function(e7) {
    var t2 = e7.retriesPerformedSoFar || 0;
    if (!(t2 >= 10)) {
      var n3 = function(e8) {
        var t3 = 3e3 * Math.pow(2, e8), n4 = t3 / 2, r3 = Math.min(Pn, t3), i3 = (Math.random() - 0.5) * (r3 - n4);
        return Math.ceil(r3 + i3);
      }(t2), r2 = new Date(Date.now() + n3);
      this.queue.push({ retryAt: r2, requestData: e7 }), console.warn("Enqueued failed request for retry in ".concat(n3)), this.isPolling || (this.isPolling = true, this.poll());
    }
  } }, { key: "poll", value: function() {
    var e7 = this;
    this._poller && clearTimeout(this._poller), this._poller = setTimeout(function() {
      e7.areWeOnline && e7.queue.length > 0 && e7.flush(), e7.poll();
    }, this._pollInterval);
  } }, { key: "flush", value: function() {
    var e7 = new Date(Date.now()), t2 = this.queue.filter(function(t3) {
      return t3.retryAt < e7;
    });
    if (t2.length > 0) {
      this.queue = this.queue.filter(function(t3) {
        return t3.retryAt >= e7;
      });
      var n3, r2 = v(t2);
      try {
        for (r2.s(); !(n3 = r2.n()).done; ) {
          var i3 = n3.value.requestData;
          this._executeXhrRequest(i3);
        }
      } catch (e8) {
        r2.e(e8);
      } finally {
        r2.f();
      }
    }
  } }, { key: "unload", value: function() {
    this._poller && (clearTimeout(this._poller), this._poller = void 0);
    var e7, n3 = v(this.queue);
    try {
      for (n3.s(); !(e7 = n3.n()).done; ) {
        var r2 = e7.value.requestData, i3 = r2.url, o2 = r2.data, s2 = r2.options;
        if (this.rateLimiter.isRateLimited(s2._batchKey))
          m.DEBUG && console.warn("[PostHog RetryQueue] is quota limited. Dropping request.");
        else
          try {
            window.navigator.sendBeacon(i3, En(o2, t(t({}, s2), {}, { sendBeacon: true })));
          } catch (e8) {
            m.DEBUG && console.error(e8);
          }
      }
    } catch (e8) {
      n3.e(e8);
    } finally {
      n3.f();
    }
    this.queue = [];
  } }, { key: "_executeXhrRequest", value: function(e7) {
    var t2 = e7.url, n3 = e7.data, r2 = e7.options, i3 = e7.headers, o2 = e7.callback, s2 = e7.retriesPerformedSoFar;
    this.rateLimiter.isRateLimited(r2._batchKey) || xn({ url: t2, data: n3 || {}, options: r2 || {}, headers: i3 || {}, retriesPerformedSoFar: s2 || 0, callback: o2, retryQueue: this, onXHRError: this.onXHRError, onResponse: this.rateLimiter.checkForLimiting });
  } }, { key: "_handleWeAreNowOnline", value: function() {
    this.areWeOnline = true, this.flush();
  } }]), i2;
}();
Math.trunc || (Math.trunc = function(e6) {
  return e6 < 0 ? Math.ceil(e6) : Math.floor(e6);
}), Number.isInteger || (Number.isInteger = function(e6) {
  return "number" == typeof e6 && isFinite(e6) && Math.floor(e6) === e6;
});
var In = "0123456789abcdef";
var On = function() {
  function e6(t2) {
    if (r(this, e6), this.bytes = t2, 16 !== t2.length)
      throw new TypeError("not 128-bit length");
  }
  return o(e6, [{ key: "toString", value: function() {
    for (var e7 = "", t2 = 0; t2 < this.bytes.length; t2++)
      e7 = e7 + In.charAt(this.bytes[t2] >>> 4) + In.charAt(15 & this.bytes[t2]), 3 !== t2 && 5 !== t2 && 7 !== t2 && 9 !== t2 || (e7 += "-");
    if (36 !== e7.length)
      throw new Error("Invalid UUIDv7 was generated");
    return e7;
  } }, { key: "clone", value: function() {
    return new e6(this.bytes.slice(0));
  } }, { key: "equals", value: function(e7) {
    return 0 === this.compareTo(e7);
  } }, { key: "compareTo", value: function(e7) {
    for (var t2 = 0; t2 < 16; t2++) {
      var n2 = this.bytes[t2] - e7.bytes[t2];
      if (0 !== n2)
        return Math.sign(n2);
    }
    return 0;
  } }], [{ key: "fromFieldsV7", value: function(t2, n2, r2, i2) {
    if (!Number.isInteger(t2) || !Number.isInteger(n2) || !Number.isInteger(r2) || !Number.isInteger(i2) || t2 < 0 || n2 < 0 || r2 < 0 || i2 < 0 || t2 > 281474976710655 || n2 > 4095 || r2 > 1073741823 || i2 > 4294967295)
      throw new RangeError("invalid field value");
    var o2 = new Uint8Array(16);
    return o2[0] = t2 / Math.pow(2, 40), o2[1] = t2 / Math.pow(2, 32), o2[2] = t2 / Math.pow(2, 24), o2[3] = t2 / Math.pow(2, 16), o2[4] = t2 / Math.pow(2, 8), o2[5] = t2, o2[6] = 112 | n2 >>> 8, o2[7] = n2, o2[8] = 128 | r2 >>> 24, o2[9] = r2 >>> 16, o2[10] = r2 >>> 8, o2[11] = r2, o2[12] = i2 >>> 24, o2[13] = i2 >>> 16, o2[14] = i2 >>> 8, o2[15] = i2, new e6(o2);
  } }]), e6;
}();
var $n = function() {
  function e6() {
    r(this, e6), s(this, "timestamp", 0), s(this, "counter", 0), s(this, "random", new Mn());
  }
  return o(e6, [{ key: "generate", value: function() {
    var e7 = this.generateOrAbort();
    if (void 0 !== e7)
      return e7;
    this.timestamp = 0;
    var t2 = this.generateOrAbort();
    if (void 0 === t2)
      throw new Error("Could not generate UUID after timestamp reset");
    return t2;
  } }, { key: "generateOrAbort", value: function() {
    var e7 = Date.now();
    if (e7 > this.timestamp)
      this.timestamp = e7, this.resetCounter();
    else {
      if (!(e7 + 1e4 > this.timestamp))
        return;
      this.counter++, this.counter > 4398046511103 && (this.timestamp++, this.resetCounter());
    }
    return On.fromFieldsV7(this.timestamp, Math.trunc(this.counter / Math.pow(2, 30)), this.counter & Math.pow(2, 30) - 1, this.random.nextUint32());
  } }, { key: "resetCounter", value: function() {
    this.counter = 1024 * this.random.nextUint32() + (1023 & this.random.nextUint32());
  } }]), e6;
}();
var Rn = function(e6) {
  if ("undefined" != typeof UUIDV7_DENY_WEAK_RNG && UUIDV7_DENY_WEAK_RNG)
    throw new Error("no cryptographically strong RNG available");
  for (var t2 = 0; t2 < e6.length; t2++)
    e6[t2] = 65536 * Math.trunc(65536 * Math.random()) + Math.trunc(65536 * Math.random());
  return e6;
};
"undefined" != typeof crypto && crypto.getRandomValues && (Rn = function(e6) {
  return crypto.getRandomValues(e6);
});
var Tn;
var Mn = function() {
  function e6() {
    r(this, e6), s(this, "buffer", new Uint32Array(8)), s(this, "cursor", 1 / 0);
  }
  return o(e6, [{ key: "nextUint32", value: function() {
    return this.cursor >= this.buffer.length && (Rn(this.buffer), this.cursor = 0), this.buffer[this.cursor++];
  } }]), e6;
}();
var An = function() {
  return Cn().toString();
};
var Cn = function() {
  return (Tn || (Tn = new $n())).generate();
};
var Dn = 1800;
var jn = 60;
var Nn = 864e5;
var Hn = function() {
  function e6(t2, n2) {
    r(this, e6), s(this, "_sessionIdChangedHandlers", []), this.config = t2, this.persistence = n2, this._windowId = void 0, this._sessionId = void 0, this._sessionStartTimestamp = null, this._sessionActivityTimestamp = null;
    var i2 = t2.persistence_name || t2.token, o2 = t2.session_idle_timeout_seconds || Dn;
    if ("number" != typeof o2 ? (console.warn("[PostHog] session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."), o2 = Dn) : o2 > Dn ? console.warn("[PostHog] session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead.") : o2 < jn && console.warn("[PostHog] session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."), this._sessionTimeoutMs = 1e3 * Math.min(Math.max(o2, jn), Dn), this._window_id_storage_key = "ph_" + i2 + "_window_id", this._primary_window_exists_storage_key = "ph_" + i2 + "_primary_window_exists", this._canUseSessionStorage()) {
      var a2 = Ke.parse(this._window_id_storage_key), u2 = Ke.parse(this._primary_window_exists_storage_key);
      a2 && !u2 ? this._windowId = a2 : Ke.remove(this._window_id_storage_key), Ke.set(this._primary_window_exists_storage_key, true);
    }
    this._listenToReloadWindow();
  }
  return o(e6, [{ key: "onSessionId", value: function(e7) {
    var t2 = this;
    return void 0 === this._sessionIdChangedHandlers && (this._sessionIdChangedHandlers = []), this._sessionIdChangedHandlers.push(e7), this._sessionId && e7(this._sessionId, this._windowId), function() {
      t2._sessionIdChangedHandlers = t2._sessionIdChangedHandlers.filter(function(t3) {
        return t3 !== e7;
      });
    };
  } }, { key: "_canUseSessionStorage", value: function() {
    return "memory" !== this.config.persistence && !this.persistence.disabled && Ke.is_supported();
  } }, { key: "_setWindowId", value: function(e7) {
    e7 !== this._windowId && (this._windowId = e7, this._canUseSessionStorage() && Ke.set(this._window_id_storage_key, e7));
  } }, { key: "_getWindowId", value: function() {
    return this._windowId ? this._windowId : this._canUseSessionStorage() ? Ke.parse(this._window_id_storage_key) : null;
  } }, { key: "_setSessionId", value: function(e7, t2, n2) {
    e7 === this._sessionId && t2 === this._sessionActivityTimestamp && n2 === this._sessionStartTimestamp || (this._sessionStartTimestamp = n2, this._sessionActivityTimestamp = t2, this._sessionId = e7, this.persistence.register(s({}, Pe, [t2, e7, n2])));
  } }, { key: "_getSessionId", value: function() {
    if (this._sessionId && this._sessionActivityTimestamp && this._sessionStartTimestamp)
      return [this._sessionActivityTimestamp, this._sessionId, this._sessionStartTimestamp];
    var e7 = this.persistence.props[Pe];
    return Array.isArray(e7) && 2 === e7.length && e7.push(e7[0]), e7 || [0, null, 0];
  } }, { key: "resetSessionId", value: function() {
    this._setSessionId(null, null, null);
  } }, { key: "_listenToReloadWindow", value: function() {
    var e7 = this;
    window.addEventListener("beforeunload", function() {
      e7._canUseSessionStorage() && Ke.remove(e7._primary_window_exists_storage_key);
    });
  } }, { key: "checkAndGetSessionAndWindowId", value: function() {
    var e7 = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], t2 = (arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null) || new Date().getTime(), n2 = h(this._getSessionId(), 3), r2 = n2[0], i2 = n2[1], o2 = n2[2], s2 = this._getWindowId(), a2 = o2 && o2 > 0 && Math.abs(t2 - o2) > Nn, u2 = false;
    !i2 || !e7 && Math.abs(t2 - r2) > this._sessionTimeoutMs || a2 ? (i2 = An(), s2 = An(), o2 = t2, u2 = true) : s2 || (s2 = An(), u2 = true);
    var c2 = 0 === r2 || !e7 || a2 ? t2 : r2, l2 = 0 === o2 ? new Date().getTime() : o2;
    return this._setWindowId(s2), this._setSessionId(i2, c2, l2), u2 && this._sessionIdChangedHandlers.forEach(function(e8) {
      return e8(i2, s2);
    }), { sessionId: i2, windowId: s2, sessionStartTimestamp: l2 };
  } }]), e6;
}();
var Ln = o(function e5(t2, n2, i2, o2) {
  r(this, e5), this.name = "posthog-js", this.setupOnce = function(e6) {
    e6(function(e7) {
      var r2, s2, a2, u2, c2;
      if ("error" !== e7.level || !t2.__loaded)
        return e7;
      e7.tags || (e7.tags = {});
      var l2 = t2.config.ui_host || t2.config.api_host;
      e7.tags["PostHog Person URL"] = l2 + "/person/" + t2.get_distinct_id(), t2.sessionRecordingStarted() && (e7.tags["PostHog Recording URL"] = t2.get_session_replay_url({ withTimestamp: true }));
      var d2 = (null === (r2 = e7.exception) || void 0 === r2 ? void 0 : r2.values) || [], f2 = { $exception_message: null === (s2 = d2[0]) || void 0 === s2 ? void 0 : s2.value, $exception_type: null === (a2 = d2[0]) || void 0 === a2 ? void 0 : a2.type, $exception_personURL: l2 + "/person/" + t2.get_distinct_id(), $sentry_event_id: e7.event_id, $sentry_exception: e7.exception, $sentry_exception_message: null === (u2 = d2[0]) || void 0 === u2 ? void 0 : u2.value, $sentry_exception_type: null === (c2 = d2[0]) || void 0 === c2 ? void 0 : c2.type, $sentry_tags: e7.tags };
      return n2 && i2 && (f2.$sentry_url = (o2 || "https://sentry.io/organizations/") + n2 + "/issues/?project=" + i2 + "&query=" + e7.event_id), t2.capture("$exception", f2), e7;
    });
  };
});
var Bn = function(e6) {
  Promise && Promise.resolve || console.warn("This browser does not have Promise support, and can not use the segment integration");
  var t2 = function(t3, n2) {
    t3.event.userId || t3.event.anonymousId === e6.get_distinct_id() || e6.reset(), t3.event.userId && t3.event.userId !== e6.get_distinct_id() && (e6.register({ distinct_id: t3.event.userId }), e6.reloadFeatureFlags());
    var r2 = e6._calculate_event_properties(n2, t3.event.properties);
    return t3.event.properties = Object.assign({}, r2, t3.event.properties), t3;
  };
  return { name: "PostHog JS", type: "enrichment", version: "1.0.0", isLoaded: function() {
    return true;
  }, load: function() {
    return Promise.resolve();
  }, track: function(e7) {
    return t2(e7, e7.event.event);
  }, page: function(e7) {
    return t2(e7, "$pageview");
  }, identify: function(e7) {
    return t2(e7, "$identify");
  }, screen: function(e7) {
    return t2(e7, "$screen");
  } };
};
var qn = function() {
  function e6() {
    var t2 = this;
    r(this, e6), s(this, "_hasSeenPageView", false), s(this, "_updateScrollData", function() {
      var e7, n2, r2, i2;
      t2._pageViewData || (t2._pageViewData = t2._createPageViewData());
      var o2 = t2._pageViewData, s2 = t2._scrollY(), a2 = t2._scrollHeight(), u2 = t2._contentY(), c2 = t2._contentHeight();
      o2.lastScrollY = s2, o2.maxScrollY = Math.max(s2, null !== (e7 = o2.maxScrollY) && void 0 !== e7 ? e7 : 0), o2.maxScrollHeight = Math.max(a2, null !== (n2 = o2.maxScrollHeight) && void 0 !== n2 ? n2 : 0), o2.lastContentY = u2, o2.maxContentY = Math.max(u2, null !== (r2 = o2.maxContentY) && void 0 !== r2 ? r2 : 0), o2.maxContentHeight = Math.max(c2, null !== (i2 = o2.maxContentHeight) && void 0 !== i2 ? i2 : 0);
    });
  }
  return o(e6, [{ key: "_createPageViewData", value: function() {
    return { pathname: S.location.pathname };
  } }, { key: "doPageView", value: function() {
    var e7, n2;
    return this._hasSeenPageView ? (n2 = this._pageViewData, this._pageViewData = this._createPageViewData()) : (this._hasSeenPageView = true, n2 = void 0, this._pageViewData || (this._pageViewData = this._createPageViewData())), setTimeout(this._updateScrollData, 0), t({ $prev_pageview_pathname: null === (e7 = n2) || void 0 === e7 ? void 0 : e7.pathname }, this._calculatePrevPageScrollProperties(n2));
  } }, { key: "doPageLeave", value: function() {
    var e7 = this._pageViewData;
    return t({ $prev_pageview_pathname: null == e7 ? void 0 : e7.pathname }, this._calculatePrevPageScrollProperties(e7));
  } }, { key: "_calculatePrevPageScrollProperties", value: function(e7) {
    if (!e7 || null == e7.maxScrollHeight || null == e7.lastScrollY || null == e7.maxScrollY || null == e7.maxContentHeight || null == e7.lastContentY || null == e7.maxContentY)
      return {};
    var t2 = e7.maxScrollHeight, n2 = e7.lastScrollY, r2 = e7.maxScrollY, i2 = e7.maxContentHeight, o2 = e7.lastContentY, s2 = e7.maxContentY;
    return t2 = Math.ceil(t2), n2 = Math.ceil(n2), r2 = Math.ceil(r2), i2 = Math.ceil(i2), o2 = Math.ceil(o2), s2 = Math.ceil(s2), { $prev_pageview_last_scroll: n2, $prev_pageview_last_scroll_percentage: t2 <= 1 ? 1 : Un(n2 / t2, 0, 1), $prev_pageview_max_scroll: r2, $prev_pageview_max_scroll_percentage: t2 <= 1 ? 1 : Un(r2 / t2, 0, 1), $prev_pageview_last_content: o2, $prev_pageview_last_content_percentage: i2 <= 1 ? 1 : Un(o2 / i2, 0, 1), $prev_pageview_max_content: s2, $prev_pageview_max_content_percentage: i2 <= 1 ? 1 : Un(s2 / i2, 0, 1) };
  } }, { key: "startMeasuringScrollPosition", value: function() {
    S.addEventListener("scroll", this._updateScrollData), S.addEventListener("scrollend", this._updateScrollData), S.addEventListener("resize", this._updateScrollData);
  } }, { key: "stopMeasuringScrollPosition", value: function() {
    S.removeEventListener("scroll", this._updateScrollData), S.removeEventListener("scrollend", this._updateScrollData), S.removeEventListener("resize", this._updateScrollData);
  } }, { key: "_scrollHeight", value: function() {
    return Math.max(0, S.document.documentElement.scrollHeight - S.document.documentElement.clientHeight);
  } }, { key: "_scrollY", value: function() {
    return S.scrollY || S.pageYOffset || S.document.documentElement.scrollTop || 0;
  } }, { key: "_contentHeight", value: function() {
    return S.document.documentElement.scrollHeight || 0;
  } }, { key: "_contentY", value: function() {
    var e7 = S.document.documentElement.clientHeight || 0;
    return this._scrollY() + e7;
  } }]), e6;
}();
function Un(e6, t2, n2) {
  return Math.max(t2, Math.min(e6, n2));
}
function Vn(e6) {
  return "undefined" != typeof Event && Gn(e6, Event);
}
function Gn(e6, t2) {
  try {
    return e6 instanceof t2;
  } catch (e7) {
    return false;
  }
}
function zn(e6) {
  return null === e6 || "object" !== n(e6) && "function" != typeof e6;
}
function Wn(e6, t2) {
  return Object.prototype.toString.call(e6) === "[object ".concat(t2, "]");
}
function Yn(e6) {
  return Wn(e6, "DOMError");
}
var Qn = /\(error: (.*)\)/;
var Jn = 50;
var Xn = "?";
function Kn(e6, t2, n2, r2) {
  var i2 = { filename: e6, function: t2, in_app: true };
  return void 0 !== n2 && (i2.lineno = n2), void 0 !== r2 && (i2.colno = r2), i2;
}
var Zn = /^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i;
var er = /\((\S*)(?::(\d+))(?::(\d+))\)/;
var tr = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i;
var nr = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i;
var rr = /^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i;
var ir = function() {
  for (var e6 = arguments.length, n2 = new Array(e6), r2 = 0; r2 < e6; r2++)
    n2[r2] = arguments[r2];
  var i2 = n2.sort(function(e7, t2) {
    return e7[0] - t2[0];
  }).map(function(e7) {
    return e7[1];
  });
  return function(e7) {
    for (var n3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, r3 = [], o2 = e7.split("\n"), s2 = n3; s2 < o2.length; s2++) {
      var a2 = o2[s2];
      if (!(a2.length > 1024)) {
        var u2 = Qn.test(a2) ? a2.replace(Qn, "$1") : a2;
        if (!u2.match(/\S*Error: /)) {
          var c2, l2 = v(i2);
          try {
            for (l2.s(); !(c2 = l2.n()).done; ) {
              var d2 = (0, c2.value)(u2);
              if (d2) {
                r3.push(d2);
                break;
              }
            }
          } catch (e8) {
            l2.e(e8);
          } finally {
            l2.f();
          }
          if (r3.length >= Jn)
            break;
        }
      }
    }
    return function(e8) {
      if (!e8.length)
        return [];
      var n4 = e8.slice(0, Jn);
      return n4.reverse(), n4.map(function(e9) {
        return t(t({}, e9), {}, { filename: e9.filename || n4[n4.length - 1].filename, function: e9.function || "?" });
      });
    }(r3);
  };
}.apply(void 0, [[30, function(e6) {
  var t2 = Zn.exec(e6);
  if (t2) {
    if (t2[2] && 0 === t2[2].indexOf("eval")) {
      var n2 = er.exec(t2[2]);
      n2 && (t2[2] = n2[1], t2[3] = n2[2], t2[4] = n2[3]);
    }
    var r2 = h(or(t2[1] || Xn, t2[2]), 2), i2 = r2[0];
    return Kn(r2[1], i2, t2[3] ? +t2[3] : void 0, t2[4] ? +t2[4] : void 0);
  }
}], [50, function(e6) {
  var t2 = tr.exec(e6);
  if (t2) {
    if (t2[3] && t2[3].indexOf(" > eval") > -1) {
      var n2 = nr.exec(t2[3]);
      n2 && (t2[1] = t2[1] || "eval", t2[3] = n2[1], t2[4] = n2[2], t2[5] = "");
    }
    var r2 = t2[3], i2 = t2[1] || Xn, o2 = h(or(i2, r2), 2);
    return i2 = o2[0], Kn(r2 = o2[1], i2, t2[4] ? +t2[4] : void 0, t2[5] ? +t2[5] : void 0);
  }
}], [40, function(e6) {
  var t2 = rr.exec(e6);
  return t2 ? Kn(t2[2], t2[1] || Xn, +t2[3], t2[4] ? +t2[4] : void 0) : void 0;
}]]);
var or = function(e6, t2) {
  var n2 = -1 !== e6.indexOf("safari-extension"), r2 = -1 !== e6.indexOf("safari-web-extension");
  return n2 || r2 ? [-1 !== e6.indexOf("@") ? e6.split("@")[0] : Xn, n2 ? "safari-extension:".concat(t2) : "safari-web-extension:".concat(t2)] : [e6, t2];
};
var sr = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;
var ar = /Minified React error #\d+;/i;
function ur(e6) {
  var t2 = e6.stacktrace || e6.stack || "", n2 = function(e7) {
    if (e7) {
      if ("number" == typeof e7.framesToPop)
        return e7.framesToPop;
      if (ar.test(e7.message))
        return 1;
    }
    return 0;
  }(e6);
  try {
    return ir(t2, n2);
  } catch (e7) {
  }
  return [];
}
function cr(e6) {
  var t2 = ur(e6);
  return { $exception_type: e6.name, $exception_message: e6.message, $exception_stack_trace_raw: JSON.stringify(t2) };
}
function lr(e6) {
  var t2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 40, n2 = Object.keys(e6);
  if (n2.sort(), !n2.length)
    return "[object has no keys]";
  for (var r2 = n2.length; r2 > 0; r2--) {
    var i2 = n2.slice(0, r2).join(", ");
    if (!(i2.length > t2))
      return r2 === n2.length || i2.length <= t2 ? i2 : "".concat(i2.slice(0, t2), "...");
  }
  return "";
}
function dr(e6) {
  var n2 = h(e6, 5), r2 = n2[0], i2 = n2[1], o2 = n2[2], s2 = n2[3], a2 = n2[4], u2 = {};
  if (void 0 === a2 && "string" == typeof r2) {
    var c2 = "Error", l2 = r2, d2 = r2.match(sr);
    d2 && (c2 = d2[1], l2 = d2[2]), u2 = { $exception_type: c2, $exception_message: l2 };
  }
  var f2 = a2 || r2;
  if (Yn(f2) || function(e7) {
    return Wn(e7, "DOMException");
  }(f2)) {
    var p2 = f2;
    if (function(e7) {
      return "stack" in e7;
    }(f2))
      u2 = cr(f2);
    else {
      var g2 = p2.name || (Yn(p2) ? "DOMError" : "DOMException"), _2 = p2.message ? "".concat(g2, ": ").concat(p2.message) : g2;
      u2 = function(e7) {
        return { $exception_type: "Error", $exception_message: e7 };
      }(_2), u2.$exception_type = Yn(p2) ? "DOMError" : "DOMException", u2.$exception_message = u2.$exception_message || _2;
    }
    "code" in p2 && (u2.$exception_DOMException_code = "".concat(p2.code));
  } else if (function(e7) {
    return Wn(e7, "ErrorEvent");
  }(f2) && f2.error)
    u2 = cr(f2.error);
  else if (function(e7) {
    switch (Object.prototype.toString.call(e7)) {
      case "[object Error]":
      case "[object Exception]":
      case "[object DOMException]":
        return true;
      default:
        return Gn(e7, Error);
    }
  }(f2))
    u2 = cr(f2);
  else if (function(e7) {
    return Wn(e7, "Object");
  }(f2) || Vn(f2)) {
    u2 = function(e7) {
      return { $exception_type: Vn(e7) ? e7.constructor.name : "Error", $exception_message: "Non-Error ".concat("exception", " captured with keys: ", lr(e7)) };
    }(f2), u2.$exception_is_synthetic = true;
  } else
    u2.$exception_type = u2.$exception_type || "Error", u2.$exception_message = u2.$exception_message || f2, u2.$exception_is_synthetic = true;
  return t(t(t(t({}, u2), {}, { $exception_type: u2.$exception_type || "UnknownErrorType", $exception_message: u2.$exception_message || "" }, i2 ? { $exception_source: i2 } : {}), o2 ? { $exception_lineno: o2 } : {}), s2 ? { $exception_colno: s2 } : {});
}
var fr;
var hr;
var pr;
var gr = function() {
  function e6(t2) {
    r(this, e6), s(this, "originalOnErrorHandler", void 0), s(this, "originalOnUnhandledRejectionHandler", void 0), s(this, "errorsToIgnore", []), this.instance = t2;
  }
  return o(e6, [{ key: "debugLog", value: function() {
    if (this.instance.config.debug) {
      for (var e7, t2 = arguments.length, n2 = new Array(t2), r2 = 0; r2 < t2; r2++)
        n2[r2] = arguments[r2];
      (e7 = console).log.apply(e7, ["PostHog.js [PostHog.ExceptionObserver]"].concat(n2));
    }
  } }, { key: "startCapturing", value: function() {
    var e7;
    if (this.isEnabled() && (null === (e7 = S.onerror) || void 0 === e7 || !e7.__POSTHOG_INSTRUMENTED__))
      try {
        this.originalOnErrorHandler = S.onerror, S.onerror = function() {
          for (var e8 = arguments.length, t2 = new Array(e8), n2 = 0; n2 < e8; n2++)
            t2[n2] = arguments[n2];
          return this.captureException(t2), !!this.originalOnErrorHandler && this.originalOnErrorHandler.apply(this, t2);
        }.bind(this), S.onerror.__POSTHOG_INSTRUMENTED__ = true, this.originalOnUnhandledRejectionHandler = S.onunhandledrejection, S.onunhandledrejection = function() {
          for (var e8 = arguments.length, n2 = new Array(e8), r2 = 0; r2 < e8; r2++)
            n2[r2] = arguments[r2];
          var i2 = function(e9) {
            var n3 = h(e9, 1)[0], r3 = n3;
            try {
              "reason" in n3 ? r3 = n3.reason : "detail" in n3 && "reason" in n3.detail && (r3 = n3.detail.reason);
            } catch (e10) {
            }
            var i3 = {};
            return (i3 = zn(r3) ? { $exception_message: "Non-Error promise rejection captured with value: ".concat(String(r3)) } : dr([r3])).$exception_handled = false, t(t({}, i3), {}, { $exception_type: i3.$exception_type = "UnhandledRejection", $exception_message: i3.$exception_message = i3.$exception_message || n3.reason || String(r3) });
          }(n2);
          return this.sendExceptionEvent(i2), !this.originalOnUnhandledRejectionHandler || this.originalOnUnhandledRejectionHandler.apply(S, n2);
        }.bind(this), S.onunhandledrejection.__POSTHOG_INSTRUMENTED__ = true;
      } catch (e8) {
        console.error("PostHog failed to start exception autocapture", e8), this.stopCapturing();
      }
  } }, { key: "stopCapturing", value: function() {
    var e7, t2;
    void 0 !== this.originalOnErrorHandler && (S.onerror = this.originalOnErrorHandler, this.originalOnErrorHandler = null), null === (e7 = S.onerror) || void 0 === e7 || delete e7.__POSTHOG_INSTRUMENTED__, void 0 !== this.originalOnUnhandledRejectionHandler && (S.onunhandledrejection = this.originalOnUnhandledRejectionHandler, this.originalOnUnhandledRejectionHandler = null), null === (t2 = S.onunhandledrejection) || void 0 === t2 || delete t2.__POSTHOG_INSTRUMENTED__;
  } }, { key: "isCapturing", value: function() {
    var e7;
    return !(null === (e7 = S.onerror) || void 0 === e7 || !e7.__POSTHOG_INSTRUMENTED__);
  } }, { key: "isEnabled", value: function() {
    var e7;
    return null !== (e7 = this.remoteEnabled) && void 0 !== e7 && e7;
  } }, { key: "afterDecideResponse", value: function(e7) {
    var t2 = e7.autocaptureExceptions;
    if (this.remoteEnabled = !!t2 || false, !zn(t2) && "errors_to_ignore" in t2 && Array.isArray(t2.errors_to_ignore)) {
      var n2 = t2.errors_to_ignore;
      this.errorsToIgnore = n2.map(function(e8) {
        return new RegExp(e8);
      });
    }
    this.isEnabled() ? (this.startCapturing(), this.debugLog("Remote config for exception autocapture is enabled, starting", t2)) : this.debugLog("Remote config for exception autocapture is disabled, not starting", t2);
  } }, { key: "captureException", value: function(e7, n2) {
    var r2 = dr(e7);
    if (this.errorsToIgnore.some(function(e8) {
      return e8.test(r2.$exception_message || "");
    }))
      this.debugLog("Ignoring exception based on remote config", r2);
    else {
      var i2 = t(t({}, n2), r2), o2 = this.instance.config.ui_host || this.instance.config.api_host;
      r2.$exception_personURL = o2 + "/person/" + this.instance.get_distinct_id(), this.sendExceptionEvent(i2);
    }
  } }, { key: "sendExceptionEvent", value: function(e7) {
    this.instance.capture("$exception", e7, { transport: "XHR", method: "POST", endpoint: "/e/", _noTruncate: true, _batchKey: "exceptionEvent" });
  } }]), e6;
}();
var _r = { icontains: function(e6) {
  return window.location.href.toLowerCase().indexOf(e6.toLowerCase()) > -1;
}, regex: function(e6) {
  return G(window.location.href, e6);
}, exact: function(e6) {
  return window.location.href === e6;
} };
var vr = function() {
  function e6(t2) {
    r(this, e6), this.instance = t2;
  }
  return o(e6, [{ key: "getSurveys", value: function(e7) {
    var t2 = this, n2 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], r2 = this.instance.get_property(Re);
    if (r2 && !n2)
      return e7(r2);
    this.instance._send_request("".concat(this.instance.config.api_host, "/api/surveys/?token=").concat(this.instance.config.token), {}, { method: "GET" }, function(n3) {
      var r3, i2 = n3.surveys || [];
      return null === (r3 = t2.instance.persistence) || void 0 === r3 || r3.register(s({}, Re, i2)), e7(i2);
    });
  } }, { key: "getActiveMatchingSurveys", value: function(e7) {
    var t2 = this, n2 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
    this.getSurveys(function(n3) {
      var r2 = n3.filter(function(e8) {
        return !(!e8.start_date || e8.end_date);
      }).filter(function(e8) {
        var t3, n4, r3, i2;
        if (!e8.conditions)
          return true;
        var o2 = null === (t3 = e8.conditions) || void 0 === t3 || !t3.url || _r[null !== (n4 = null === (r3 = e8.conditions) || void 0 === r3 ? void 0 : r3.urlMatchType) && void 0 !== n4 ? n4 : "icontains"](e8.conditions.url), s2 = null === (i2 = e8.conditions) || void 0 === i2 || !i2.selector || document.querySelector(e8.conditions.selector);
        return o2 && s2;
      }).filter(function(e8) {
        if (!e8.linked_flag_key && !e8.targeting_flag_key)
          return true;
        var n4 = !e8.linked_flag_key || t2.instance.featureFlags.isFeatureEnabled(e8.linked_flag_key), r3 = !e8.targeting_flag_key || t2.instance.featureFlags.isFeatureEnabled(e8.targeting_flag_key);
        return n4 && r3;
      });
      return e7(r2);
    }, n2);
  } }]), e6;
}();
var mr = 6e4;
var yr = function() {
  function e6() {
    var t2 = this;
    r(this, e6), s(this, "limits", {}), s(this, "checkForLimiting", function(e7) {
      try {
        (JSON.parse(e7.responseText).quota_limited || []).forEach(function(e8) {
          T.log("[PostHog RateLimiter] ".concat(e8 || "events", " is quota limited.")), t2.limits[e8] = new Date().getTime() + mr;
        });
      } catch (e8) {
        return void T.error(e8);
      }
    });
  }
  return o(e6, [{ key: "isRateLimited", value: function(e7) {
    var t2 = this.limits[e7 || "events"] || false;
    return false !== t2 && new Date().getTime() < t2;
  } }]), e6;
}();
!function(e6) {
  e6[e6.INIT_MODULE = 0] = "INIT_MODULE", e6[e6.INIT_SNIPPET = 1] = "INIT_SNIPPET";
}(fr || (fr = {}));
var br = function() {
};
var wr = {};
var kr = "posthog";
var Sr = S.XMLHttpRequest && "withCredentials" in new XMLHttpRequest();
var Er = !Sr && -1 === P.indexOf("MSIE") && -1 === P.indexOf("Mozilla");
var xr = function() {
  var e6, t2, n2;
  return { api_host: "https://app.posthog.com", api_method: "POST", api_transport: "XHR", ui_host: null, token: "", autocapture: true, rageclick: true, cross_subdomain_cookie: -1 === (null == x || null === (e6 = x.location) || void 0 === e6 || null === (t2 = e6.hostname) || void 0 === t2 ? void 0 : t2.indexOf("herokuapp.com")), persistence: "cookie", persistence_name: "", cookie_name: "", loaded: br, store_google: true, custom_campaign_params: [], custom_blocked_useragents: [], save_referrer: true, capture_pageview: true, capture_pageleave: true, debug: false, verbose: false, cookie_expiration: 365, upgrade: false, disable_session_recording: false, disable_persistence: false, disable_cookie: false, enable_recording_console_log: void 0, secure_cookie: "https:" === (null == S || null === (n2 = S.location) || void 0 === n2 ? void 0 : n2.protocol), ip: true, opt_out_capturing_by_default: false, opt_out_persistence_by_default: false, opt_out_capturing_persistence_type: "localStorage", opt_out_capturing_cookie_prefix: null, opt_in_site_apps: false, property_blacklist: [], respect_dnt: false, sanitize_properties: null, xhr_headers: {}, inapp_protocol: "//", inapp_link_new_window: false, request_batching: true, properties_string_max_length: 65535, session_recording: {}, mask_all_element_attributes: false, mask_all_text: false, advanced_disable_decide: false, advanced_disable_feature_flags: false, advanced_disable_feature_flags_on_first_load: false, advanced_disable_toolbar_metrics: false, on_xhr_error: function(e7) {
    var t3 = "Bad HTTP status: " + e7.status + " " + e7.statusText;
    console.error(t3);
  }, get_device_id: function(e7) {
    return e7;
  }, _onCapture: br, capture_performance: void 0, name: "posthog", callback_fn: "posthog._jsc", bootstrap: {}, disable_compression: false, session_idle_timeout_seconds: 1800 };
};
var Pr = function(e6, t2, n2, r2) {
  var i2, o2 = n2 !== kr && pr ? n2 ? pr[n2] : void 0 : pr, s2 = { initComplete: false, syncCode: false }, a2 = function(e7) {
    return function(t3) {
      s2[e7] || (s2[e7] = true, s2.initComplete && s2.syncCode && (null == r2 || r2(t3)));
    };
  };
  if (o2 && hr === fr.INIT_MODULE)
    i2 = o2;
  else {
    if (o2 && !j(o2))
      return void console.error("You have already initialized " + n2);
    i2 = new Fr();
  }
  if (i2._init(e6, t2, n2, a2("initComplete")), i2.toolbar.maybeLoadToolbar(), i2.sessionRecording = new pt(i2), i2.sessionRecording.startRecordingIfEnabled(), i2.webPerformance = new mt(i2), i2.webPerformance.startObservingIfEnabled(), i2.config.__preview_measure_pageview_stats && i2.pageViewManager.startMeasuringScrollPosition(), i2.exceptionAutocapture = new gr(i2), i2.__autocapture = i2.config.autocapture, je._setIsAutocaptureEnabled(i2), je._isAutocaptureEnabled) {
    i2.__autocapture = i2.config.autocapture;
    je.enabledForProject(i2.config.token, 100, 100) ? je.isBrowserSupported() ? je.init(i2) : (i2.__autocapture = false, T.log("Disabling Automatic Event Collection because this browser is not supported")) : (i2.__autocapture = false, T.log("Not in active bucket: disabling Automatic Event Collection."));
  }
  return m.DEBUG = m.DEBUG || i2.config.debug, void 0 !== o2 && j(o2) && (i2._execute_array.call(i2.people, o2.people), i2._execute_array(o2)), a2("syncCode")(i2), i2;
};
var Fr = function() {
  function e6() {
    var t2 = this;
    r(this, e6), this.config = xr(), this.compression = {}, this.decideEndpointWasHit = false, this.SentryIntegration = Ln, this.segmentIntegration = function() {
      return Bn(t2);
    }, this.__captureHooks = [], this.__request_queue = [], this.__loaded = false, this.__loaded_recorder_version = void 0, this.__autocapture = void 0, this._jsc = function() {
    }, this.featureFlags = new qe(this), this.toolbar = new St(this), this.pageViewManager = new qn(), this.surveys = new vr(this), this.rateLimiter = new yr(), this.people = { set: function(e7, n2, r2) {
      var i2 = "string" == typeof e7 ? s({}, e7, n2) : e7;
      t2.setPersonProperties(i2), null == r2 || r2({});
    }, set_once: function(e7, n2, r2) {
      var i2 = "string" == typeof e7 ? s({}, e7, n2) : e7;
      t2.setPersonProperties(void 0, i2), null == r2 || r2({});
    } };
  }
  return o(e6, [{ key: "init", value: function(e7, t2, n2) {
    if (q(n2))
      console.error("You must name your new library: init(token, config, name)");
    else {
      if (n2 !== kr) {
        var r2 = Pr(e7, t2, n2, function(e8) {
          pr[n2] = e8, e8._loaded();
        });
        return pr[n2] = r2, r2;
      }
      console.error("You must initialize the main posthog object right after you include the PostHog js snippet");
    }
  } }, { key: "_init", value: function(e7) {
    var n2, r2, i2 = this, o2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, s2 = arguments.length > 2 ? arguments[2] : void 0, a2 = arguments.length > 3 ? arguments[3] : void 0;
    this.__loaded = true, this.config = {}, this._triggered_notifs = [];
    var u2, c2 = { segmentRegister: false, syncCode: false }, l2 = function(e8) {
      return function() {
        c2[e8] || (c2[e8] = true, c2.segmentRegister && c2.syncCode && (null == a2 || a2(i2)));
      };
    };
    (this.set_config(D({}, xr(), o2, { name: s2, token: e7, callback_fn: (s2 === kr ? s2 : kr + "." + s2) + "._jsc" })), this._jsc = function() {
    }, null != S && null !== (n2 = S.rrweb) && void 0 !== n2 && n2.record || null != S && S.rrwebRecord) && (this.__loaded_recorder_version = null == S || null === (u2 = S.rrweb) || void 0 === u2 ? void 0 : u2.version);
    if (this.persistence = new et(this.config), this._requestQueue = new Ct(this._handle_queued_event.bind(this)), this._retryQueue = new Fn(this.config.on_xhr_error, this.rateLimiter), this.__captureHooks = [], this.__request_queue = [], this.sessionManager = new Hn(this.config, this.persistence), this.sessionPersistence = "sessionStorage" === this.config.persistence ? this.persistence : new et(t(t({}, this.config), {}, { persistence: "sessionStorage" })), this._gdpr_init(), o2.segment ? (this.config.get_device_id = function() {
      return o2.segment.user().anonymousId();
    }, o2.segment.user().id() && (this.register({ distinct_id: o2.segment.user().id() }), this.persistence.set_user_state("identified")), o2.segment.register(this.segmentIntegration()).then(l2("segmentRegister"))) : l2("segmentRegister")(), void 0 !== (null === (r2 = o2.bootstrap) || void 0 === r2 ? void 0 : r2.distinctID)) {
      var d2, f2, h2 = this.config.get_device_id(An()), p2 = null !== (d2 = o2.bootstrap) && void 0 !== d2 && d2.isIdentifiedID ? h2 : o2.bootstrap.distinctID;
      this.persistence.set_user_state(null !== (f2 = o2.bootstrap) && void 0 !== f2 && f2.isIdentifiedID ? "identified" : "anonymous"), this.register({ distinct_id: o2.bootstrap.distinctID, $device_id: p2 });
    }
    if (this._hasBootstrappedFeatureFlags()) {
      var g2, _2, v2 = Object.keys((null === (g2 = o2.bootstrap) || void 0 === g2 ? void 0 : g2.featureFlags) || {}).filter(function(e8) {
        var t2, n3;
        return !(null === (t2 = o2.bootstrap) || void 0 === t2 || null === (n3 = t2.featureFlags) || void 0 === n3 || !n3[e8]);
      }).reduce(function(e8, t2) {
        var n3, r3;
        return e8[t2] = (null === (n3 = o2.bootstrap) || void 0 === n3 || null === (r3 = n3.featureFlags) || void 0 === r3 ? void 0 : r3[t2]) || false, e8;
      }, {}), m2 = Object.keys((null === (_2 = o2.bootstrap) || void 0 === _2 ? void 0 : _2.featureFlagPayloads) || {}).filter(function(e8) {
        return v2[e8];
      }).reduce(function(e8, t2) {
        var n3, r3, i3, s3;
        null !== (n3 = o2.bootstrap) && void 0 !== n3 && null !== (r3 = n3.featureFlagPayloads) && void 0 !== r3 && r3[t2] && (e8[t2] = null === (i3 = o2.bootstrap) || void 0 === i3 || null === (s3 = i3.featureFlagPayloads) || void 0 === s3 ? void 0 : s3[t2]);
        return e8;
      }, {});
      this.featureFlags.receivedFeatureFlags({ featureFlags: v2, featureFlagPayloads: m2 });
    }
    if (!this.get_distinct_id()) {
      var y2 = this.config.get_device_id(An());
      this.register_once({ distinct_id: y2, $device_id: y2 }, ""), this.persistence.set_user_state("anonymous");
    }
    S.addEventListener && S.addEventListener("onpagehide" in self ? "pagehide" : "unload", this._handle_unload.bind(this)), l2("syncCode")();
  } }, { key: "_loaded", value: function() {
    var e7 = this.config.advanced_disable_decide;
    e7 || this.featureFlags.setReloadingPaused(true);
    try {
      this.config.loaded(this);
    } catch (e8) {
      console.error("`loaded` function failed", e8);
    }
    this._start_queue_if_opted_in(), this.config.capture_pageview && this.capture("$pageview", { title: x.title }, { send_instantly: true }), e7 || (new bt(this).call(), this.featureFlags.resetRequestQueue());
  } }, { key: "_start_queue_if_opted_in", value: function() {
    var e7;
    this.has_opted_out_capturing() || this.config.request_batching && (null === (e7 = this._requestQueue) || void 0 === e7 || e7.poll());
  } }, { key: "_dom_loaded", value: function() {
    var e7 = this;
    this.has_opted_out_capturing() || A(this.__request_queue, function(t2) {
      e7._send_request.apply(e7, p(t2));
    }), this.__request_queue = [], this._start_queue_if_opted_in();
  } }, { key: "_prepare_callback", value: function(e7, t2) {
    if (q(e7))
      return null;
    if (Sr)
      return function(n3) {
        e7(n3, t2);
      };
    var n2 = this._jsc, r2 = "" + Math.floor(1e8 * Math.random()), i2 = this.config.callback_fn + "[" + r2 + "]";
    return n2[r2] = function(i3) {
      delete n2[r2], e7(i3, t2);
    }, i2;
  } }, { key: "_handle_unload", value: function() {
    var e7, t2;
    this.config.request_batching ? (this.config.capture_pageview && this.config.capture_pageleave && this.capture("$pageleave"), null === (e7 = this._requestQueue) || void 0 === e7 || e7.unload(), null === (t2 = this._retryQueue) || void 0 === t2 || t2.unload()) : this.config.capture_pageview && this.config.capture_pageleave && this.capture("$pageleave", null, { transport: "sendBeacon" });
  } }, { key: "_handle_queued_event", value: function(e7, t2, n2) {
    var r2 = JSON.stringify(t2);
    this.__compress_and_send_json_request(e7, r2, n2 || wr, br);
  } }, { key: "__compress_and_send_json_request", value: function(e7, n2, r2, i2) {
    var o2 = function(e8, n3, r3) {
      return e8 === Zt.GZipJS ? [wn(kn(n3), { mtime: 0 }), t(t({}, r3), {}, { blob: true, urlQueryArgs: { compression: Zt.GZipJS } })] : [{ data: X(n3) }, r3];
    }(this.compression[Zt.GZipJS] ? Zt.GZipJS : Zt.Base64, n2, r2), s2 = h(o2, 2), a2 = s2[0], u2 = s2[1];
    this._send_request(e7, a2, u2, i2);
  } }, { key: "_send_request", value: function(e7, n2, r2, i2) {
    if (this.__loaded && this._retryQueue && !this.rateLimiter.isRateLimited(r2._batchKey))
      if (Er)
        this.__request_queue.push([e7, n2, r2, i2]);
      else {
        var o2 = { method: this.config.api_method, transport: this.config.api_transport, verbose: this.config.verbose };
        r2 = D(o2, r2 || {}), Sr || (r2.method = "GET");
        var s2 = "sendBeacon" in S.navigator && "sendBeacon" === r2.transport;
        if (e7 = Sn(e7, r2.urlQueryArgs || {}, { ip: this.config.ip }), s2)
          try {
            S.navigator.sendBeacon(e7, En(n2, t(t({}, r2), {}, { sendBeacon: true })));
          } catch (e8) {
          }
        else if (Sr)
          try {
            xn({ url: e7, data: n2, headers: this.config.xhr_headers, options: r2, callback: i2, retriesPerformedSoFar: 0, retryQueue: this._retryQueue, onXHRError: this.config.on_xhr_error, onResponse: this.rateLimiter.checkForLimiting });
          } catch (e8) {
            console.error(e8);
          }
        else {
          var a2, u2 = x.createElement("script");
          u2.type = "text/javascript", u2.async = true, u2.defer = true, u2.src = e7;
          var c2 = x.getElementsByTagName("script")[0];
          null === (a2 = c2.parentNode) || void 0 === a2 || a2.insertBefore(u2, c2);
        }
      }
  } }, { key: "_execute_array", value: function(e7) {
    var t2, n2 = this, r2 = [], i2 = [], o2 = [];
    A(e7, function(e8) {
      e8 && (t2 = e8[0], j(t2) ? o2.push(e8) : "function" == typeof e8 ? e8.call(n2) : j(e8) && "alias" === t2 ? r2.push(e8) : j(e8) && -1 !== t2.indexOf("capture") && "function" == typeof n2[t2] ? o2.push(e8) : i2.push(e8));
    });
    var s2 = function(e8, t3) {
      A(e8, function(e9) {
        if (j(e9[0])) {
          var n3 = t3;
          C(e9, function(e10) {
            n3 = n3[e10[0]].apply(n3, e10.slice(1));
          });
        } else
          this[e9[0]].apply(this, e9.slice(1));
      }, t3);
    };
    s2(r2, this), s2(i2, this), s2(o2, this);
  } }, { key: "_hasBootstrappedFeatureFlags", value: function() {
    var e7, t2;
    return (null === (e7 = this.config.bootstrap) || void 0 === e7 ? void 0 : e7.featureFlags) && Object.keys(null === (t2 = this.config.bootstrap) || void 0 === t2 ? void 0 : t2.featureFlags).length > 0 || false;
  } }, { key: "push", value: function(e7) {
    this._execute_array([e7]);
  } }, { key: "captureException", value: function(e7, t2) {
    var n2;
    null === (n2 = this.exceptionAutocapture) || void 0 === n2 || n2.captureException([e7.name, void 0, void 0, void 0, e7], t2);
  } }, { key: "capture", value: function(e7, n2) {
    var r2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : wr;
    if (!this.__loaded || !this.sessionPersistence || !this._requestQueue)
      return T.unintializedWarning("posthog.capture");
    if (!function(e8, t2) {
      var n3 = false;
      try {
        var r3 = e8.config.token, i3 = e8.config.respect_dnt, o3 = e8.config.opt_out_capturing_persistence_type, s3 = e8.config.opt_out_capturing_cookie_prefix || void 0, a3 = e8.config.window;
        r3 && (n3 = It(r3, { respectDnt: i3, persistenceType: o3, persistencePrefix: s3, window: a3 }));
      } catch (e9) {
        t2 || console.error("Unexpected error when checking capturing opt-out status: " + e9);
      }
      return n3;
    }(this, false)) {
      var i2 = (r2 = r2 || wr).transport;
      if (i2 && (r2.transport = i2), q(e7) || "string" != typeof e7)
        console.error("No event name provided to posthog.capture");
      else if (!ee(P, this.config.custom_blocked_useragents)) {
        this.sessionPersistence.update_search_keyword(), this.config.store_google && this.sessionPersistence.update_campaign_params(), this.config.save_referrer && this.sessionPersistence.update_referrer_info();
        var o2 = { uuid: An(), event: e7, properties: this._calculate_event_properties(e7, n2 || {}) };
        "$identify" === e7 && (o2.$set = r2.$set, o2.$set_once = r2.$set_once), (o2 = J(o2, r2._noTruncate ? null : this.config.properties_string_max_length)).timestamp = r2.timestamp || new Date();
        var s2 = t(t({}, o2.properties.$set), o2.$set);
        B(s2) || this.setPersonPropertiesForFlags(s2), this.config.debug && T.log("PostHog.js send", o2);
        var a2 = JSON.stringify(o2), u2 = this.config.api_host + (r2.endpoint || "/e/"), c2 = r2 !== wr;
        return !this.config.request_batching || c2 && !r2._batchKey || r2.send_instantly ? this.__compress_and_send_json_request(u2, a2, r2) : this._requestQueue.enqueue(u2, o2, r2), this._invokeCaptureHooks(e7, o2), o2;
      }
    }
  } }, { key: "_addCaptureHook", value: function(e7) {
    this.__captureHooks.push(e7);
  } }, { key: "_invokeCaptureHooks", value: function(e7, t2) {
    this.config._onCapture(e7, t2), C(this.__captureHooks, function(t3) {
      return t3(e7);
    });
  } }, { key: "_calculate_event_properties", value: function(e7, n2) {
    if (!this.persistence || !this.sessionPersistence)
      return n2;
    var r2 = this.persistence.remove_event_timer(e7), i2 = t({}, n2);
    if (i2.token = this.config.token, "$snapshot" === e7) {
      var o2 = t(t({}, this.persistence.properties()), this.sessionPersistence.properties());
      return i2.distinct_id = o2.distinct_id, i2;
    }
    var s2 = oe.properties();
    if (this.sessionManager) {
      var a2 = this.sessionManager.checkAndGetSessionAndWindowId(), u2 = a2.sessionId, c2 = a2.windowId;
      i2.$session_id = u2, i2.$window_id = c2;
    }
    if (this.config.__preview_measure_pageview_stats) {
      var l2 = {};
      "$pageview" === e7 ? l2 = this.pageViewManager.doPageView() : "$pageleave" === e7 && (l2 = this.pageViewManager.doPageLeave()), i2 = D(i2, l2);
    }
    if ("$pageview" === e7 && (i2.title = x.title), "$performance_event" === e7) {
      var d2 = this.persistence.properties();
      return i2.distinct_id = d2.distinct_id, i2.$current_url = s2.$current_url, i2;
    }
    if (void 0 !== r2) {
      var f2 = new Date().getTime() - r2;
      i2.$duration = parseFloat((f2 / 1e3).toFixed(3));
    }
    i2 = D({}, oe.properties(), this.persistence.properties(), this.sessionPersistence.properties(), i2);
    var h2 = this.config.property_blacklist;
    j(h2) ? C(h2, function(e8) {
      delete i2[e8];
    }) : console.error("Invalid value for property_blacklist config: " + h2);
    var p2 = this.config.sanitize_properties;
    return p2 && (i2 = p2(i2, e7)), i2;
  } }, { key: "register", value: function(e7, t2) {
    var n2;
    null === (n2 = this.persistence) || void 0 === n2 || n2.register(e7, t2);
  } }, { key: "register_once", value: function(e7, t2, n2) {
    var r2;
    null === (r2 = this.persistence) || void 0 === r2 || r2.register_once(e7, t2, n2);
  } }, { key: "register_for_session", value: function(e7) {
    var t2;
    null === (t2 = this.sessionPersistence) || void 0 === t2 || t2.register(e7);
  } }, { key: "unregister", value: function(e7) {
    var t2;
    null === (t2 = this.persistence) || void 0 === t2 || t2.unregister(e7);
  } }, { key: "unregister_for_session", value: function(e7) {
    var t2;
    null === (t2 = this.sessionPersistence) || void 0 === t2 || t2.unregister(e7);
  } }, { key: "_register_single", value: function(e7, t2) {
    this.register(s({}, e7, t2));
  } }, { key: "getFeatureFlag", value: function(e7, t2) {
    return this.featureFlags.getFeatureFlag(e7, t2);
  } }, { key: "getFeatureFlagPayload", value: function(e7) {
    var t2 = this.featureFlags.getFeatureFlagPayload(e7);
    try {
      return JSON.parse(t2);
    } catch (e8) {
      return t2;
    }
  } }, { key: "isFeatureEnabled", value: function(e7, t2) {
    return this.featureFlags.isFeatureEnabled(e7, t2);
  } }, { key: "reloadFeatureFlags", value: function() {
    this.featureFlags.reloadFeatureFlags();
  } }, { key: "updateEarlyAccessFeatureEnrollment", value: function(e7, t2) {
    this.featureFlags.updateEarlyAccessFeatureEnrollment(e7, t2);
  } }, { key: "getEarlyAccessFeatures", value: function(e7) {
    var t2 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
    return this.featureFlags.getEarlyAccessFeatures(e7, t2);
  } }, { key: "onFeatureFlags", value: function(e7) {
    return this.featureFlags.onFeatureFlags(e7);
  } }, { key: "onSessionId", value: function(e7) {
    var t2, n2;
    return null !== (t2 = null === (n2 = this.sessionManager) || void 0 === n2 ? void 0 : n2.onSessionId(e7)) && void 0 !== t2 ? t2 : function() {
    };
  } }, { key: "getSurveys", value: function(e7) {
    var t2 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
    this.surveys.getSurveys(e7, t2);
  } }, { key: "getActiveMatchingSurveys", value: function(e7) {
    var t2 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
    this.surveys.getActiveMatchingSurveys(e7, t2);
  } }, { key: "identify", value: function(e7, t2, n2) {
    if (!this.__loaded || !this.persistence)
      return T.unintializedWarning("posthog.identify");
    if (e7) {
      var r2 = this.get_distinct_id();
      if (this.register({ $user_id: e7 }), !this.get_property("$device_id")) {
        var i2 = r2;
        this.register_once({ $had_persisted_distinct_id: true, $device_id: i2 }, "");
      }
      e7 !== r2 && e7 !== this.get_property(be) && (this.unregister(be), this.register({ distinct_id: e7 }));
      var o2 = "anonymous" === this.persistence.get_user_state();
      e7 !== r2 && o2 ? (this.persistence.set_user_state("identified"), this.setPersonPropertiesForFlags(t2 || {}, false), this.capture("$identify", { distinct_id: e7, $anon_distinct_id: r2 }, { $set: t2 || {}, $set_once: n2 || {} }), this.featureFlags.setAnonymousDistinctId(r2)) : (t2 || n2) && this.setPersonProperties(t2, n2), e7 !== r2 && (this.reloadFeatureFlags(), this.unregister(Te));
    } else
      console.error("Unique user id has not been set in posthog.identify");
  } }, { key: "setPersonProperties", value: function(e7, t2) {
    (e7 || t2) && (this.setPersonPropertiesForFlags(e7 || {}), this.capture("$set", { $set: e7 || {}, $set_once: t2 || {} }));
  } }, { key: "group", value: function(e7, n2, r2) {
    if (e7 && n2) {
      var i2 = this.getGroups();
      i2[e7] !== n2 && this.resetGroupPropertiesForFlags(e7), this.register({ $groups: t(t({}, i2), {}, s({}, e7, n2)) }), r2 && (this.capture("$groupidentify", { $group_type: e7, $group_key: n2, $group_set: r2 }), this.setGroupPropertiesForFlags(s({}, e7, r2))), i2[e7] === n2 || r2 || this.reloadFeatureFlags();
    } else
      console.error("posthog.group requires a group type and group key");
  } }, { key: "resetGroups", value: function() {
    this.register({ $groups: {} }), this.resetGroupPropertiesForFlags(), this.reloadFeatureFlags();
  } }, { key: "setPersonPropertiesForFlags", value: function(e7) {
    var t2 = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
    this.featureFlags.setPersonPropertiesForFlags(e7, t2);
  } }, { key: "resetPersonPropertiesForFlags", value: function() {
    this.featureFlags.resetPersonPropertiesForFlags();
  } }, { key: "setGroupPropertiesForFlags", value: function(e7) {
    var t2 = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
    this.featureFlags.setGroupPropertiesForFlags(e7, t2);
  } }, { key: "resetGroupPropertiesForFlags", value: function(e7) {
    this.featureFlags.resetGroupPropertiesForFlags(e7);
  } }, { key: "reset", value: function(e7) {
    var t2, n2, r2, i2;
    if (!this.__loaded)
      return T.unintializedWarning("posthog.reset");
    var o2 = this.get_property("$device_id");
    null === (t2 = this.persistence) || void 0 === t2 || t2.clear(), null === (n2 = this.sessionPersistence) || void 0 === n2 || n2.clear(), null === (r2 = this.persistence) || void 0 === r2 || r2.set_user_state("anonymous"), null === (i2 = this.sessionManager) || void 0 === i2 || i2.resetSessionId();
    var s2 = this.config.get_device_id(An());
    this.register_once({ distinct_id: s2, $device_id: e7 ? s2 : o2 }, "");
  } }, { key: "get_distinct_id", value: function() {
    return this.get_property("distinct_id");
  } }, { key: "getGroups", value: function() {
    return this.get_property("$groups") || {};
  } }, { key: "get_session_id", value: function() {
    var e7, t2;
    return null !== (e7 = null === (t2 = this.sessionManager) || void 0 === t2 ? void 0 : t2.checkAndGetSessionAndWindowId(true).sessionId) && void 0 !== e7 ? e7 : "";
  } }, { key: "get_session_replay_url", value: function(e7) {
    if (!this.sessionManager)
      return "";
    var t2 = this.config.ui_host || this.config.api_host, n2 = this.sessionManager.checkAndGetSessionAndWindowId(true), r2 = n2.sessionId, i2 = n2.sessionStartTimestamp, o2 = t2 + "/replay/" + r2;
    if (null != e7 && e7.withTimestamp && i2) {
      var s2, a2 = null !== (s2 = e7.timestampLookBack) && void 0 !== s2 ? s2 : 10;
      if (!i2)
        return o2;
      var u2 = Math.max(Math.floor((new Date().getTime() - i2) / 1e3) - a2, 0);
      o2 += "?t=".concat(u2);
    }
    return o2;
  } }, { key: "alias", value: function(e7, t2) {
    return e7 === this.get_property(ye) ? (T.critical("Attempting to create alias for existing People user - aborting."), -2) : (q(t2) && (t2 = this.get_distinct_id()), e7 !== t2 ? (this._register_single(be, e7), this.capture("$create_alias", { alias: e7, distinct_id: t2 })) : (console.error("alias matches current distinct_id - skipping api call."), this.identify(e7), -1));
  } }, { key: "set_config", value: function(e7) {
    var n2, r2, i2 = t({}, this.config);
    L(e7) && (D(this.config, e7), this.config.persistence_name || (this.config.persistence_name = this.config.cookie_name), this.config.disable_persistence || (this.config.disable_persistence = this.config.disable_cookie), null === (n2 = this.persistence) || void 0 === n2 || n2.update_config(this.config), null === (r2 = this.sessionPersistence) || void 0 === r2 || r2.update_config(this.config), ze.is_supported() && "true" === ze.get("ph_debug") && (this.config.debug = true), this.config.debug && (m.DEBUG = true), this.sessionRecording && void 0 !== e7.disable_session_recording && i2.disable_session_recording !== e7.disable_session_recording && (e7.disable_session_recording ? this.sessionRecording.stopRecording() : this.sessionRecording.startRecordingIfEnabled()));
  } }, { key: "startSessionRecording", value: function() {
    this.set_config({ disable_session_recording: false });
  } }, { key: "stopSessionRecording", value: function() {
    this.set_config({ disable_session_recording: true });
  } }, { key: "sessionRecordingStarted", value: function() {
    var e7;
    return !(null === (e7 = this.sessionRecording) || void 0 === e7 || !e7.started());
  } }, { key: "loadToolbar", value: function(e7) {
    return this.toolbar.loadToolbar(e7);
  } }, { key: "get_property", value: function(e7) {
    var t2;
    return null === (t2 = this.persistence) || void 0 === t2 ? void 0 : t2.props[e7];
  } }, { key: "getSessionProperty", value: function(e7) {
    var t2;
    return null === (t2 = this.sessionPersistence) || void 0 === t2 ? void 0 : t2.props[e7];
  } }, { key: "toString", value: function() {
    var e7, t2 = null !== (e7 = this.config.name) && void 0 !== e7 ? e7 : kr;
    return t2 !== kr && (t2 = kr + "." + t2), t2;
  } }, { key: "_gdpr_init", value: function() {
    "localStorage" === this.config.opt_out_capturing_persistence_type && ze.is_supported() && (!this.has_opted_in_capturing() && this.has_opted_in_capturing({ persistence_type: "cookie" }) && this.opt_in_capturing({ enable_persistence: false }), !this.has_opted_out_capturing() && this.has_opted_out_capturing({ persistence_type: "cookie" }) && this.opt_out_capturing({ clear_persistence: false }), this.clear_opt_in_out_capturing({ persistence_type: "cookie", enable_persistence: false })), this.has_opted_out_capturing() ? this._gdpr_update_persistence({ clear_persistence: true }) : this.has_opted_in_capturing() || !this.config.opt_out_capturing_by_default && !Ve.get("ph_optout") || (Ve.remove("ph_optout"), this.opt_out_capturing({ clear_persistence: this.config.opt_out_persistence_by_default }));
  } }, { key: "_gdpr_update_persistence", value: function(e7) {
    var t2, n2, r2, i2, o2;
    if (e7 && e7.clear_persistence)
      r2 = true;
    else {
      if (!e7 || !e7.enable_persistence)
        return;
      r2 = false;
    }
    this.config.disable_persistence || (null === (t2 = this.persistence) || void 0 === t2 ? void 0 : t2.disabled) === r2 || (null === (i2 = this.persistence) || void 0 === i2 || i2.set_disabled(r2));
    this.config.disable_persistence || (null === (n2 = this.sessionPersistence) || void 0 === n2 ? void 0 : n2.disabled) === r2 || (null === (o2 = this.sessionPersistence) || void 0 === o2 || o2.set_disabled(r2));
  } }, { key: "_gdpr_call_func", value: function(e7, t2) {
    return t2 = D({ capture: this.capture.bind(this), persistence_type: this.config.opt_out_capturing_persistence_type, cookie_prefix: this.config.opt_out_capturing_cookie_prefix, cookie_expiration: this.config.cookie_expiration, cross_subdomain_cookie: this.config.cross_subdomain_cookie, secure_cookie: this.config.secure_cookie }, t2 || {}), ze.is_supported() || "localStorage" !== t2.persistence_type || (t2.persistence_type = "cookie"), e7(this.config.token, { capture: t2.capture, captureEventName: t2.capture_event_name, captureProperties: t2.capture_properties, persistenceType: t2.persistence_type, persistencePrefix: t2.cookie_prefix, cookieExpiration: t2.cookie_expiration, crossSubdomainCookie: t2.cross_subdomain_cookie, secureCookie: t2.secure_cookie });
  } }, { key: "opt_in_capturing", value: function(e7) {
    e7 = D({ enable_persistence: true }, e7 || {}), this._gdpr_call_func(xt, e7), this._gdpr_update_persistence(e7);
  } }, { key: "opt_out_capturing", value: function(e7) {
    var t2 = D({ clear_persistence: true }, e7 || {});
    this._gdpr_call_func(Pt, t2), this._gdpr_update_persistence(t2);
  } }, { key: "has_opted_in_capturing", value: function(e7) {
    return this._gdpr_call_func(Ft, e7);
  } }, { key: "has_opted_out_capturing", value: function(e7) {
    return this._gdpr_call_func(It, e7);
  } }, { key: "clear_opt_in_out_capturing", value: function(e7) {
    var t2 = D({ enable_persistence: true }, null != e7 ? e7 : {});
    this._gdpr_call_func(Ot, t2), this._gdpr_update_persistence(t2);
  } }, { key: "debug", value: function(e7) {
    false === e7 ? (S.console.log("You've disabled debug mode."), localStorage && localStorage.removeItem("ph_debug"), this.set_config({ debug: false })) : (S.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."), localStorage && localStorage.setItem("ph_debug", "true"), this.set_config({ debug: true }));
  } }]), e6;
}();
!function(e6, t2) {
  for (var n2 = 0; n2 < t2.length; n2++)
    e6.prototype[t2[n2]] = W(e6.prototype[t2[n2]]);
}(Fr, ["identify"]);
var Ir = {};
var Or = function() {
  pr.init = function(e6, t2, n2) {
    if (n2)
      return pr[n2] || (pr[n2] = Ir[n2] = Pr(e6 || "", t2 || {}, n2, function(e7) {
        pr[n2] = Ir[n2] = e7, e7._loaded();
      })), pr[n2];
    var r2 = pr;
    return Ir[kr] ? r2 = Ir[kr] : e6 && (r2 = Pr(e6, t2 || {}, kr, function(e7) {
      Ir[kr] = e7, e7._loaded();
    }), Ir[kr] = r2), pr = r2, hr === fr.INIT_SNIPPET && (S[kr] = pr), C(Ir, function(e7, t3) {
      t3 !== kr && (pr[t3] = e7);
    }), r2;
  };
};
var $r = function() {
  function e6() {
    e6.done || (e6.done = true, Er = false, C(Ir, function(e7) {
      e7._dom_loaded();
    }));
  }
  x.addEventListener && ("complete" === x.readyState ? e6() : x.addEventListener("DOMContentLoaded", e6, false)), re(S, "load", e6, true);
};
var Rr = (hr = fr.INIT_MODULE, pr = new Fr(), Or(), pr.init(), $r(), pr);
export {
  Zt as Compression,
  Fr as PostHog,
  Rr as default,
  Rr as posthog
};
/**
 * uuidv7: An experimental implementation of the proposed UUID Version 7
 *
 * @license Apache-2.0
 * @copyright 2021-2023 LiosK
 * @packageDocumentation
 *
 * from https://github.com/LiosK/uuidv7/blob/e501462ea3d23241de13192ceae726956f9b3b7d/src/index.ts
 */
//# sourceMappingURL=posthog-js.js.map
