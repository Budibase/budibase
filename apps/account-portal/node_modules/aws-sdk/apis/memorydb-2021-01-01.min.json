{
  "version": "2.0",
  "metadata": {
    "apiVersion": "2021-01-01",
    "endpointPrefix": "memory-db",
    "jsonVersion": "1.1",
    "protocol": "json",
    "serviceAbbreviation": "Amazon MemoryDB",
    "serviceFullName": "Amazon MemoryDB",
    "serviceId": "MemoryDB",
    "signatureVersion": "v4",
    "signingName": "memorydb",
    "targetPrefix": "AmazonMemoryDB",
    "uid": "memorydb-2021-01-01"
  },
  "operations": {
    "BatchUpdateCluster": {
      "input": {
        "type": "structure",
        "required": [
          "ClusterNames"
        ],
        "members": {
          "ClusterNames": {
            "shape": "S2"
          },
          "ServiceUpdate": {
            "type": "structure",
            "members": {
              "ServiceUpdateNameToApply": {}
            }
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "ProcessedClusters": {
            "shape": "S6"
          },
          "UnprocessedClusters": {
            "type": "list",
            "member": {
              "type": "structure",
              "members": {
                "ClusterName": {},
                "ErrorType": {},
                "ErrorMessage": {}
              }
            }
          }
        }
      }
    },
    "CopySnapshot": {
      "input": {
        "type": "structure",
        "required": [
          "SourceSnapshotName",
          "TargetSnapshotName"
        ],
        "members": {
          "SourceSnapshotName": {},
          "TargetSnapshotName": {},
          "TargetBucket": {},
          "KmsKeyId": {},
          "Tags": {
            "shape": "Sy"
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "Snapshot": {
            "shape": "S11"
          }
        }
      }
    },
    "CreateACL": {
      "input": {
        "type": "structure",
        "required": [
          "ACLName"
        ],
        "members": {
          "ACLName": {},
          "UserNames": {
            "shape": "S17"
          },
          "Tags": {
            "shape": "Sy"
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "ACL": {
            "shape": "S1a"
          }
        }
      }
    },
    "CreateCluster": {
      "input": {
        "type": "structure",
        "required": [
          "ClusterName",
          "NodeType",
          "ACLName"
        ],
        "members": {
          "ClusterName": {},
          "NodeType": {},
          "ParameterGroupName": {},
          "Description": {},
          "NumShards": {
            "type": "integer"
          },
          "NumReplicasPerShard": {
            "type": "integer"
          },
          "SubnetGroupName": {},
          "SecurityGroupIds": {
            "shape": "S1f"
          },
          "MaintenanceWindow": {},
          "Port": {
            "type": "integer"
          },
          "SnsTopicArn": {},
          "TLSEnabled": {
            "type": "boolean"
          },
          "KmsKeyId": {},
          "SnapshotArns": {
            "type": "list",
            "member": {}
          },
          "SnapshotName": {},
          "SnapshotRetentionLimit": {
            "type": "integer"
          },
          "Tags": {
            "shape": "Sy"
          },
          "SnapshotWindow": {},
          "ACLName": {},
          "EngineVersion": {},
          "AutoMinorVersionUpgrade": {
            "type": "boolean"
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "Cluster": {
            "shape": "S7"
          }
        }
      }
    },
    "CreateParameterGroup": {
      "input": {
        "type": "structure",
        "required": [
          "ParameterGroupName",
          "Family"
        ],
        "members": {
          "ParameterGroupName": {},
          "Family": {},
          "Description": {},
          "Tags": {
            "shape": "Sy"
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "ParameterGroup": {
            "shape": "S1k"
          }
        }
      }
    },
    "CreateSnapshot": {
      "input": {
        "type": "structure",
        "required": [
          "ClusterName",
          "SnapshotName"
        ],
        "members": {
          "ClusterName": {},
          "SnapshotName": {},
          "KmsKeyId": {},
          "Tags": {
            "shape": "Sy"
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "Snapshot": {
            "shape": "S11"
          }
        }
      }
    },
    "CreateSubnetGroup": {
      "input": {
        "type": "structure",
        "required": [
          "SubnetGroupName",
          "SubnetIds"
        ],
        "members": {
          "SubnetGroupName": {},
          "Description": {},
          "SubnetIds": {
            "shape": "S1o"
          },
          "Tags": {
            "shape": "Sy"
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "SubnetGroup": {
            "shape": "S1q"
          }
        }
      }
    },
    "CreateUser": {
      "input": {
        "type": "structure",
        "required": [
          "UserName",
          "AuthenticationMode",
          "AccessString"
        ],
        "members": {
          "UserName": {},
          "AuthenticationMode": {
            "shape": "S1v"
          },
          "AccessString": {},
          "Tags": {
            "shape": "Sy"
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "User": {
            "shape": "S20"
          }
        }
      }
    },
    "DeleteACL": {
      "input": {
        "type": "structure",
        "required": [
          "ACLName"
        ],
        "members": {
          "ACLName": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "ACL": {
            "shape": "S1a"
          }
        }
      }
    },
    "DeleteCluster": {
      "input": {
        "type": "structure",
        "required": [
          "ClusterName"
        ],
        "members": {
          "ClusterName": {},
          "FinalSnapshotName": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "Cluster": {
            "shape": "S7"
          }
        }
      }
    },
    "DeleteParameterGroup": {
      "input": {
        "type": "structure",
        "required": [
          "ParameterGroupName"
        ],
        "members": {
          "ParameterGroupName": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "ParameterGroup": {
            "shape": "S1k"
          }
        }
      }
    },
    "DeleteSnapshot": {
      "input": {
        "type": "structure",
        "required": [
          "SnapshotName"
        ],
        "members": {
          "SnapshotName": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "Snapshot": {
            "shape": "S11"
          }
        }
      }
    },
    "DeleteSubnetGroup": {
      "input": {
        "type": "structure",
        "required": [
          "SubnetGroupName"
        ],
        "members": {
          "SubnetGroupName": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "SubnetGroup": {
            "shape": "S1q"
          }
        }
      }
    },
    "DeleteUser": {
      "input": {
        "type": "structure",
        "required": [
          "UserName"
        ],
        "members": {
          "UserName": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "User": {
            "shape": "S20"
          }
        }
      }
    },
    "DescribeACLs": {
      "input": {
        "type": "structure",
        "members": {
          "ACLName": {},
          "MaxResults": {
            "type": "integer"
          },
          "NextToken": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "ACLs": {
            "type": "list",
            "member": {
              "shape": "S1a"
            }
          },
          "NextToken": {}
        }
      }
    },
    "DescribeClusters": {
      "input": {
        "type": "structure",
        "members": {
          "ClusterName": {},
          "MaxResults": {
            "type": "integer"
          },
          "NextToken": {},
          "ShowShardDetails": {
            "type": "boolean"
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "NextToken": {},
          "Clusters": {
            "shape": "S6"
          }
        }
      }
    },
    "DescribeEngineVersions": {
      "input": {
        "type": "structure",
        "members": {
          "EngineVersion": {},
          "ParameterGroupFamily": {},
          "MaxResults": {
            "type": "integer"
          },
          "NextToken": {},
          "DefaultOnly": {
            "type": "boolean"
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "NextToken": {},
          "EngineVersions": {
            "type": "list",
            "member": {
              "type": "structure",
              "members": {
                "EngineVersion": {},
                "EnginePatchVersion": {},
                "ParameterGroupFamily": {}
              }
            }
          }
        }
      }
    },
    "DescribeEvents": {
      "input": {
        "type": "structure",
        "members": {
          "SourceName": {},
          "SourceType": {},
          "StartTime": {
            "type": "timestamp"
          },
          "EndTime": {
            "type": "timestamp"
          },
          "Duration": {
            "type": "integer"
          },
          "MaxResults": {
            "type": "integer"
          },
          "NextToken": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "NextToken": {},
          "Events": {
            "type": "list",
            "member": {
              "type": "structure",
              "members": {
                "SourceName": {},
                "SourceType": {},
                "Message": {},
                "Date": {
                  "type": "timestamp"
                }
              }
            }
          }
        }
      }
    },
    "DescribeParameterGroups": {
      "input": {
        "type": "structure",
        "members": {
          "ParameterGroupName": {},
          "MaxResults": {
            "type": "integer"
          },
          "NextToken": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "NextToken": {},
          "ParameterGroups": {
            "type": "list",
            "member": {
              "shape": "S1k"
            }
          }
        }
      }
    },
    "DescribeParameters": {
      "input": {
        "type": "structure",
        "required": [
          "ParameterGroupName"
        ],
        "members": {
          "ParameterGroupName": {},
          "MaxResults": {
            "type": "integer"
          },
          "NextToken": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "NextToken": {},
          "Parameters": {
            "type": "list",
            "member": {
              "type": "structure",
              "members": {
                "Name": {},
                "Value": {},
                "Description": {},
                "DataType": {},
                "AllowedValues": {},
                "MinimumEngineVersion": {}
              }
            }
          }
        }
      }
    },
    "DescribeServiceUpdates": {
      "input": {
        "type": "structure",
        "members": {
          "ServiceUpdateName": {},
          "ClusterNames": {
            "shape": "S2"
          },
          "Status": {
            "type": "list",
            "member": {}
          },
          "MaxResults": {
            "type": "integer"
          },
          "NextToken": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "NextToken": {},
          "ServiceUpdates": {
            "type": "list",
            "member": {
              "type": "structure",
              "members": {
                "ClusterName": {},
                "ServiceUpdateName": {},
                "ReleaseDate": {
                  "type": "timestamp"
                },
                "Description": {},
                "Status": {},
                "Type": {},
                "NodesUpdated": {},
                "AutoUpdateStartDate": {
                  "type": "timestamp"
                }
              }
            }
          }
        }
      }
    },
    "DescribeSnapshots": {
      "input": {
        "type": "structure",
        "members": {
          "ClusterName": {},
          "SnapshotName": {},
          "Source": {},
          "NextToken": {},
          "MaxResults": {
            "type": "integer"
          },
          "ShowDetail": {
            "type": "boolean"
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "NextToken": {},
          "Snapshots": {
            "type": "list",
            "member": {
              "shape": "S11"
            }
          }
        }
      }
    },
    "DescribeSubnetGroups": {
      "input": {
        "type": "structure",
        "members": {
          "SubnetGroupName": {},
          "MaxResults": {
            "type": "integer"
          },
          "NextToken": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "NextToken": {},
          "SubnetGroups": {
            "type": "list",
            "member": {
              "shape": "S1q"
            }
          }
        }
      }
    },
    "DescribeUsers": {
      "input": {
        "type": "structure",
        "members": {
          "UserName": {},
          "Filters": {
            "type": "list",
            "member": {
              "type": "structure",
              "required": [
                "Name",
                "Values"
              ],
              "members": {
                "Name": {},
                "Values": {
                  "type": "list",
                  "member": {}
                }
              }
            }
          },
          "MaxResults": {
            "type": "integer"
          },
          "NextToken": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "Users": {
            "type": "list",
            "member": {
              "shape": "S20"
            }
          },
          "NextToken": {}
        }
      }
    },
    "FailoverShard": {
      "input": {
        "type": "structure",
        "required": [
          "ClusterName",
          "ShardName"
        ],
        "members": {
          "ClusterName": {},
          "ShardName": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "Cluster": {
            "shape": "S7"
          }
        }
      }
    },
    "ListAllowedNodeTypeUpdates": {
      "input": {
        "type": "structure",
        "required": [
          "ClusterName"
        ],
        "members": {
          "ClusterName": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "ScaleUpNodeTypes": {
            "shape": "S3q"
          },
          "ScaleDownNodeTypes": {
            "shape": "S3q"
          }
        }
      }
    },
    "ListTags": {
      "input": {
        "type": "structure",
        "required": [
          "ResourceArn"
        ],
        "members": {
          "ResourceArn": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "TagList": {
            "shape": "Sy"
          }
        }
      }
    },
    "ResetParameterGroup": {
      "input": {
        "type": "structure",
        "required": [
          "ParameterGroupName"
        ],
        "members": {
          "ParameterGroupName": {},
          "AllParameters": {
            "type": "boolean"
          },
          "ParameterNames": {
            "type": "list",
            "member": {}
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "ParameterGroup": {
            "shape": "S1k"
          }
        }
      }
    },
    "TagResource": {
      "input": {
        "type": "structure",
        "required": [
          "ResourceArn",
          "Tags"
        ],
        "members": {
          "ResourceArn": {},
          "Tags": {
            "shape": "Sy"
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "TagList": {
            "shape": "Sy"
          }
        }
      }
    },
    "UntagResource": {
      "input": {
        "type": "structure",
        "required": [
          "ResourceArn",
          "TagKeys"
        ],
        "members": {
          "ResourceArn": {},
          "TagKeys": {
            "type": "list",
            "member": {}
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "TagList": {
            "shape": "Sy"
          }
        }
      }
    },
    "UpdateACL": {
      "input": {
        "type": "structure",
        "required": [
          "ACLName"
        ],
        "members": {
          "ACLName": {},
          "UserNamesToAdd": {
            "shape": "S17"
          },
          "UserNamesToRemove": {
            "shape": "S17"
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "ACL": {
            "shape": "S1a"
          }
        }
      }
    },
    "UpdateCluster": {
      "input": {
        "type": "structure",
        "required": [
          "ClusterName"
        ],
        "members": {
          "ClusterName": {},
          "Description": {},
          "SecurityGroupIds": {
            "shape": "S1f"
          },
          "MaintenanceWindow": {},
          "SnsTopicArn": {},
          "SnsTopicStatus": {},
          "ParameterGroupName": {},
          "SnapshotWindow": {},
          "SnapshotRetentionLimit": {
            "type": "integer"
          },
          "NodeType": {},
          "EngineVersion": {},
          "ReplicaConfiguration": {
            "type": "structure",
            "members": {
              "ReplicaCount": {
                "type": "integer"
              }
            }
          },
          "ShardConfiguration": {
            "type": "structure",
            "members": {
              "ShardCount": {
                "type": "integer"
              }
            }
          },
          "ACLName": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "Cluster": {
            "shape": "S7"
          }
        }
      }
    },
    "UpdateParameterGroup": {
      "input": {
        "type": "structure",
        "required": [
          "ParameterGroupName",
          "ParameterNameValues"
        ],
        "members": {
          "ParameterGroupName": {},
          "ParameterNameValues": {
            "type": "list",
            "member": {
              "type": "structure",
              "members": {
                "ParameterName": {},
                "ParameterValue": {}
              }
            }
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "ParameterGroup": {
            "shape": "S1k"
          }
        }
      }
    },
    "UpdateSubnetGroup": {
      "input": {
        "type": "structure",
        "required": [
          "SubnetGroupName"
        ],
        "members": {
          "SubnetGroupName": {},
          "Description": {},
          "SubnetIds": {
            "shape": "S1o"
          }
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "SubnetGroup": {
            "shape": "S1q"
          }
        }
      }
    },
    "UpdateUser": {
      "input": {
        "type": "structure",
        "required": [
          "UserName"
        ],
        "members": {
          "UserName": {},
          "AuthenticationMode": {
            "shape": "S1v"
          },
          "AccessString": {}
        }
      },
      "output": {
        "type": "structure",
        "members": {
          "User": {
            "shape": "S20"
          }
        }
      }
    }
  },
  "shapes": {
    "S2": {
      "type": "list",
      "member": {}
    },
    "S6": {
      "type": "list",
      "member": {
        "shape": "S7"
      }
    },
    "S7": {
      "type": "structure",
      "members": {
        "Name": {},
        "Description": {},
        "Status": {},
        "PendingUpdates": {
          "type": "structure",
          "members": {
            "Resharding": {
              "type": "structure",
              "members": {
                "SlotMigration": {
                  "type": "structure",
                  "members": {
                    "ProgressPercentage": {
                      "type": "double"
                    }
                  }
                }
              }
            },
            "ACLs": {
              "type": "structure",
              "members": {
                "ACLToApply": {}
              }
            },
            "ServiceUpdates": {
              "type": "list",
              "member": {
                "type": "structure",
                "members": {
                  "ServiceUpdateName": {},
                  "Status": {}
                }
              }
            }
          }
        },
        "NumberOfShards": {
          "type": "integer"
        },
        "Shards": {
          "type": "list",
          "member": {
            "type": "structure",
            "members": {
              "Name": {},
              "Status": {},
              "Slots": {},
              "Nodes": {
                "type": "list",
                "member": {
                  "type": "structure",
                  "members": {
                    "Name": {},
                    "Status": {},
                    "AvailabilityZone": {},
                    "CreateTime": {
                      "type": "timestamp"
                    },
                    "Endpoint": {
                      "shape": "Sn"
                    }
                  }
                }
              },
              "NumberOfNodes": {
                "type": "integer"
              }
            }
          }
        },
        "AvailabilityMode": {},
        "ClusterEndpoint": {
          "shape": "Sn"
        },
        "NodeType": {},
        "EngineVersion": {},
        "EnginePatchVersion": {},
        "ParameterGroupName": {},
        "ParameterGroupStatus": {},
        "SecurityGroups": {
          "type": "list",
          "member": {
            "type": "structure",
            "members": {
              "SecurityGroupId": {},
              "Status": {}
            }
          }
        },
        "SubnetGroupName": {},
        "TLSEnabled": {
          "type": "boolean"
        },
        "KmsKeyId": {},
        "ARN": {},
        "SnsTopicArn": {},
        "SnsTopicStatus": {},
        "SnapshotRetentionLimit": {
          "type": "integer"
        },
        "MaintenanceWindow": {},
        "SnapshotWindow": {},
        "ACLName": {},
        "AutoMinorVersionUpgrade": {
          "type": "boolean"
        }
      }
    },
    "Sn": {
      "type": "structure",
      "members": {
        "Address": {},
        "Port": {
          "type": "integer"
        }
      }
    },
    "Sy": {
      "type": "list",
      "member": {
        "type": "structure",
        "members": {
          "Key": {},
          "Value": {}
        }
      }
    },
    "S11": {
      "type": "structure",
      "members": {
        "Name": {},
        "Status": {},
        "Source": {},
        "KmsKeyId": {},
        "ARN": {},
        "ClusterConfiguration": {
          "type": "structure",
          "members": {
            "Name": {},
            "Description": {},
            "NodeType": {},
            "EngineVersion": {},
            "MaintenanceWindow": {},
            "TopicArn": {},
            "Port": {
              "type": "integer"
            },
            "ParameterGroupName": {},
            "SubnetGroupName": {},
            "VpcId": {},
            "SnapshotRetentionLimit": {
              "type": "integer"
            },
            "SnapshotWindow": {},
            "NumShards": {
              "type": "integer"
            },
            "Shards": {
              "type": "list",
              "member": {
                "type": "structure",
                "members": {
                  "Name": {},
                  "Configuration": {
                    "type": "structure",
                    "members": {
                      "Slots": {},
                      "ReplicaCount": {
                        "type": "integer"
                      }
                    }
                  },
                  "Size": {},
                  "SnapshotCreationTime": {
                    "type": "timestamp"
                  }
                }
              }
            }
          }
        }
      }
    },
    "S17": {
      "type": "list",
      "member": {}
    },
    "S1a": {
      "type": "structure",
      "members": {
        "Name": {},
        "Status": {},
        "UserNames": {
          "shape": "S1b"
        },
        "MinimumEngineVersion": {},
        "PendingChanges": {
          "type": "structure",
          "members": {
            "UserNamesToRemove": {
              "shape": "S1b"
            },
            "UserNamesToAdd": {
              "shape": "S1b"
            }
          }
        },
        "Clusters": {
          "type": "list",
          "member": {}
        },
        "ARN": {}
      }
    },
    "S1b": {
      "type": "list",
      "member": {}
    },
    "S1f": {
      "type": "list",
      "member": {}
    },
    "S1k": {
      "type": "structure",
      "members": {
        "Name": {},
        "Family": {},
        "Description": {},
        "ARN": {}
      }
    },
    "S1o": {
      "type": "list",
      "member": {}
    },
    "S1q": {
      "type": "structure",
      "members": {
        "Name": {},
        "Description": {},
        "VpcId": {},
        "Subnets": {
          "type": "list",
          "member": {
            "type": "structure",
            "members": {
              "Identifier": {},
              "AvailabilityZone": {
                "type": "structure",
                "members": {
                  "Name": {}
                }
              }
            }
          }
        },
        "ARN": {}
      }
    },
    "S1v": {
      "type": "structure",
      "members": {
        "Type": {},
        "Passwords": {
          "type": "list",
          "member": {}
        }
      }
    },
    "S20": {
      "type": "structure",
      "members": {
        "Name": {},
        "Status": {},
        "AccessString": {},
        "ACLNames": {
          "type": "list",
          "member": {}
        },
        "MinimumEngineVersion": {},
        "Authentication": {
          "type": "structure",
          "members": {
            "Type": {},
            "PasswordCount": {
              "type": "integer"
            }
          }
        },
        "ARN": {}
      }
    },
    "S3q": {
      "type": "list",
      "member": {}
    }
  }
}