{"version":3,"sources":["../../server/incremental-cache.ts"],"names":["CacheFs","LRUCache","path","PrerenderManifest","normalizePagePath","IncrementalCacheValue","IncrementalCacheEntry","toRoute","pathname","replace","IncrementalCache","incrementalOptions","prerenderManifest","cache","locales","fs","constructor","max","dev","distDir","pagesDir","flushToDisk","getPrerenderManifest","process","env","__NEXT_TEST_MAX_ISR_CACHE","parseInt","length","value","kind","JSON","stringify","props","Error","html","pageData","getSeedPath","ext","join","calculateRevalidate","fromTime","Date","getTime","initialRevalidateSeconds","routes","revalidateAfter","getFallback","page","readFile","get","data","notFoundRoutes","includes","now","htmlPath","jsonPath","parse","mtime","stat","set","_","isStale","manifestPath","manifestEntry","curRevalidate","revalidateSeconds","dataRoute","posix","srcRoute","seedHtmlPath","seedJsonPath","mkdir","dirname","writeFile","error","console","warn"],"mappings":";;;;AAEqB,GAA8B,CAA9B,SAA8B;AAClC,GAAM,CAAN,KAAM;AAEW,GAAuB,CAAvB,kBAAuB;;;;;;SAGhD,OAAO,CAAC,QAAgB,EAAU,CAAC;IAC1C,MAAM,CAAC,QAAQ,CAAC,OAAO,QAAQ,CAAE,GAAE,OAAO,aAAa,CAAE,MAAK,CAAG;AACnE,CAAC;MAEY,gBAAgB;gBAaf,CAAC,CACX,EAAE,GACF,GAAG,GACH,GAAG,GACH,OAAO,GACP,QAAQ,GACR,WAAW,GACX,OAAO,GACP,oBAAoB,EAUtB,CAAC,CAAE,CAAC;QACF,IAAI,CAAC,EAAE,GAAG,EAAE;QACZ,IAAI,CAAC,kBAAkB,GAAG,CAAC;YACzB,GAAG;YACH,OAAO;YACP,QAAQ;YACR,WAAW,GACR,GAAG,KAAK,MAAM,CAAC,WAAW,KAAK,CAAW,aAAG,WAAW,GAAG,IAAI;QACpE,CAAC;QACD,IAAI,CAAC,OAAO,GAAG,OAAO;QACtB,IAAI,CAAC,iBAAiB,GAAG,oBAAoB;QAE7C,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,CAAC;YAC1C,EAAyD,AAAzD,uDAAyD;YACzD,GAAG,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,EAAE;QAC1D,CAAC;QAED,EAAE,EAAE,GAAG,EAAE,CAAC;YACR,IAAI,CAAC,KAAK,GAAG,GAAG,CA3DD,SAA8B,SA2DnB,CAAC;gBACzB,GAAG;gBACH,MAAM,EAAC,CAAC,CAAC,KAAK,EAAC,CAAC,EAAE,CAAC;oBACjB,EAAE,GAAG,KAAK,EAAE,CAAC;wBACX,MAAM,CAAC,EAAE;oBACX,CAAC,MAAM,EAAE,EAAE,KAAK,CAAC,IAAI,KAAK,CAAU,WAAE,CAAC;wBACrC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE,MAAM;oBAC3C,CAAC,MAAM,EAAE,EAAE,KAAK,CAAC,IAAI,KAAK,CAAO,QAAE,CAAC;wBAClC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAiD;oBACnE,CAAC;oBACD,EAAwC,AAAxC,sCAAwC;oBACxC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,EAAE,MAAM;gBAClE,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IAEO,WAAW,CAAC,QAAgB,EAAE,GAAW,EAAU,CAAC;QAC1D,MAAM,CA5EO,KAAM,SA4EP,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,QAAQ,KAAM,QAAQ,CAAC,CAAC,EAAE,GAAG;IACxE,CAAC;IAEO,mBAAmB,CACzB,QAAgB,EAChB,QAAgB,EACA,CAAC;QACjB,QAAQ,GAAG,OAAO,CAAC,QAAQ;QAE3B,EAAoD,AAApD,kDAAoD;QACpD,EAA+D,AAA/D,6DAA+D;QAC/D,EAAE,EAAE,IAAI,CAAC,kBAAkB,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC,IAAI,GAAG,OAAO,KAAK,IAAI;QAEnE,KAAK,CAAC,CAAC,CAAC,wBAAwB,EAAC,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAChE,QAAQ,KACL,CAAC;YACJ,wBAAwB,EAAE,CAAC;QAC7B,CAAC;QACD,KAAK,CAAC,eAAe,GACnB,MAAM,CAAC,wBAAwB,KAAK,CAAQ,UACxC,wBAAwB,GAAG,IAAI,GAAG,QAAQ,GAC1C,wBAAwB;QAE9B,MAAM,CAAC,eAAe;IACxB,CAAC;IAED,WAAW,CAAC,IAAY,EAAmB,CAAC;QAC1C,IAAI,OArG0B,kBAAuB,oBAqG5B,IAAI;QAC7B,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAM;IACvD,CAAC;IAED,EAAmC,AAAnC,iCAAmC;UAC7B,GAAG,CAAC,QAAgB,EAAyC,CAAC;QAClE,EAAE,EAAE,IAAI,CAAC,kBAAkB,CAAC,GAAG,EAAE,MAAM,CAAC,IAAI;QAC5C,QAAQ,OA5GsB,kBAAuB,oBA4GxB,QAAQ;QAErC,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ;QAEhD,EAAqC,AAArC,mCAAqC;QACrC,EAAE,GAAG,IAAI,EAAE,CAAC;YACV,EAAE,EAAE,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC,QAAQ,CAAC,QAAQ,GAAG,CAAC;gBAC7D,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG;gBACpB,KAAK,CAAC,eAAe,GAAG,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,GAAG;gBAC9D,IAAI,GAAG,CAAC;oBACN,KAAK,EAAE,IAAI;oBACX,eAAe,EAAE,eAAe,KAAK,KAAK,GAAG,GAAG,GAAG,KAAK;gBAC1D,CAAC;YACH,CAAC;YAED,GAAG,CAAC,CAAC;gBACH,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAM;gBAClD,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAM;gBAClD,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,QAAQ;gBAC5C,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,QAAQ;gBAC3D,KAAK,CAAC,CAAC,CAAC,KAAK,EAAC,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ;gBAE7C,IAAI,GAAG,CAAC;oBACN,eAAe,EAAE,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,KAAK,CAAC,OAAO;oBACjE,KAAK,EAAE,CAAC;wBACN,IAAI,EAAE,CAAM;wBACZ,IAAI;wBACJ,QAAQ;oBACV,CAAC;gBACH,CAAC;gBACD,EAAE,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;oBACf,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI;gBAC/B,CAAC;YACH,CAAC,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC;YACX,EAA+B,AAA/B,6BAA+B;YACjC,CAAC;QACH,CAAC;QACD,EAAE,GAAG,IAAI,EAAE,CAAC;YACV,MAAM,CAAC,IAAI;QACb,CAAC;QAED,EAAE,EACA,IAAI,IACJ,IAAI,CAAC,eAAe,KAAK,KAAK,IAC9B,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC,IAAI,GAAG,OAAO,IACzC,CAAC;YACD,IAAI,CAAC,OAAO,GAAG,IAAI;QACrB,CAAC;QAED,KAAK,CAAC,YAAY,GAAG,OAAO,CAAC,QAAQ;QACrC,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,YAAY;QAEhE,EAAE,EAAE,IAAI,IAAI,aAAa,EAAE,CAAC;YAC1B,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC,wBAAwB;QAC7D,CAAC;QACD,MAAM,CAAC,IAAI;IACb,CAAC;IAED,EAA+C,AAA/C,6CAA+C;UACzC,GAAG,CACP,QAAgB,EAChB,IAAkC,EAClC,iBAAkC,EAClC,CAAC;QACD,EAAE,EAAE,IAAI,CAAC,kBAAkB,CAAC,GAAG,EAAE,MAAM;QACvC,EAAE,EAAE,MAAM,CAAC,iBAAiB,KAAK,CAAW,YAAE,CAAC;YAC7C,EAAwD,AAAxD,sDAAwD;YACxD,EAAS,AAAT,OAAS;YACT,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,QAAQ,IAAI,CAAC;gBACzC,SAAS,EAnLA,KAAM,SAmLC,KAAK,CAAC,IAAI,CACxB,CAAa,qBAlLW,kBAAuB,oBAmL1B,QAAQ,EAAE,KAAK;gBAEtC,QAAQ,EAAE,IAAI;gBACd,wBAAwB,EAAE,iBAAiB;YAC7C,CAAC;QACH,CAAC;QAED,QAAQ,OA1LsB,kBAAuB,oBA0LxB,QAAQ;QACrC,EAAE,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;YACf,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;gBACxB,eAAe,EAAE,IAAI,CAAC,mBAAmB,CACvC,QAAQ,EACR,GAAG,CAAC,IAAI,GAAG,OAAO;gBAEpB,KAAK,EAAE,IAAI;YACb,CAAC;QACH,CAAC;QAED,EAAyE,AAAzE,uEAAyE;QACzE,EAAkC,AAAlC,gCAAkC;QAClC,EAAE,EAAE,IAAI,CAAC,kBAAkB,CAAC,WAAW,KAAI,IAAI,aAAJ,IAAI,KAAJ,IAAI,CAAJ,CAAU,GAAV,IAAI,CAAJ,CAAU,GAAV,IAAI,CAAE,IAAI,MAAK,CAAM,OAAE,CAAC;YACjE,GAAG,CAAC,CAAC;gBACH,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAM;gBACtD,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAM;gBACtD,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CA7MV,KAAM,SA6MU,OAAO,CAAC,YAAY;gBAC7C,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI;gBAC/C,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ;YACpE,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC;gBACf,EAA0B,AAA1B,wBAA0B;gBAC1B,OAAO,CAAC,IAAI,CAAC,CAAsC,uCAAE,QAAQ,EAAE,KAAK;YACtE,CAAC;QACH,CAAC;IACH,CAAC;;QA5MU,gBAAgB,GAAhB,gBAAgB"}