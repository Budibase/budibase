{"version":3,"sources":["../../../../server/lib/squoosh/main.ts"],"names":["Worker","path","execOnce","cpus","getWorker","resolve","__dirname","enableWorkerThreads","numWorkers","Math","max","min","length","computeWorkerKey","method","processBuffer","buffer","operations","encoding","quality","worker","imageData","decodeBuffer","operation","type","rotate","numRotations","width","resize","image","height","Buffer","from","encodeJpeg","encodeWebp","avifQuality","encodeAvif","encodePng","Error"],"mappings":"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"}