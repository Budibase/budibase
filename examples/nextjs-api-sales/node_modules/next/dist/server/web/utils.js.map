{"version":3,"sources":["../../../server/web/utils.ts"],"names":["NodeHeaders","streamToIterator","readable","reader","getReader","value","done","read","releaseLock","readableStreamTee","transformStream","TransformStream","transformStream2","writer","writable","getWriter","writer2","then","close","write","notImplemented","name","method","Error","fromNodeHeaders","object","headers","Headers","key","Object","entries","values","Array","isArray","v","undefined","append","toNodeHeaders","result","toLowerCase","splitCookiesString","cookiesString","cookiesStrings","pos","start","ch","lastComma","nextStart","cookiesSeparatorFound","skipWhitespace","length","test","charAt","notSpecialChar","push","substring","validateURL","url","String","URL","error","cause"],"mappings":";;;;QAEuB,gBAAgB,GAAhB,gBAAgB;QAcvB,iBAAiB,GAAjB,iBAAiB;QA0BjB,cAAc,GAAd,cAAc;QAMd,eAAe,GAAf,eAAe;QAaf,aAAa,GAAb,aAAa;QAuBb,kBAAkB,GAAlB,kBAAkB;QAqElB,WAAW,GAAX,WAAW;gBAvJJ,gBAAgB,CACrC,QAA2B,EACD,CAAC;IAC3B,KAAK,CAAC,MAAM,GAAG,QAAQ,CAAC,SAAS;UAC1B,IAAI,CAAE,CAAC;QACZ,KAAK,CAAC,CAAC,CAAC,KAAK,GAAE,IAAI,EAAC,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI;QACzC,EAAE,EAAE,IAAI,EAAE,KAAK;QACf,EAAE,EAAE,KAAK,EAAE,CAAC;kBACJ,KAAK;QACb,CAAC;IACH,CAAC;IACD,MAAM,CAAC,WAAW;AACpB,CAAC;SAEe,iBAAiB,CAC/B,QAA2B,EACa,CAAC;IACzC,KAAK,CAAC,eAAe,GAAG,GAAG,CAAC,eAAe;IAC3C,KAAK,CAAC,gBAAgB,GAAG,GAAG,CAAC,eAAe;IAC5C,KAAK,CAAC,MAAM,GAAG,eAAe,CAAC,QAAQ,CAAC,SAAS;IACjD,KAAK,CAAC,OAAO,GAAG,gBAAgB,CAAC,QAAQ,CAAC,SAAS;IAEnD,KAAK,CAAC,MAAM,GAAG,QAAQ,CAAC,SAAS;aACxB,IAAI,GAAG,CAAC;QACf,MAAM,CAAC,IAAI,GAAG,IAAI,EAAE,CAAC,CAAC,IAAI,GAAE,KAAK,EAAC,CAAC,GAAK,CAAC;YACvC,EAAE,EAAE,IAAI,EAAE,CAAC;gBACT,MAAM,CAAC,KAAK;gBACZ,OAAO,CAAC,KAAK;gBACb,MAAM;YACR,CAAC;YACD,MAAM,CAAC,KAAK,CAAC,KAAK;YAClB,OAAO,CAAC,KAAK,CAAC,KAAK;YACnB,IAAI;QACN,CAAC;IACH,CAAC;IACD,IAAI;IAEJ,MAAM,CAAC,CAAC;QAAA,eAAe,CAAC,QAAQ;QAAE,gBAAgB,CAAC,QAAQ;IAAA,CAAC;AAC9D,CAAC;SAEe,cAAc,CAAC,IAAY,EAAE,MAAc,EAAO,CAAC;IACjE,KAAK,CAAC,GAAG,CAAC,KAAK,EACZ,mBAAmB,EAAE,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC,kCAAkC;AAEzF,CAAC;SAEe,eAAe,CAAC,MAAmB,EAAW,CAAC;IAC7D,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO;IAC3B,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,KAAK,MAAM,CAAC,OAAO,CAAC,MAAM,EAAG,CAAC;QAChD,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,IAAI,KAAK,GAAG,CAAC;YAAA,KAAK;QAAA,CAAC;QACrD,GAAG,EAAE,GAAG,CAAC,CAAC,IAAI,MAAM,CAAE,CAAC;YACrB,EAAE,EAAE,CAAC,KAAK,SAAS,EAAE,CAAC;gBACpB,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;YACvB,CAAC;QACH,CAAC;IACH,CAAC;IACD,MAAM,CAAC,OAAO;AAChB,CAAC;SAEe,aAAa,CAAC,OAAiB,EAAe,CAAC;IAC7D,KAAK,CAAC,MAAM,GAAgB,CAAC;IAAA,CAAC;IAC9B,EAAE,EAAE,OAAO,EAAE,CAAC;QACZ,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,KAAK,OAAO,CAAC,OAAO,GAAI,CAAC;YAC7C,MAAM,CAAC,GAAG,IAAI,KAAK;YACnB,EAAE,EAAE,GAAG,CAAC,WAAW,OAAO,CAAY,aAAE,CAAC;gBACvC,MAAM,CAAC,GAAG,IAAI,kBAAkB,CAAC,KAAK;YACxC,CAAC;QACH,CAAC;IACH,CAAC;IACD,MAAM,CAAC,MAAM;AACf,CAAC;SAYe,kBAAkB,CAAC,aAAqB,EAAE,CAAC;IACzD,GAAG,CAAC,cAAc,GAAG,CAAC,CAAC;IACvB,GAAG,CAAC,GAAG,GAAG,CAAC;IACX,GAAG,CAAC,KAAK;IACT,GAAG,CAAC,EAAE;IACN,GAAG,CAAC,SAAS;IACb,GAAG,CAAC,SAAS;IACb,GAAG,CAAC,qBAAqB;aAEhB,cAAc,GAAG,CAAC;cAClB,GAAG,GAAG,aAAa,CAAC,MAAM,SAAS,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,GAAI,CAAC;YAC1E,GAAG,IAAI,CAAC;QACV,CAAC;QACD,MAAM,CAAC,GAAG,GAAG,aAAa,CAAC,MAAM;IACnC,CAAC;aAEQ,cAAc,GAAG,CAAC;QACzB,EAAE,GAAG,aAAa,CAAC,MAAM,CAAC,GAAG;QAE7B,MAAM,CAAC,EAAE,KAAK,CAAG,MAAI,EAAE,KAAK,CAAG,MAAI,EAAE,KAAK,CAAG;IAC/C,CAAC;UAEM,GAAG,GAAG,aAAa,CAAC,MAAM,CAAE,CAAC;QAClC,KAAK,GAAG,GAAG;QACX,qBAAqB,GAAG,KAAK;cAEtB,cAAc,GAAI,CAAC;YACxB,EAAE,GAAG,aAAa,CAAC,MAAM,CAAC,GAAG;YAC7B,EAAE,EAAE,EAAE,KAAK,CAAG,IAAE,CAAC;gBACf,EAAuE,AAAvE,qEAAuE;gBACvE,SAAS,GAAG,GAAG;gBACf,GAAG,IAAI,CAAC;gBAER,cAAc;gBACd,SAAS,GAAG,GAAG;sBAER,GAAG,GAAG,aAAa,CAAC,MAAM,IAAI,cAAc,GAAI,CAAC;oBACtD,GAAG,IAAI,CAAC;gBACV,CAAC;gBAED,EAA8B,AAA9B,4BAA8B;gBAC9B,EAAE,EAAE,GAAG,GAAG,aAAa,CAAC,MAAM,IAAI,aAAa,CAAC,MAAM,CAAC,GAAG,MAAM,CAAG,IAAE,CAAC;oBACpE,EAA6B,AAA7B,2BAA6B;oBAC7B,qBAAqB,GAAG,IAAI;oBAC5B,EAA2D,AAA3D,yDAA2D;oBAC3D,GAAG,GAAG,SAAS;oBACf,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,KAAK,EAAE,SAAS;oBAC5D,KAAK,GAAG,GAAG;gBACb,CAAC,MAAM,CAAC;oBACN,EAAuC,AAAvC,qCAAuC;oBACvC,EAA8B,AAA9B,4BAA8B;oBAC9B,GAAG,GAAG,SAAS,GAAG,CAAC;gBACrB,CAAC;YACH,CAAC,MAAM,CAAC;gBACN,GAAG,IAAI,CAAC;YACV,CAAC;QACH,CAAC;QAED,EAAE,GAAG,qBAAqB,IAAI,GAAG,IAAI,aAAa,CAAC,MAAM,EAAE,CAAC;YAC1D,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,KAAK,EAAE,aAAa,CAAC,MAAM;QACzE,CAAC;IACH,CAAC;IAED,MAAM,CAAC,cAAc;AACvB,CAAC;SAKe,WAAW,CAAC,GAAiB,EAAU,CAAC;IACtD,GAAG,CAAC,CAAC;QACH,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG;IAClC,CAAC,CAAC,KAAK,EAAE,KAAK,EAAO,CAAC;QACpB,KAAK,CAAC,GAAG,CAAC,KAAK,EACZ,4GAA4G,GAC7G,EAAkF,AAAlF,gFAAkF;QAClF,CAAC;YAAC,KAAK,EAAE,KAAK;QAAC,CAAC;IAEpB,CAAC;AACH,CAAC"}