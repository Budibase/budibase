<!DOCTYPE html>
<html>
<head>
  <title>handlebars</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/.bin/handlebars";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>handlebars</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">#!/usr/bin/env node</span>

<span class="hljs-keyword">var</span> argv = parseArgs({
  <span class="hljs-string">'f'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Output File'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'output'</span>
  },
  <span class="hljs-string">'map'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Source Map File'</span>
  },
  <span class="hljs-string">'a'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'boolean'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Exports amd style (require.js)'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'amd'</span>
  },
  <span class="hljs-string">'c'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Exports CommonJS style, path to Handlebars module'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'commonjs'</span>,
    <span class="hljs-string">'default'</span>: <span class="hljs-literal">null</span>
  },
  <span class="hljs-string">'h'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Path to handlebar.js (only valid for amd-style)'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'handlebarPath'</span>,
    <span class="hljs-string">'default'</span>: <span class="hljs-string">''</span>
  },
  <span class="hljs-string">'k'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Known helpers'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'known'</span>
  },
  <span class="hljs-string">'o'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'boolean'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Known helpers only'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'knownOnly'</span>
  },
  <span class="hljs-string">'m'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'boolean'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Minimize output'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'min'</span>
  },
  <span class="hljs-string">'n'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Template namespace'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'namespace'</span>,
    <span class="hljs-string">'default'</span>: <span class="hljs-string">'Handlebars.templates'</span>
  },
  <span class="hljs-string">'s'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'boolean'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Output template function only.'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'simple'</span>
  },
  <span class="hljs-string">'N'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Name of passed string templates. Optional if running in a simple mode. Required when operating on multiple templates.'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'name'</span>
  },
  <span class="hljs-string">'i'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Generates a template from the passed CLI argument.\n"-" is treated as a special value and causes stdin to be read for the template value.'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'string'</span>
  },
  <span class="hljs-string">'r'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Template root. Base value that will be stripped from template names.'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'root'</span>
  },
  <span class="hljs-string">'p'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'boolean'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Compiling a partial template'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'partial'</span>
  },
  <span class="hljs-string">'d'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'boolean'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Include data when compiling'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'data'</span>
  },
  <span class="hljs-string">'e'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Template extension.'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'extension'</span>,
    <span class="hljs-string">'default'</span>: <span class="hljs-string">'handlebars'</span>
  },
  <span class="hljs-string">'b'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'boolean'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Removes the BOM (Byte Order Mark) from the beginning of the templates.'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'bom'</span>
  },
  <span class="hljs-string">'v'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'boolean'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Prints the current compiler version'</span>,
    <span class="hljs-string">'alias'</span>: <span class="hljs-string">'version'</span>
  },
  <span class="hljs-string">'help'</span>: {
    <span class="hljs-string">'type'</span>: <span class="hljs-string">'boolean'</span>,
    <span class="hljs-string">'description'</span>: <span class="hljs-string">'Outputs this message'</span>
  }
});

argv.files = argv._;
<span class="hljs-keyword">delete</span> argv._;

<span class="hljs-keyword">var</span> Precompiler = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../dist/cjs/precompiler'</span>);
Precompiler.loadTemplates(argv, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, opts</span>) </span>{

  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">throw</span> err;
  }

  <span class="hljs-keyword">if</span> (opts.help || (!opts.templates.length &amp;&amp; !opts.version)) {
    printUsage(argv._spec, <span class="hljs-number">120</span>);
  } <span class="hljs-keyword">else</span> {
    Precompiler.cli(opts);
  }
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pad</span>(<span class="hljs-params">n</span>) </span>{
  <span class="hljs-keyword">var</span> str = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">while</span> (str.length &lt; n) {
    str += <span class="hljs-string">' '</span>;
  }
  <span class="hljs-keyword">return</span> str;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseArgs</span>(<span class="hljs-params">spec</span>) </span>{
  <span class="hljs-keyword">var</span> opts = { <span class="hljs-attr">alias</span>: {}, <span class="hljs-attr">boolean</span>: [], <span class="hljs-attr">default</span>: {}, <span class="hljs-attr">string</span>: [] };

  <span class="hljs-built_in">Object</span>.keys(spec).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arg</span>) </span>{
    <span class="hljs-keyword">var</span> opt = spec[arg];
    opts[opt.type].push(arg);
    <span class="hljs-keyword">if</span> (<span class="hljs-string">'alias'</span> <span class="hljs-keyword">in</span> opt) opts.alias[arg] = opt.alias;
    <span class="hljs-keyword">if</span> (<span class="hljs-string">'default'</span> <span class="hljs-keyword">in</span> opt) opts.default[arg] = opt.default;
  });

  <span class="hljs-keyword">var</span> argv = <span class="hljs-built_in">require</span>(<span class="hljs-string">'minimist'</span>)(process.argv.slice(<span class="hljs-number">2</span>), opts);
  argv._spec = spec;
  <span class="hljs-keyword">return</span> argv;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printUsage</span>(<span class="hljs-params">spec, wrap</span>) </span>{
  <span class="hljs-keyword">var</span> wordwrap = <span class="hljs-built_in">require</span>(<span class="hljs-string">'wordwrap'</span>);

  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Precompile handlebar templates.'</span>);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Usage: handlebars [template|directory]...'</span>);

  <span class="hljs-keyword">var</span> opts = [];
  <span class="hljs-keyword">var</span> width = <span class="hljs-number">0</span>;
  <span class="hljs-built_in">Object</span>.keys(spec).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arg</span>) </span>{
    <span class="hljs-keyword">var</span> opt = spec[arg];

    <span class="hljs-keyword">var</span> name = (arg.length === <span class="hljs-number">1</span> ? <span class="hljs-string">'-'</span> : <span class="hljs-string">'--'</span>) + arg;
    <span class="hljs-keyword">if</span> (<span class="hljs-string">'alias'</span> <span class="hljs-keyword">in</span> opt) name += <span class="hljs-string">', --'</span> + opt.alias;

    <span class="hljs-keyword">var</span> meta = <span class="hljs-string">'['</span> + opt.type + <span class="hljs-string">']'</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-string">'default'</span> <span class="hljs-keyword">in</span> opt) meta += <span class="hljs-string">' [default: '</span> + <span class="hljs-built_in">JSON</span>.stringify(opt.default) + <span class="hljs-string">']'</span>;

    opts.push({ <span class="hljs-attr">name</span>: name, <span class="hljs-attr">desc</span>: opt.description, <span class="hljs-attr">meta</span>: meta });
    <span class="hljs-keyword">if</span> (name.length &gt; width) width = name.length;
  });

  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Options:'</span>);
  opts.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">opt</span>) </span>{
    <span class="hljs-keyword">var</span> desc = wordwrap(width + <span class="hljs-number">4</span>, wrap + <span class="hljs-number">1</span>)(opt.desc);

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'  %s%s%s%s%s'</span>,
      opt.name,
      pad(width - opt.name.length + <span class="hljs-number">2</span>),
      desc.slice(width + <span class="hljs-number">4</span>),
      pad(wrap - opt.meta.length - desc.split(<span class="hljs-regexp">/\n/</span>).pop().length),
      opt.meta
      );
  });
}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
