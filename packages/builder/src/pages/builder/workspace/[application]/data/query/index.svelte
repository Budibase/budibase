<script>
  import { onMount } from "svelte"
  import { queries } from "@/stores/builder"
  import { redirect } from "@roxi/routify"

  // Workaround for Routify 2 + Svelte 5 compatibility
  // See: https://github.com/roxiness/routify/issues/563
  $redirect

  onMount(async () => {
    const { list, selected } = $queries
    if (selected) {
      $redirect(`./${selected?._id}`)
    } else if (list?.length) {
      $redirect(`./${list[0]._id}`)
    } else {
      $redirect("../")
    }
  })
</script>
